{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/commit.ts"],"sourcesContent":["import { ResourceFiber, RenderResult } from \"./types\";\n\nexport function commitRender(renderResult: RenderResult): void {\n  const errors: unknown[] = [];\n\n  for (const task of renderResult.commitTasks) {\n    try {\n      task();\n    } catch (error) {\n      errors.push(error);\n    }\n  }\n\n  if (errors.length > 0) {\n    if (errors.length === 1) {\n      throw errors[0];\n    } else {\n      for (const error of errors) {\n        console.error(error);\n      }\n      throw new AggregateError(errors, \"Errors during commit\");\n    }\n  }\n}\n\nexport function cleanupAllEffects<R, P>(executionContext: ResourceFiber<R, P>) {\n  const errors: unknown[] = [];\n  for (const cell of executionContext.cells) {\n    if (cell?.type === \"effect\") {\n      cell.deps = null; // Reset deps so effect runs again on next mount\n\n      if (cell.cleanup) {\n        try {\n          cell.cleanup?.();\n        } catch (e) {\n          errors.push(e);\n        } finally {\n          cell.cleanup = undefined;\n        }\n      }\n    }\n  }\n  if (errors.length > 0) {\n    if (errors.length === 1) {\n      throw errors[0];\n    } else {\n      for (const error of errors) {\n        console.error(error);\n      }\n      throw new AggregateError(errors, \"Errors during cleanup\");\n    }\n  }\n}\n"],"names":[],"mappings":";;;;;;AAEO,SAAS,aAAa,YAA0B;IACrD,MAAM,SAAoB,EAAE;IAE5B,KAAK,MAAM,QAAQ,aAAa,WAAW,CAAE;QAC3C,IAAI;YACF;QACF,EAAE,OAAO,OAAO;YACd,OAAO,IAAI,CAAC;QACd;IACF;IAEA,IAAI,OAAO,MAAM,GAAG,GAAG;QACrB,IAAI,OAAO,MAAM,KAAK,GAAG;YACvB,MAAM,MAAM,CAAC,EAAE;QACjB,OAAO;YACL,KAAK,MAAM,SAAS,OAAQ;gBAC1B,QAAQ,KAAK,CAAC;YAChB;YACA,MAAM,IAAI,eAAe,QAAQ;QACnC;IACF;AACF;AAEO,SAAS,kBAAwB,gBAAqC;IAC3E,MAAM,SAAoB,EAAE;IAC5B,KAAK,MAAM,QAAQ,iBAAiB,KAAK,CAAE;QACzC,IAAI,MAAM,SAAS,UAAU;YAC3B,KAAK,IAAI,GAAG,MAAM,gDAAgD;YAElE,IAAI,KAAK,OAAO,EAAE;gBAChB,IAAI;oBACF,KAAK,OAAO;gBACd,EAAE,OAAO,GAAG;oBACV,OAAO,IAAI,CAAC;gBACd,SAAU;oBACR,KAAK,OAAO,GAAG;gBACjB;YACF;QACF;IACF;IACA,IAAI,OAAO,MAAM,GAAG,GAAG;QACrB,IAAI,OAAO,MAAM,KAAK,GAAG;YACvB,MAAM,MAAM,CAAC,EAAE;QACjB,OAAO;YACL,KAAK,MAAM,SAAS,OAAQ;gBAC1B,QAAQ,KAAK,CAAC;YAChB;YACA,MAAM,IAAI,eAAe,QAAQ;QACnC;IACF;AACF"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/env.ts"],"sourcesContent":["export const isDevelopment =\n  process.env[\"NODE_ENV\"] === \"development\" ||\n  process.env[\"NODE_ENV\"] === \"test\";\n"],"names":[],"mappings":";;;;AACE;AADK,MAAM,gBACX,oDAA4B,iBAC5B,oDAA4B"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/execution-context.ts"],"sourcesContent":["import { isDevelopment } from \"./env\";\nimport { ResourceFiber } from \"./types\";\n\nlet currentResourceFiber: ResourceFiber<any, any> | null = null;\n\nexport function withResourceFiber<R, P>(\n  fiber: ResourceFiber<R, P>,\n  fn: () => void,\n): void {\n  fiber.currentIndex = 0;\n\n  const previousContext = currentResourceFiber;\n  currentResourceFiber = fiber;\n  try {\n    fn();\n\n    fiber.isFirstRender = false;\n\n    // ensure hook count matches\n    if (fiber.cells.length !== fiber.currentIndex) {\n      throw new Error(\n        `Rendered ${fiber.currentIndex} hooks but expected ${fiber.cells.length}. ` +\n          \"Hooks must be called in the exact same order in every render.\",\n      );\n    }\n  } finally {\n    currentResourceFiber = previousContext;\n  }\n}\nexport function getCurrentResourceFiber(): ResourceFiber<unknown, unknown> {\n  if (!currentResourceFiber) {\n    throw new Error(\"No resource fiber available\");\n  }\n  return currentResourceFiber;\n}\n\nexport function getDevStrictMode(enable: boolean) {\n  if (!isDevelopment) return null;\n  if (currentResourceFiber?.devStrictMode)\n    return currentResourceFiber.isFirstRender ? \"child\" : \"root\";\n\n  return enable ? \"root\" : null;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAGA,IAAI,uBAAuD;AAEpD,SAAS,kBACd,KAA0B,EAC1B,EAAc;IAEd,MAAM,YAAY,GAAG;IAErB,MAAM,kBAAkB;IACxB,uBAAuB;IACvB,IAAI;QACF;QAEA,MAAM,aAAa,GAAG;QAEtB,4BAA4B;QAC5B,IAAI,MAAM,KAAK,CAAC,MAAM,KAAK,MAAM,YAAY,EAAE;YAC7C,MAAM,IAAI,MACR,CAAC,SAAS,EAAE,MAAM,YAAY,CAAC,oBAAoB,EAAE,MAAM,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,GACzE;QAEN;IACF,SAAU;QACR,uBAAuB;IACzB;AACF;AACO,SAAS;IACd,IAAI,CAAC,sBAAsB;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEO,SAAS,iBAAiB,MAAe;IAC9C,IAAI,CAAC,yJAAa,EAAE,OAAO;IAC3B,IAAI,sBAAsB,eACxB,OAAO,qBAAqB,aAAa,GAAG,UAAU;IAExD,OAAO,SAAS,SAAS;AAC3B"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/call-resource-fn.ts"],"sourcesContent":["import { Resource } from \"./types\";\n\n/**\n * Renders a resource with the given props.\n * @internal This is for internal use only.\n */\nexport function callResourceFn<R, P>(resource: Resource<R, P>, props: P): R {\n  const fn = (resource as unknown as { [fnSymbol]?: (props: P) => R })[\n    fnSymbol\n  ];\n  if (!fn) {\n    throw new Error(\"ResourceElement.type is not a valid Resource\");\n  }\n  return fn(props);\n}\n\n/**\n * Symbol used to store the ResourceFn in the Resource constructor.\n * @internal This is for internal use only.\n */\nexport const fnSymbol = Symbol(\"fnSymbol\");\n"],"names":[],"mappings":";;;;;;AAMO,SAAS,eAAqB,QAAwB,EAAE,KAAQ;IACrE,MAAM,KAAK,AAAC,QAAwD,CAClE,SACD;IACD,IAAI,CAAC,IAAI;QACP,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,GAAG;AACZ;AAMO,MAAM,WAAW,OAAO"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/resource-fiber.ts"],"sourcesContent":["import { ResourceFiber, RenderResult, Resource } from \"./types\";\nimport { commitRender, cleanupAllEffects } from \"./commit\";\nimport { getDevStrictMode, withResourceFiber } from \"./execution-context\";\nimport { callResourceFn } from \"./call-resource-fn\";\nimport { isDevelopment } from \"./env\";\n\nexport function createResourceFiber<R, P>(\n  type: Resource<R, P>,\n  dispatchUpdate: (callback: () => boolean) => void,\n  strictMode: \"root\" | \"child\" | null = getDevStrictMode(false),\n): ResourceFiber<R, P> {\n  return {\n    type,\n    dispatchUpdate,\n    devStrictMode: strictMode,\n    cells: [],\n    currentIndex: 0,\n    renderContext: undefined,\n    isFirstRender: true,\n    isMounted: false,\n    isNeverMounted: true,\n  };\n}\n\nexport function unmountResourceFiber<R, P>(fiber: ResourceFiber<R, P>): void {\n  if (!fiber.isMounted)\n    throw new Error(\"Tried to unmount a fiber that is already unmounted\");\n\n  fiber.isMounted = false;\n  cleanupAllEffects(fiber);\n}\n\nexport function renderResourceFiber<R, P>(\n  fiber: ResourceFiber<R, P>,\n  props: P,\n): RenderResult {\n  const result = {\n    commitTasks: [],\n    props,\n    output: undefined as R | undefined,\n  };\n\n  withResourceFiber(fiber, () => {\n    fiber.renderContext = result;\n    try {\n      result.output = callResourceFn(fiber.type, props);\n    } finally {\n      fiber.renderContext = undefined;\n    }\n  });\n\n  return result;\n}\n\nexport function commitResourceFiber<R, P>(\n  fiber: ResourceFiber<R, P>,\n  result: RenderResult,\n): void {\n  fiber.isMounted = true;\n\n  if (isDevelopment && fiber.isNeverMounted && fiber.devStrictMode === \"root\") {\n    commitRender(result);\n    cleanupAllEffects(fiber);\n  }\n\n  fiber.isNeverMounted = false;\n  commitRender(result);\n}\n"],"names":[],"mappings":";;;;;;;;;;AACA;AACA;AACA;AACA;;;;;AAEO,SAAS,oBACd,IAAoB,EACpB,cAAiD,EACjD,aAAsC,IAAA,6KAAgB,EAAC,MAAM;IAE7D,OAAO;QACL;QACA;QACA,eAAe;QACf,OAAO,EAAE;QACT,cAAc;QACd,eAAe;QACf,eAAe;QACf,WAAW;QACX,gBAAgB;IAClB;AACF;AAEO,SAAS,qBAA2B,KAA0B;IACnE,IAAI,CAAC,MAAM,SAAS,EAClB,MAAM,IAAI,MAAM;IAElB,MAAM,SAAS,GAAG;IAClB,IAAA,gKAAiB,EAAC;AACpB;AAEO,SAAS,oBACd,KAA0B,EAC1B,KAAQ;IAER,MAAM,SAAS;QACb,aAAa,EAAE;QACf;QACA,QAAQ;IACV;IAEA,IAAA,8KAAiB,EAAC,OAAO;QACvB,MAAM,aAAa,GAAG;QACtB,IAAI;YACF,OAAO,MAAM,GAAG,IAAA,6KAAc,EAAC,MAAM,IAAI,EAAE;QAC7C,SAAU;YACR,MAAM,aAAa,GAAG;QACxB;IACF;IAEA,OAAO;AACT;AAEO,SAAS,oBACd,KAA0B,EAC1B,MAAoB;IAEpB,MAAM,SAAS,GAAG;IAElB,IAAI,yJAAa,IAAI,MAAM,cAAc,IAAI,MAAM,aAAa,KAAK,QAAQ;QAC3E,IAAA,2JAAY,EAAC;QACb,IAAA,gKAAiB,EAAC;IACpB;IAEA,MAAM,cAAc,GAAG;IACvB,IAAA,2JAAY,EAAC;AACf"}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/react/use-resource.ts"],"sourcesContent":["import { useLayoutEffect, useMemo, useReducer, useRef, useState } from \"react\";\nimport type { ExtractResourceReturnType, ResourceElement } from \"../core/types\";\nimport {\n  createResourceFiber,\n  unmountResourceFiber,\n  renderResourceFiber,\n  commitResourceFiber,\n} from \"../core/resource-fiber\";\nimport { isDevelopment } from \"../core/env\";\n\nconst useDevStrictMode = () => {\n  if (!isDevelopment) return null;\n\n  const count = useRef(0);\n  const isFirstRender = count.current === 0;\n  useState(() => count.current++);\n  if (count.current !== 2) return null;\n  return isFirstRender ? (\"child\" as const) : (\"root\" as const);\n};\n\nconst resourceReducer = (version: number, callback: () => boolean) => {\n  return version + (callback() ? 1 : 0);\n};\n\nexport function useResource<E extends ResourceElement<any, any>>(\n  element: E,\n): ExtractResourceReturnType<E> {\n  const [, dispatch] = useReducer(resourceReducer, 0);\n\n  const devStrictMode = useDevStrictMode();\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: user provided deps instead of prop identity\n  const fiber = useMemo(() => {\n    return createResourceFiber(element.type, dispatch, devStrictMode);\n  }, [element.type, element.key]);\n\n  const result = renderResourceFiber(fiber, element.props);\n  useLayoutEffect(() => {\n    return () => unmountResourceFiber(fiber);\n  }, [fiber]);\n  useLayoutEffect(() => {\n    commitResourceFiber(fiber, result);\n  });\n\n  return result.output;\n}\n"],"names":[],"mappings":";;;;AAAA;AAEA;AAMA;;;;;AAEA,MAAM,mBAAmB;;IACvB,IAAI,CAAC,yJAAa,EAAE,OAAO;IAE3B,MAAM,QAAQ,IAAA,gXAAM,EAAC;IACrB,MAAM,gBAAgB,MAAM,OAAO,KAAK;IACxC,IAAA,kXAAQ;qCAAC,IAAM,MAAM,OAAO;;IAC5B,IAAI,MAAM,OAAO,KAAK,GAAG,OAAO;IAChC,OAAO,gBAAiB,UAAqB;AAC/C;GARM;AAUN,MAAM,kBAAkB,CAAC,SAAiB;IACxC,OAAO,UAAU,CAAC,aAAa,IAAI,CAAC;AACtC;AAEO,SAAS,YACd,OAAU;;IAEV,MAAM,GAAG,SAAS,GAAG,IAAA,oXAAU,EAAC,iBAAiB;IAEjD,MAAM,gBAAgB;IAEtB,uGAAuG;IACvG,MAAM,QAAQ,IAAA,iXAAO;sCAAC;YACpB,OAAO,IAAA,6KAAmB,EAAC,QAAQ,IAAI,EAAE,UAAU;QACrD;qCAAG;QAAC,QAAQ,IAAI;QAAE,QAAQ,GAAG;KAAC;IAE9B,MAAM,SAAS,IAAA,6KAAmB,EAAC,OAAO,QAAQ,KAAK;IACvD,IAAA,yXAAe;uCAAC;YACd;+CAAO,IAAM,IAAA,8KAAoB,EAAC;;QACpC;sCAAG;QAAC;KAAM;IACV,IAAA,yXAAe;uCAAC;YACd,IAAA,6KAAmB,EAAC,OAAO;QAC7B;;IAEA,OAAO,OAAO,MAAM;AACtB;IArBgB;;QAKQ"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/resource.ts"],"sourcesContent":["import { ResourceElement } from \"./types\";\nimport { fnSymbol } from \"./call-resource-fn\";\n\nexport function resource<R>(fn: () => R): () => ResourceElement<R, undefined>;\nexport function resource<R, P>(\n  fn: (props: P) => R,\n): (props: P) => ResourceElement<R, P>;\nexport function resource<R, P>(\n  fn: (props?: P) => R,\n): (props?: P) => ResourceElement<R, P | undefined>;\nexport function resource<R, P = undefined>(fn: (props: P) => R) {\n  const type = (props?: P) => {\n    return {\n      type,\n      props: props!,\n    } satisfies ResourceElement<R, P>;\n  };\n\n  type[fnSymbol] = fn;\n\n  return type;\n}\n"],"names":[],"mappings":";;;;AACA;;AASO,SAAS,SAA2B,EAAmB;IAC5D,MAAM,OAAO,CAAC;QACZ,OAAO;YACL;YACA,OAAO;QACT;IACF;IAEA,IAAI,CAAC,uKAAQ,CAAC,GAAG;IAEjB,OAAO;AACT"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-state.ts"],"sourcesContent":["import { isDevelopment } from \"../core/env\";\nimport { getCurrentResourceFiber } from \"../core/execution-context\";\nimport { Cell, ResourceFiber } from \"../core/types\";\n\nexport namespace tapState {\n  export type StateUpdater<S> = S | ((prev: S) => S);\n}\n\nconst dispatchOnFiber = (\n  fiber: ResourceFiber<any, any>,\n  callback: () => boolean,\n) => {\n  if (fiber.renderContext) {\n    throw new Error(\"Resource updated during render\");\n  }\n\n  if (fiber.isMounted) {\n    // Only schedule rerender if currently mounted\n    fiber.dispatchUpdate(callback);\n  } else if (fiber.isNeverMounted) {\n    throw new Error(\"Resource updated before mount\");\n  }\n\n  // TODO mark dirty\n};\n\nfunction getStateCell<T>(\n  initialValue: T | (() => T),\n): Cell & { type: \"state\" } {\n  const fiber = getCurrentResourceFiber();\n  const index = fiber.currentIndex++;\n\n  // Check if we're trying to use more hooks than in previous renders\n  if (!fiber.isFirstRender && index >= fiber.cells.length) {\n    throw new Error(\n      \"Rendered more hooks than during the previous render. \" +\n        \"Hooks must be called in the exact same order in every render.\",\n    );\n  }\n\n  const cell = fiber.cells[index];\n  if (cell) {\n    if (cell.type !== \"state\")\n      throw new Error(\"Hook order changed between renders\");\n\n    return cell as Cell & { type: \"state\" };\n  }\n\n  const value =\n    typeof initialValue === \"function\"\n      ? (initialValue as () => T)()\n      : initialValue;\n\n  if (\n    isDevelopment &&\n    fiber.devStrictMode &&\n    typeof initialValue === \"function\"\n  ) {\n    void (initialValue as () => T)();\n  }\n\n  const newCell: Cell & { type: \"state\" } = {\n    type: \"state\",\n    value,\n    set: (updater: tapState.StateUpdater<T>) => {\n      dispatchOnFiber(fiber, () => {\n        const currentValue = newCell.value;\n        const nextValue =\n          typeof updater === \"function\"\n            ? (updater as (prev: T) => T)(currentValue)\n            : updater;\n\n        if (\n          isDevelopment &&\n          fiber.devStrictMode &&\n          typeof updater === \"function\"\n        ) {\n          void (updater as (prev: T) => T)(currentValue);\n        }\n\n        if (Object.is(currentValue, nextValue)) return false;\n\n        newCell.value = nextValue;\n        return true;\n      });\n    },\n  };\n\n  fiber.cells[index] = newCell;\n  return newCell;\n}\n\nexport function tapState<S = undefined>(): [\n  S | undefined,\n  (updater: tapState.StateUpdater<S>) => void,\n];\nexport function tapState<S>(\n  initial: S | (() => S),\n): [S, (updater: tapState.StateUpdater<S>) => void];\nexport function tapState<S>(\n  initial?: S | (() => S),\n): [S | undefined, (updater: tapState.StateUpdater<S>) => void] {\n  const cell = getStateCell(initial as S | (() => S));\n\n  return [cell.value, cell.set];\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAOA,MAAM,kBAAkB,CACtB,OACA;IAEA,IAAI,MAAM,aAAa,EAAE;QACvB,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,MAAM,SAAS,EAAE;QACnB,8CAA8C;QAC9C,MAAM,cAAc,CAAC;IACvB,OAAO,IAAI,MAAM,cAAc,EAAE;QAC/B,MAAM,IAAI,MAAM;IAClB;AAEA,kBAAkB;AACpB;AAEA,SAAS,aACP,YAA2B;IAE3B,MAAM,QAAQ,IAAA,oLAAuB;IACrC,MAAM,QAAQ,MAAM,YAAY;IAEhC,mEAAmE;IACnE,IAAI,CAAC,MAAM,aAAa,IAAI,SAAS,MAAM,KAAK,CAAC,MAAM,EAAE;QACvD,MAAM,IAAI,MACR,0DACE;IAEN;IAEA,MAAM,OAAO,MAAM,KAAK,CAAC,MAAM;IAC/B,IAAI,MAAM;QACR,IAAI,KAAK,IAAI,KAAK,SAChB,MAAM,IAAI,MAAM;QAElB,OAAO;IACT;IAEA,MAAM,QACJ,OAAO,iBAAiB,aACpB,AAAC,iBACD;IAEN,IACE,yJAAa,IACb,MAAM,aAAa,IACnB,OAAO,iBAAiB,YACxB;QACA,KAAK,AAAC;IACR;IAEA,MAAM,UAAoC;QACxC,MAAM;QACN;QACA,KAAK,CAAC;YACJ,gBAAgB,OAAO;gBACrB,MAAM,eAAe,QAAQ,KAAK;gBAClC,MAAM,YACJ,OAAO,YAAY,aACf,AAAC,QAA2B,gBAC5B;gBAEN,IACE,yJAAa,IACb,MAAM,aAAa,IACnB,OAAO,YAAY,YACnB;oBACA,KAAK,AAAC,QAA2B;gBACnC;gBAEA,IAAI,OAAO,EAAE,CAAC,cAAc,YAAY,OAAO;gBAE/C,QAAQ,KAAK,GAAG;gBAChB,OAAO;YACT;QACF;IACF;IAEA,MAAM,KAAK,CAAC,MAAM,GAAG;IACrB,OAAO;AACT;AASO,SAAS,SACd,OAAuB;IAEvB,MAAM,OAAO,aAAa;IAE1B,OAAO;QAAC,KAAK,KAAK;QAAE,KAAK,GAAG;KAAC;AAC/B"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-ref.ts"],"sourcesContent":["import { tapState } from \"./tap-state\";\n\nexport namespace tapRef {\n  export interface RefObject<T> {\n    current: T;\n  }\n}\n\nexport function tapRef<T>(initialValue: T): tapRef.RefObject<T>;\nexport function tapRef<T = undefined>(): tapRef.RefObject<T | undefined>;\nexport function tapRef<T>(initialValue?: T): tapRef.RefObject<T | undefined> {\n  const [state] = tapState(() => ({\n    current: initialValue,\n  }));\n  return state;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAUO,SAAS,OAAU,YAAgB;IACxC,MAAM,CAAC,MAAM,GAAG,IAAA,8JAAQ,EAAC,IAAM,CAAC;YAC9B,SAAS;QACX,CAAC;IACD,OAAO;AACT"}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/utils/deps-shallow-equal.ts"],"sourcesContent":["export const depsShallowEqual = (\n  a: readonly unknown[],\n  b: readonly unknown[],\n) => {\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (!Object.is(a[i], b[i])) return false;\n  }\n  return true;\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,mBAAmB,CAC9B,GACA;IAEA,IAAI,EAAE,MAAM,KAAK,EAAE,MAAM,EAAE,OAAO;IAClC,IAAK,IAAI,IAAI,GAAG,IAAI,EAAE,MAAM,EAAE,IAAK;QACjC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,GAAG,OAAO;IACrC;IACA,OAAO;AACT"}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-memo.ts"],"sourcesContent":["import { isDevelopment } from \"../core/env\";\nimport { getCurrentResourceFiber } from \"../core/execution-context\";\nimport { tapRef } from \"./tap-ref\";\nimport { depsShallowEqual } from \"./utils/deps-shallow-equal\";\n\nexport const tapMemo = <T>(fn: () => T, deps: readonly unknown[]) => {\n  const dataRef = tapRef<{ value: T; deps: readonly unknown[] }>();\n  if (!dataRef.current) {\n    if (isDevelopment) {\n      const fiber = getCurrentResourceFiber();\n      if (fiber.devStrictMode) {\n        void fn();\n      }\n    }\n\n    dataRef.current = { value: fn(), deps };\n  }\n\n  if (!depsShallowEqual(dataRef.current.deps, deps)) {\n    dataRef.current.value = fn();\n    dataRef.current.deps = deps;\n  }\n\n  return dataRef.current.value;\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,MAAM,UAAU,CAAI,IAAa;IACtC,MAAM,UAAU,IAAA,0JAAM;IACtB,IAAI,CAAC,QAAQ,OAAO,EAAE;QACpB,IAAI,yJAAa,EAAE;YACjB,MAAM,QAAQ,IAAA,oLAAuB;YACrC,IAAI,MAAM,aAAa,EAAE;gBACvB,KAAK;YACP;QACF;QAEA,QAAQ,OAAO,GAAG;YAAE,OAAO;YAAM;QAAK;IACxC;IAEA,IAAI,CAAC,IAAA,2LAAgB,EAAC,QAAQ,OAAO,CAAC,IAAI,EAAE,OAAO;QACjD,QAAQ,OAAO,CAAC,KAAK,GAAG;QACxB,QAAQ,OAAO,CAAC,IAAI,GAAG;IACzB;IAEA,OAAO,QAAQ,OAAO,CAAC,KAAK;AAC9B"}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/utils/tap-hook.ts"],"sourcesContent":["import { getCurrentResourceFiber } from \"../../core/execution-context\";\nimport { Cell } from \"../../core/types\";\n\nexport const tapHook = <T extends \"effect\" | \"memo\">(\n  type: T,\n  init: () => Cell,\n): Cell & { type: T } => {\n  const fiber = getCurrentResourceFiber();\n  const index = fiber.currentIndex++;\n\n  if (!fiber.isFirstRender && index >= fiber.cells.length) {\n    // Check if we're trying to use more hooks than in previous renders\n    throw new Error(\n      \"Rendered more hooks than during the previous render. \" +\n        \"Hooks must be called in the exact same order in every render.\",\n    );\n  }\n\n  let cell = fiber.cells[index];\n  if (!cell) {\n    cell = init();\n    fiber.cells[index] = cell;\n  }\n\n  if (cell.type !== type) {\n    throw new Error(\"Hook order changed between renders\");\n  }\n\n  return cell as Cell & { type: T };\n};\n\nexport const registerRenderMountTask = (task: () => void) => {\n  const fiber = getCurrentResourceFiber();\n  fiber.renderContext!.commitTasks.push(task);\n};\n"],"names":[],"mappings":";;;;;;AAAA;;AAGO,MAAM,UAAU,CACrB,MACA;IAEA,MAAM,QAAQ,IAAA,oLAAuB;IACrC,MAAM,QAAQ,MAAM,YAAY;IAEhC,IAAI,CAAC,MAAM,aAAa,IAAI,SAAS,MAAM,KAAK,CAAC,MAAM,EAAE;QACvD,mEAAmE;QACnE,MAAM,IAAI,MACR,0DACE;IAEN;IAEA,IAAI,OAAO,MAAM,KAAK,CAAC,MAAM;IAC7B,IAAI,CAAC,MAAM;QACT,OAAO;QACP,MAAM,KAAK,CAAC,MAAM,GAAG;IACvB;IAEA,IAAI,KAAK,IAAI,KAAK,MAAM;QACtB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;AAEO,MAAM,0BAA0B,CAAC;IACtC,MAAM,QAAQ,IAAA,oLAAuB;IACrC,MAAM,aAAa,CAAE,WAAW,CAAC,IAAI,CAAC;AACxC"}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-effect.ts"],"sourcesContent":["import { Cell } from \"../core/types\";\nimport { depsShallowEqual } from \"./utils/deps-shallow-equal\";\nimport { tapHook, registerRenderMountTask } from \"./utils/tap-hook\";\n\nconst newEffect = (): Cell & { type: \"effect\" } => ({\n  type: \"effect\",\n  cleanup: undefined,\n  deps: null, // null means the effect has never been run\n});\n\nexport namespace tapEffect {\n  export type Destructor = () => void;\n  export type EffectCallback = () => void | Destructor;\n}\n\nexport function tapEffect(effect: tapEffect.EffectCallback): void;\nexport function tapEffect(\n  effect: tapEffect.EffectCallback,\n  deps: readonly unknown[],\n): void;\nexport function tapEffect(\n  effect: tapEffect.EffectCallback,\n  deps?: readonly unknown[],\n): void {\n  const cell = tapHook(\"effect\", newEffect);\n\n  if (deps && cell.deps && depsShallowEqual(cell.deps, deps)) return;\n  if (cell.deps !== null && !!deps !== !!cell.deps)\n    throw new Error(\n      \"tapEffect called with and without dependencies across re-renders\",\n    );\n\n  registerRenderMountTask(() => {\n    const errors: unknown[] = [];\n\n    try {\n      cell.cleanup?.();\n    } catch (error) {\n      errors.push(error);\n    } finally {\n      cell.cleanup = undefined;\n    }\n\n    try {\n      const cleanup = effect();\n\n      if (cleanup !== undefined && typeof cleanup !== \"function\") {\n        throw new Error(\n          \"An effect function must either return a cleanup function or nothing. \" +\n            `Received: ${typeof cleanup}`,\n        );\n      }\n\n      cell.cleanup = cleanup;\n    } catch (error) {\n      errors.push(error);\n    }\n\n    cell.deps = deps;\n\n    if (errors.length > 0) {\n      if (errors.length === 1) {\n        throw errors[0];\n      } else {\n        for (const error of errors) {\n          console.error(error);\n        }\n        throw new AggregateError(errors, \"Errors during commit\");\n      }\n    }\n  });\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAEA,MAAM,YAAY,IAAiC,CAAC;QAClD,MAAM;QACN,SAAS;QACT,MAAM;IACR,CAAC;AAYM,SAAS,UACd,MAAgC,EAChC,IAAyB;IAEzB,MAAM,OAAO,IAAA,qKAAO,EAAC,UAAU;IAE/B,IAAI,QAAQ,KAAK,IAAI,IAAI,IAAA,2LAAgB,EAAC,KAAK,IAAI,EAAE,OAAO;IAC5D,IAAI,KAAK,IAAI,KAAK,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,KAAK,IAAI,EAC9C,MAAM,IAAI,MACR;IAGJ,IAAA,qLAAuB,EAAC;QACtB,MAAM,SAAoB,EAAE;QAE5B,IAAI;YACF,KAAK,OAAO;QACd,EAAE,OAAO,OAAO;YACd,OAAO,IAAI,CAAC;QACd,SAAU;YACR,KAAK,OAAO,GAAG;QACjB;QAEA,IAAI;YACF,MAAM,UAAU;YAEhB,IAAI,YAAY,aAAa,OAAO,YAAY,YAAY;gBAC1D,MAAM,IAAI,MACR,0EACE,CAAC,UAAU,EAAE,OAAO,SAAS;YAEnC;YAEA,KAAK,OAAO,GAAG;QACjB,EAAE,OAAO,OAAO;YACd,OAAO,IAAI,CAAC;QACd;QAEA,KAAK,IAAI,GAAG;QAEZ,IAAI,OAAO,MAAM,GAAG,GAAG;YACrB,IAAI,OAAO,MAAM,KAAK,GAAG;gBACvB,MAAM,MAAM,CAAC,EAAE;YACjB,OAAO;gBACL,KAAK,MAAM,SAAS,OAAQ;oBAC1B,QAAQ,KAAK,CAAC;gBAChB;gBACA,MAAM,IAAI,eAAe,QAAQ;YACnC;QACF;IACF;AACF"}},
    {"offset": {"line": 537, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-callback.ts"],"sourcesContent":["import { tapMemo } from \"./tap-memo\";\n\nexport const tapCallback = <T extends (...args: any[]) => any>(\n  fn: T,\n  deps: readonly unknown[],\n): T => {\n  // biome-ignore lint/correctness/useExhaustiveDependencies: user provided deps instead of callback identity\n  return tapMemo(() => fn, deps);\n};\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,cAAc,CACzB,IACA;IAEA,2GAA2G;IAC3G,OAAO,IAAA,4JAAO,EAAC,IAAM,IAAI;AAC3B"}},
    {"offset": {"line": 554, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-const.ts"],"sourcesContent":["import { tapState } from \"./tap-state\";\n\nexport function tapConst<T>(getValue: () => T, _deps: readonly never[]): T {\n  const [state] = tapState(getValue);\n  return state;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS,SAAY,QAAiB,EAAE,KAAuB;IACpE,MAAM,CAAC,MAAM,GAAG,IAAA,8JAAQ,EAAC;IACzB,OAAO;AACT"}},
    {"offset": {"line": 571, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-resources.ts"],"sourcesContent":["import {\n  ExtractResourceReturnType,\n  RenderResult,\n  ResourceElement,\n  ResourceFiber,\n} from \"../core/types\";\nimport { tapEffect } from \"./tap-effect\";\nimport { tapMemo } from \"./tap-memo\";\nimport { tapState } from \"./tap-state\";\nimport { tapCallback } from \"./tap-callback\";\nimport {\n  createResourceFiber,\n  unmountResourceFiber,\n  renderResourceFiber,\n  commitResourceFiber,\n} from \"../core/resource-fiber\";\nimport { tapConst } from \"./tap-const\";\n\ntype FiberState = {\n  fiber: ResourceFiber<unknown, unknown>;\n  next:\n    | RenderResult\n    | [ResourceFiber<unknown, unknown>, RenderResult]\n    | \"delete\";\n};\n\nexport function tapResources<E extends ResourceElement<any, any>>(\n  getElements: () => readonly E[],\n  getElementsDeps?: readonly unknown[],\n): ExtractResourceReturnType<E>[] {\n  const [version, setVersion] = tapState(0);\n  const rerender = tapConst(() => () => setVersion((v) => v + 1), []);\n\n  const fibers = tapConst(() => new Map<string | number, FiberState>(), []);\n\n  const getElementsMemo = getElementsDeps\n    ? // biome-ignore lint/correctness/useExhaustiveDependencies: library code\n      tapCallback(getElements, getElementsDeps)\n    : getElements;\n\n  // Process each element\n\n  const res = tapMemo(() => {\n    void version;\n\n    const elementsArray = getElementsMemo();\n    const seenKeys = new Set<string | number>();\n    const results: any[] = [];\n    let newCount = 0;\n\n    // Create/update fibers and render\n    for (let i = 0; i < elementsArray.length; i++) {\n      const element = elementsArray[i]!;\n\n      const elementKey = element.key;\n      if (elementKey === undefined) {\n        throw new Error(\n          `tapResources did not provide a key for array at index ${i}`,\n        );\n      }\n\n      if (seenKeys.has(elementKey))\n        throw new Error(`Duplicate key ${elementKey} in tapResources`);\n      seenKeys.add(elementKey);\n\n      let state = fibers.get(elementKey);\n      if (!state) {\n        const fiber = createResourceFiber(element.type, (callback) => {\n          if (callback()) rerender();\n        });\n        const result = renderResourceFiber(fiber, element.props);\n        state = {\n          fiber,\n          next: result,\n        };\n        newCount++;\n        fibers.set(elementKey, state);\n        results.push(result.output);\n      } else if (state.fiber.type !== element.type) {\n        const fiber = createResourceFiber(element.type, (callback) => {\n          if (callback()) rerender();\n        });\n        const result = renderResourceFiber(fiber, element.props);\n        state.next = [fiber, result];\n        results.push(result.output);\n      } else {\n        state.next = renderResourceFiber(state.fiber, element.props);\n        results.push(state.next.output);\n      }\n    }\n\n    // Clean up removed fibers (only if there might be stale ones)\n    if (fibers.size > results.length - newCount) {\n      for (const key of fibers.keys()) {\n        if (!seenKeys.has(key)) {\n          fibers.get(key)!.next = \"delete\";\n        }\n      }\n    }\n\n    return results;\n  }, [getElementsMemo, version]);\n\n  // Cleanup on unmount\n  tapEffect(() => {\n    return () => {\n      for (const key of fibers.keys()) {\n        const fiber = fibers.get(key)!.fiber;\n        unmountResourceFiber(fiber);\n      }\n    };\n  }, []);\n\n  tapEffect(() => {\n    res; // as a performance optimization, we only run if the results have changed\n\n    for (const [key, state] of fibers.entries()) {\n      if (state.next === \"delete\") {\n        if (state.fiber.isMounted) {\n          unmountResourceFiber(state.fiber);\n        }\n\n        fibers.delete(key);\n      } else if (Array.isArray(state.next)) {\n        unmountResourceFiber(state.fiber);\n        state.fiber = state.next[0];\n        commitResourceFiber(state.fiber, state.next[1]);\n      } else {\n        commitResourceFiber(state.fiber, state.next);\n      }\n    }\n  }, [res]);\n\n  return res;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 686, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-effect-event.ts"],"sourcesContent":["import { tapRef } from \"./tap-ref\";\nimport { tapEffect } from \"./tap-effect\";\nimport { isDevelopment } from \"../core/env\";\nimport { tapCallback } from \"./tap-callback\";\nimport { getCurrentResourceFiber } from \"../core/execution-context\";\n\n/**\n * Creates a stable function reference that always calls the most recent version of the callback.\n * Similar to React's useEffectEvent hook.\n *\n * @param callback - The callback function to wrap\n * @returns A stable function reference that always calls the latest callback\n *\n * @example\n * ```typescript\n * const handleClick = tapEffectEvent((value: string) => {\n *   console.log(value);\n * });\n * // handleClick reference is stable, but always calls the latest version\n * ```\n */\nexport function tapEffectEvent<T extends (...args: any[]) => any>(\n  callback: T,\n): T {\n  const callbackRef = tapRef(callback);\n\n  tapEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  if (isDevelopment) {\n    const fiber = getCurrentResourceFiber();\n    return tapCallback(\n      ((...args: Parameters<T>) => {\n        if (fiber.renderContext)\n          throw new Error(\"tapEffectEvent cannot be called during render\");\n        return callbackRef.current(...args);\n      }) as T,\n      [fiber],\n    );\n  }\n\n  return callbackRef.current;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAiBO,SAAS,eACd,QAAW;IAEX,MAAM,cAAc,IAAA,0JAAM,EAAC;IAE3B,IAAA,gKAAS,EAAC;QACR,YAAY,OAAO,GAAG;IACxB;IAEA,IAAI,yJAAa,EAAE;QACjB,MAAM,QAAQ,IAAA,oLAAuB;QACrC,OAAO,IAAA,oKAAW,EACf,CAAC,GAAG;YACH,IAAI,MAAM,aAAa,EACrB,MAAM,IAAI,MAAM;YAClB,OAAO,YAAY,OAAO,IAAI;QAChC,GACA;YAAC;SAAM;IAEX;IAEA,OAAO,YAAY,OAAO;AAC5B"}},
    {"offset": {"line": 723, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-inline-resource.ts"],"sourcesContent":["import { ExtractResourceReturnType, ResourceElement } from \"../core/types\";\nimport { callResourceFn } from \"../core/call-resource-fn\";\n\nexport function tapInlineResource<E extends ResourceElement<any, any>>(\n  element: E,\n): ExtractResourceReturnType<E> {\n  return callResourceFn(element.type, element.props);\n}\n"],"names":[],"mappings":";;;;AACA;;AAEO,SAAS,kBACd,OAAU;IAEV,OAAO,IAAA,6KAAc,EAAC,QAAQ,IAAI,EAAE,QAAQ,KAAK;AACnD"}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/hooks/tap-resource.ts"],"sourcesContent":["import { ExtractResourceReturnType, ResourceElement } from \"../core/types\";\nimport { tapEffect } from \"./tap-effect\";\nimport {\n  createResourceFiber,\n  unmountResourceFiber,\n  renderResourceFiber,\n  commitResourceFiber,\n} from \"../core/resource-fiber\";\nimport { tapMemo } from \"./tap-memo\";\nimport { tapState } from \"./tap-state\";\nimport { tapConst } from \"./tap-const\";\n\nexport function tapResource<E extends ResourceElement<any, any>>(\n  element: E,\n): ExtractResourceReturnType<E>;\nexport function tapResource<E extends ResourceElement<any, any>>(\n  element: E,\n  propsDeps: readonly unknown[],\n): ExtractResourceReturnType<E>;\nexport function tapResource<E extends ResourceElement<any, any>>(\n  element: E,\n  propsDeps?: readonly unknown[],\n): ExtractResourceReturnType<E> {\n  const [version, setVersion] = tapState(0);\n  const rerender = tapConst(() => () => setVersion((v) => v + 1), []);\n\n  const fiber = tapMemo(() => {\n    void element.key;\n    return createResourceFiber(element.type, (callback) => {\n      if (callback()) rerender();\n    });\n  }, [element.type, element.key]);\n\n  const result = propsDeps\n    ? // biome-ignore lint/correctness/useExhaustiveDependencies: user provided deps instead of prop identity\n      tapMemo(\n        () => renderResourceFiber(fiber, element.props),\n        [fiber, ...propsDeps, version],\n      )\n    : renderResourceFiber(fiber, element.props);\n\n  tapEffect(() => () => unmountResourceFiber(fiber), [fiber]);\n  tapEffect(() => {\n    commitResourceFiber(fiber, result);\n  }, [fiber, result]);\n\n  return result.output;\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAMA;AACA;AACA;;;;;;AASO,SAAS,YACd,OAAU,EACV,SAA8B;IAE9B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,8JAAQ,EAAC;IACvC,MAAM,WAAW,IAAA,8JAAQ,EAAC,IAAM,IAAM,WAAW,CAAC,IAAM,IAAI,IAAI,EAAE;IAElE,MAAM,QAAQ,IAAA,4JAAO,EAAC;QACpB,KAAK,QAAQ,GAAG;QAChB,OAAO,IAAA,6KAAmB,EAAC,QAAQ,IAAI,EAAE,CAAC;YACxC,IAAI,YAAY;QAClB;IACF,GAAG;QAAC,QAAQ,IAAI;QAAE,QAAQ,GAAG;KAAC;IAE9B,MAAM,SAAS,YAEX,IAAA,4JAAO,EACL,IAAM,IAAA,6KAAmB,EAAC,OAAO,QAAQ,KAAK,GAC9C;QAAC;WAAU;QAAW;KAAQ,IAEhC,IAAA,6KAAmB,EAAC,OAAO,QAAQ,KAAK;IAE5C,IAAA,gKAAS,EAAC,IAAM,IAAM,IAAA,8KAAoB,EAAC,QAAQ;QAAC;KAAM;IAC1D,IAAA,gKAAS,EAAC;QACR,IAAA,6KAAmB,EAAC,OAAO;IAC7B,GAAG;QAAC;QAAO;KAAO;IAElB,OAAO,OAAO,MAAM;AACtB"}},
    {"offset": {"line": 788, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/with-key.ts"],"sourcesContent":["import { ResourceElement } from \"./types\";\n\nexport function withKey<E extends ResourceElement<any, any>>(\n  key: string | number,\n  element: E,\n): E {\n  return { ...element, key };\n}\n"],"names":[],"mappings":";;;;AAEO,SAAS,QACd,GAAoB,EACpB,OAAU;IAEV,OAAO;QAAE,GAAG,OAAO;QAAE;IAAI;AAC3B"}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/scheduler.ts"],"sourcesContent":["type Task = () => void;\n\ntype GlobalFlushState = {\n  schedulers: Set<UpdateScheduler>;\n  isScheduled: boolean;\n};\n\nconst MAX_FLUSH_LIMIT = 50;\nlet flushState: GlobalFlushState = {\n  schedulers: new Set([]),\n  isScheduled: false,\n};\n\nexport class UpdateScheduler {\n  private _isDirty = false;\n\n  constructor(private readonly _task: Task) {}\n\n  get isDirty() {\n    return this._isDirty;\n  }\n\n  markDirty() {\n    this._isDirty = true;\n\n    flushState.schedulers.add(this);\n    scheduleFlush();\n  }\n\n  runTask() {\n    this._isDirty = false;\n    this._task();\n  }\n}\n\nconst scheduleFlush = () => {\n  if (flushState.isScheduled) return;\n  flushState.isScheduled = true;\n  queueMicrotask(flushScheduled);\n};\n\nconst flushScheduled = () => {\n  try {\n    const errors = [];\n    let flushDepth = 0;\n\n    for (const scheduler of flushState.schedulers) {\n      flushState.schedulers.delete(scheduler);\n      if (!scheduler.isDirty) continue;\n\n      flushDepth++;\n\n      if (flushDepth > MAX_FLUSH_LIMIT) {\n        throw new Error(\n          `Maximum update depth exceeded. This can happen when a resource ` +\n            `repeatedly calls setState inside tapEffect.`,\n        );\n      }\n\n      try {\n        scheduler.runTask();\n      } catch (error) {\n        errors.push(error);\n      }\n    }\n\n    if (errors.length > 0) {\n      if (errors.length === 1) {\n        throw errors[0];\n      } else {\n        for (const error of errors) {\n          console.error(error);\n        }\n        throw new AggregateError(errors, \"Errors occurred during flushSync\");\n      }\n    }\n  } finally {\n    flushState.schedulers.clear();\n    flushState.isScheduled = false;\n  }\n};\n\nexport const flushResourcesSync = <T>(callback: () => T): T => {\n  const prev = flushState;\n  flushState = {\n    schedulers: new Set([]),\n    isScheduled: true,\n  };\n\n  try {\n    const result = callback();\n    flushScheduled();\n\n    return result;\n  } finally {\n    flushState = prev;\n  }\n};\n"],"names":[],"mappings":";;;;;;AAOA,MAAM,kBAAkB;AACxB,IAAI,aAA+B;IACjC,YAAY,IAAI,IAAI,EAAE;IACtB,aAAa;AACf;AAEO,MAAM;;IACH,SAAiB;IAEzB,YAAY,AAAiB,KAAW,CAAE;aAAb,QAAA;aAFrB,WAAW;IAEwB;IAE3C,IAAI,UAAU;QACZ,OAAO,IAAI,CAAC,QAAQ;IACtB;IAEA,YAAY;QACV,IAAI,CAAC,QAAQ,GAAG;QAEhB,WAAW,UAAU,CAAC,GAAG,CAAC,IAAI;QAC9B;IACF;IAEA,UAAU;QACR,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,KAAK;IACZ;AACF;AAEA,MAAM,gBAAgB;IACpB,IAAI,WAAW,WAAW,EAAE;IAC5B,WAAW,WAAW,GAAG;IACzB,eAAe;AACjB;AAEA,MAAM,iBAAiB;IACrB,IAAI;QACF,MAAM,SAAS,EAAE;QACjB,IAAI,aAAa;QAEjB,KAAK,MAAM,aAAa,WAAW,UAAU,CAAE;YAC7C,WAAW,UAAU,CAAC,MAAM,CAAC;YAC7B,IAAI,CAAC,UAAU,OAAO,EAAE;YAExB;YAEA,IAAI,aAAa,iBAAiB;gBAChC,MAAM,IAAI,MACR,CAAC,+DAA+D,CAAC,GAC/D,CAAC,2CAA2C,CAAC;YAEnD;YAEA,IAAI;gBACF,UAAU,OAAO;YACnB,EAAE,OAAO,OAAO;gBACd,OAAO,IAAI,CAAC;YACd;QACF;QAEA,IAAI,OAAO,MAAM,GAAG,GAAG;YACrB,IAAI,OAAO,MAAM,KAAK,GAAG;gBACvB,MAAM,MAAM,CAAC,EAAE;YACjB,OAAO;gBACL,KAAK,MAAM,SAAS,OAAQ;oBAC1B,QAAQ,KAAK,CAAC;gBAChB;gBACA,MAAM,IAAI,eAAe,QAAQ;YACnC;QACF;IACF,SAAU;QACR,WAAW,UAAU,CAAC,KAAK;QAC3B,WAAW,WAAW,GAAG;IAC3B;AACF;AAEO,MAAM,qBAAqB,CAAI;IACpC,MAAM,OAAO;IACb,aAAa;QACX,YAAY,IAAI,IAAI,EAAE;QACtB,aAAa;IACf;IAEA,IAAI;QACF,MAAM,SAAS;QACf;QAEA,OAAO;IACT,SAAU;QACR,aAAa;IACf;AACF"}},
    {"offset": {"line": 894, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/create-resource.ts"],"sourcesContent":["import { RenderResult, ResourceElement } from \"./types\";\nimport {\n  createResourceFiber,\n  unmountResourceFiber,\n  renderResourceFiber,\n  commitResourceFiber,\n} from \"./resource-fiber\";\nimport { flushResourcesSync, UpdateScheduler } from \"./scheduler\";\nimport { tapRef } from \"../hooks/tap-ref\";\nimport { tapState } from \"../hooks/tap-state\";\nimport { tapMemo } from \"../hooks/tap-memo\";\nimport { tapEffect } from \"../hooks/tap-effect\";\nimport { resource } from \"./resource\";\nimport { tapResource } from \"../hooks/tap-resource\";\nimport { tapConst } from \"../hooks/tap-const\";\nimport { getDevStrictMode } from \"./execution-context\";\nimport { isDevelopment } from \"./env\";\n\nexport namespace createResource {\n  export type Unsubscribe = () => void;\n\n  export interface Handle<R, P> {\n    getValue(): R;\n    subscribe(callback: () => void): Unsubscribe;\n    render(element: ResourceElement<R, P>): void;\n    unmount(): void;\n  }\n}\n\nconst HandleWrapperResource = resource(\n  <R, P>(state: {\n    elementRef: {\n      current: ResourceElement<R, P>;\n    };\n    onRender: (changed: boolean) => boolean;\n    onUnmount: () => void;\n  }): createResource.Handle<R, P> => {\n    const [, setElement] = tapState(state.elementRef.current);\n    const output = tapResource(state.elementRef.current);\n\n    const subscribers = tapConst(() => new Set<() => void>(), []);\n    const valueRef = tapRef(output);\n\n    tapEffect(() => {\n      if (output !== valueRef.current) {\n        valueRef.current = output;\n        subscribers.forEach((callback) => callback());\n      }\n    });\n\n    const handle = tapMemo(\n      () => ({\n        getValue: () => valueRef.current,\n        subscribe: (callback: () => void) => {\n          subscribers.add(callback);\n          return () => subscribers.delete(callback);\n        },\n\n        render: (el: ResourceElement<R, P>) => {\n          const changed = state.elementRef.current !== el;\n          state.elementRef.current = el;\n\n          if (state.onRender(changed)) {\n            setElement(el);\n          }\n        },\n        unmount: state.onUnmount,\n      }),\n      [state],\n    );\n\n    return handle;\n  },\n);\n\nexport const createResource = <R, P>(\n  element: ResourceElement<R, P>,\n  {\n    mount = true,\n    devStrictMode = false,\n  }: { mount?: boolean; devStrictMode?: boolean } = {},\n): createResource.Handle<R, P> => {\n  let isMounted = mount;\n  let render: RenderResult;\n  const props = {\n    elementRef: { current: element },\n    onRender: (changed: boolean) => {\n      if (isMounted) return changed;\n      isMounted = true;\n\n      if (\n        isDevelopment &&\n        fiber.isNeverMounted &&\n        fiber.devStrictMode === \"child\"\n      ) {\n        if (changed) {\n          render = renderResourceFiber(fiber, props);\n        }\n        commitResourceFiber(fiber, render);\n      } else {\n        flushResourcesSync(() => {\n          if (changed) {\n            // In strict mode, render twice to detect side effects\n            if (isDevelopment && fiber.devStrictMode === \"root\") {\n              void renderResourceFiber(fiber, props);\n            }\n\n            render = renderResourceFiber(fiber, props);\n          }\n\n          if (scheduler.isDirty) return;\n          commitResourceFiber(fiber, render!);\n        });\n      }\n\n      return false;\n    },\n    onUnmount: () => {\n      if (!isMounted) throw new Error(\"Resource not mounted\");\n      isMounted = false;\n\n      unmountResourceFiber(fiber);\n    },\n  };\n\n  const scheduler = new UpdateScheduler(() => {\n    // In strict mode, render twice to detect side effects\n    if (\n      isDevelopment &&\n      (fiber.devStrictMode === \"root\" ||\n        (fiber.devStrictMode && !fiber.isFirstRender))\n    ) {\n      void renderResourceFiber(fiber, props);\n    }\n\n    render = renderResourceFiber(fiber, props);\n\n    if (scheduler.isDirty || !isMounted) return;\n    commitResourceFiber(fiber, render);\n  });\n\n  const fiber = createResourceFiber(\n    HandleWrapperResource<R, P>,\n    (callback) => {\n      if (callback()) scheduler.markDirty();\n    },\n    getDevStrictMode(devStrictMode),\n  );\n\n  flushResourcesSync(() => {\n    scheduler.markDirty();\n  });\n\n  return render!.output;\n};\n"],"names":[],"mappings":";;;;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAaA,MAAM,wBAAwB,IAAA,yJAAQ,OACpC,CAAO;IAOL,MAAM,GAAG,WAAW,GAAG,IAAA,8JAAQ,EAAC,MAAM,UAAU,CAAC,OAAO;IACxD,MAAM,SAAS,IAAA,oKAAW,EAAC,MAAM,UAAU,CAAC,OAAO;IAEnD,MAAM,cAAc,IAAA,8JAAQ,EAAC,IAAM,IAAI,OAAmB,EAAE;IAC5D,MAAM,WAAW,IAAA,0JAAM,EAAC;IAExB,IAAA,gKAAS,EAAC;QACR,IAAI,WAAW,SAAS,OAAO,EAAE;YAC/B,SAAS,OAAO,GAAG;YACnB,YAAY,OAAO,CAAC,CAAC,WAAa;QACpC;IACF;IAEA,MAAM,SAAS,IAAA,4JAAO,EACpB,IAAM,CAAC;YACL,UAAU,IAAM,SAAS,OAAO;YAChC,WAAW,CAAC;gBACV,YAAY,GAAG,CAAC;gBAChB,OAAO,IAAM,YAAY,MAAM,CAAC;YAClC;YAEA,QAAQ,CAAC;gBACP,MAAM,UAAU,MAAM,UAAU,CAAC,OAAO,KAAK;gBAC7C,MAAM,UAAU,CAAC,OAAO,GAAG;gBAE3B,IAAI,MAAM,QAAQ,CAAC,UAAU;oBAC3B,WAAW;gBACb;YACF;YACA,SAAS,MAAM,SAAS;QAC1B,CAAC,GACD;QAAC;KAAM;IAGT,OAAO;AACT;;AAGK,MAAM,iBAAiB,CAC5B,SACA,EACE,QAAQ,IAAI,EACZ,gBAAgB,KAAK,EACwB,GAAG,CAAC,CAAC;IAEpD,IAAI,YAAY;IAChB,IAAI;IACJ,MAAM,QAAQ;QACZ,YAAY;YAAE,SAAS;QAAQ;QAC/B,UAAU,CAAC;YACT,IAAI,WAAW,OAAO;YACtB,YAAY;YAEZ,IACE,yJAAa,IACb,MAAM,cAAc,IACpB,MAAM,aAAa,KAAK,SACxB;gBACA,IAAI,SAAS;oBACX,SAAS,IAAA,6KAAmB,EAAC,OAAO;gBACtC;gBACA,IAAA,6KAAmB,EAAC,OAAO;YAC7B,OAAO;gBACL,IAAA,oKAAkB,EAAC;oBACjB,IAAI,SAAS;wBACX,sDAAsD;wBACtD,IAAI,yJAAa,IAAI,MAAM,aAAa,KAAK,QAAQ;4BACnD,KAAK,IAAA,6KAAmB,EAAC,OAAO;wBAClC;wBAEA,SAAS,IAAA,6KAAmB,EAAC,OAAO;oBACtC;oBAEA,IAAI,UAAU,OAAO,EAAE;oBACvB,IAAA,6KAAmB,EAAC,OAAO;gBAC7B;YACF;YAEA,OAAO;QACT;QACA,WAAW;YACT,IAAI,CAAC,WAAW,MAAM,IAAI,MAAM;YAChC,YAAY;YAEZ,IAAA,8KAAoB,EAAC;QACvB;IACF;IAEA,MAAM,YAAY,IAAI,iKAAe,CAAC;QACpC,sDAAsD;QACtD,IACE,yJAAa,IACb,CAAC,MAAM,aAAa,KAAK,UACtB,MAAM,aAAa,IAAI,CAAC,MAAM,aAAa,AAAC,GAC/C;YACA,KAAK,IAAA,6KAAmB,EAAC,OAAO;QAClC;QAEA,SAAS,IAAA,6KAAmB,EAAC,OAAO;QAEpC,IAAI,UAAU,OAAO,IAAI,CAAC,WAAW;QACrC,IAAA,6KAAmB,EAAC,OAAO;IAC7B;IAEA,MAAM,QAAQ,IAAA,6KAAmB,EAC/B,uBACA,CAAC;QACC,IAAI,YAAY,UAAU,SAAS;IACrC,GACA,IAAA,6KAAgB,EAAC;IAGnB,IAAA,oKAAkB,EAAC;QACjB,UAAU,SAAS;IACrB;IAEA,OAAO,OAAQ,MAAM;AACvB"}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/utils/store-resource.ts"],"sourcesContent":["import {\n  tapEffect,\n  ResourceElement,\n  resource,\n  createResource,\n  tapState,\n} from \"@creatorem/ai-tap\";\nimport { Unsubscribe } from \"../types/client\";\n\nexport interface Store<TState> {\n  /**\n   * Get the current state of the store.\n   */\n  getValue(): TState;\n\n  /**\n   * Subscribe to the store.\n   */\n  subscribe(listener: () => void): Unsubscribe;\n}\n\nexport const StoreResource = resource(\n  <TState>(element: ResourceElement<TState>): Store<TState> => {\n    const [handle] = tapState(() => createResource(element, { mount: false }));\n\n    tapEffect(() => handle.unmount, [handle]);\n\n    tapEffect(() => {\n      handle.render(element);\n    });\n\n    return handle;\n  },\n);\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;;AAqBO,MAAM,gBAAgB,IAAA,yJAAQ,OACnC,CAAS;IACP,MAAM,CAAC,OAAO,GAAG,IAAA,8JAAQ,EAAC,IAAM,IAAA,yKAAc,EAAC,SAAS;YAAE,OAAO;QAAM;IAEvE,IAAA,gKAAS,EAAC,IAAM,OAAO,OAAO,EAAE;QAAC;KAAO;IAExC,IAAA,gKAAS,EAAC;QACR,OAAO,MAAM,CAAC;IAChB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1046, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/tap/src/core/context.ts"],"sourcesContent":["const contextValue: unique symbol = Symbol(\"tap.Context\");\ntype Context<T> = {\n  [contextValue]: T;\n};\n\nexport const createResourceContext = <T>(defaultValue: T): Context<T> => {\n  return {\n    [contextValue]: defaultValue,\n  };\n};\n\nexport const withContextProvider = <T, TResult>(\n  context: Context<T>,\n  value: T,\n  fn: () => TResult,\n) => {\n  const previousValue = context[contextValue];\n  context[contextValue] = value;\n  try {\n    return fn();\n  } finally {\n    context[contextValue] = previousValue;\n  }\n};\n\nexport const tap = <T>(context: Context<T>) => {\n  return context[contextValue];\n};\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,eAA8B,OAAO;AAKpC,MAAM,wBAAwB,CAAI;IACvC,OAAO;QACL,CAAC,aAAa,EAAE;IAClB;AACF;AAEO,MAAM,sBAAsB,CACjC,SACA,OACA;IAEA,MAAM,gBAAgB,OAAO,CAAC,aAAa;IAC3C,OAAO,CAAC,aAAa,GAAG;IACxB,IAAI;QACF,OAAO;IACT,SAAU;QACR,OAAO,CAAC,aAAa,GAAG;IAC1B;AACF;AAEO,MAAM,MAAM,CAAI;IACrB,OAAO,OAAO,CAAC,aAAa;AAC9B"}},
    {"offset": {"line": 1079, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/utils/tap-client-stack-context.ts"],"sourcesContent":["import {\n  createResourceContext,\n  tap,\n  withContextProvider,\n  tapMemo,\n} from \"@creatorem/ai-tap\";\nimport type { ClientMethods } from \"../types/client\";\n\n/**\n * Symbol used to get the client index from a ClientProxy.\n */\nexport const SYMBOL_CLIENT_INDEX = Symbol(\"assistant-ui.store.clientIndex\");\n\n/**\n * Get the index of a client (its position in the client stack when created).\n */\nexport const getClientIndex = (client: ClientMethods): number => {\n  return (client as unknown as { [SYMBOL_CLIENT_INDEX]: number })[\n    SYMBOL_CLIENT_INDEX\n  ];\n};\n\n/**\n * The client stack - an array of clients representing the current hierarchy.\n */\nexport type ClientStack = readonly ClientMethods[];\n\nconst ClientStackContext = createResourceContext<ClientStack>([]);\n\n/**\n * Get the current client stack inside a tap resource.\n */\nexport const tapClientStack = (): ClientStack => {\n  return tap(ClientStackContext);\n};\n\n/**\n * Execute a callback with a client pushed onto the stack.\n * The stack is duplicated, not mutated.\n */\nexport const tapWithClientStack = <T>(\n  client: ClientMethods,\n  callback: () => T,\n): T => {\n  const currentStack = tapClientStack();\n  const newStack = tapMemo(\n    () => [...currentStack, client],\n    [currentStack, client],\n  );\n  return withContextProvider(ClientStackContext, newStack, callback);\n};\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;;AAWO,MAAM,sBAAsB,OAAO;AAKnC,MAAM,iBAAiB,CAAC;IAC7B,OAAO,AAAC,MAAuD,CAC7D,oBACD;AACH;AAOA,MAAM,qBAAqB,IAAA,qKAAqB,EAAc,EAAE;AAKzD,MAAM,iBAAiB;IAC5B,OAAO,IAAA,mJAAG,EAAC;AACb;AAMO,MAAM,qBAAqB,CAChC,QACA;IAEA,MAAM,eAAe;IACrB,MAAM,WAAW,IAAA,4JAAO,EACtB,IAAM;eAAI;YAAc;SAAO,EAC/B;QAAC;QAAc;KAAO;IAExB,OAAO,IAAA,mKAAmB,EAAC,oBAAoB,UAAU;AAC3D"}},
    {"offset": {"line": 1118, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/utils/base-proxy-handler.ts"],"sourcesContent":["const INTROSPECTION_PROPS = new Set([\"$$typeof\", \"nodeType\", \"then\"]);\n\n/**\n * Handles common proxy introspection properties.\n * Returns the appropriate value for toStringTag, toJSON, and props that should return undefined.\n * Returns `false` if the prop should be handled by the subclass.\n */\nexport const handleIntrospectionProp = (\n  prop: string | symbol,\n  name: string,\n): unknown | false => {\n  if (prop === Symbol.toStringTag) return name;\n  if (typeof prop === \"symbol\") return undefined;\n  if (prop === \"toJSON\") return () => name;\n  if (INTROSPECTION_PROPS.has(prop)) return undefined;\n  return false;\n};\n\nexport abstract class BaseProxyHandler implements ProxyHandler<object> {\n  abstract get(_: unknown, prop: string | symbol, receiver?: unknown): unknown;\n  abstract ownKeys(): ArrayLike<string | symbol>;\n  abstract has(_: unknown, prop: string | symbol): boolean;\n\n  getOwnPropertyDescriptor(_: unknown, prop: string | symbol) {\n    const value = this.get(_, prop);\n    if (value === undefined) return undefined;\n    return {\n      value,\n      writable: false,\n      enumerable: true,\n      configurable: false,\n    };\n  }\n\n  set() {\n    return false;\n  }\n  setPrototypeOf() {\n    return false;\n  }\n  defineProperty() {\n    return false;\n  }\n  deleteProperty() {\n    return false;\n  }\n  preventExtensions(): boolean {\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,sBAAsB,IAAI,IAAI;IAAC;IAAY;IAAY;CAAO;AAO7D,MAAM,0BAA0B,CACrC,MACA;IAEA,IAAI,SAAS,OAAO,WAAW,EAAE,OAAO;IACxC,IAAI,OAAO,SAAS,UAAU,OAAO;IACrC,IAAI,SAAS,UAAU,OAAO,IAAM;IACpC,IAAI,oBAAoB,GAAG,CAAC,OAAO,OAAO;IAC1C,OAAO;AACT;AAEO,MAAe;IAKpB,yBAAyB,CAAU,EAAE,IAAqB,EAAE;QAC1D,MAAM,QAAQ,IAAI,CAAC,GAAG,CAAC,GAAG;QAC1B,IAAI,UAAU,WAAW,OAAO;QAChC,OAAO;YACL;YACA,UAAU;YACV,YAAY;YACZ,cAAc;QAChB;IACF;IAEA,MAAM;QACJ,OAAO;IACT;IACA,iBAAiB;QACf,OAAO;IACT;IACA,iBAAiB;QACf,OAAO;IACT;IACA,iBAAiB;QACf,OAAO;IACT;IACA,oBAA6B;QAC3B,OAAO;IACT;AACF"}},
    {"offset": {"line": 1170, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/wrapper-resource.ts"],"sourcesContent":["import {\n  type ResourceElement,\n  Resource,\n  resource,\n  withKey,\n} from \"@creatorem/ai-tap\";\n\nexport const wrapperResource = <R, P>(\n  fn: (props: ResourceElement<P>) => R,\n): Resource<R, ResourceElement<P>> => {\n  const res = resource(fn);\n  return (props: ResourceElement<P>) => {\n    const el = res(props);\n    if (props.key === undefined) return el;\n    return withKey(props.key, el);\n  };\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAOO,MAAM,kBAAkB,CAC7B;IAEA,MAAM,MAAM,IAAA,yJAAQ,EAAC;IACrB,OAAO,CAAC;QACN,MAAM,KAAK,IAAI;QACf,IAAI,MAAM,GAAG,KAAK,WAAW,OAAO;QACpC,OAAO,IAAA,2JAAO,EAAC,MAAM,GAAG,EAAE;IAC5B;AACF"}},
    {"offset": {"line": 1192, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/tap-client-resource.ts"],"sourcesContent":["import {\n  tapEffect,\n  tapMemo,\n  tapRef,\n  type ResourceElement,\n  tapResource,\n  tapInlineResource,\n} from \"@creatorem/ai-tap\";\nimport type { ClientMethods, ClientOutputOf } from \"./types/client\";\nimport {\n  tapClientStack,\n  tapWithClientStack,\n  SYMBOL_CLIENT_INDEX,\n} from \"./utils/tap-client-stack-context\";\nimport {\n  BaseProxyHandler,\n  handleIntrospectionProp,\n} from \"./utils/base-proxy-handler\";\nimport { wrapperResource } from \"./wrapper-resource\";\n\n/**\n * Symbol used internally to get state from ClientProxy.\n * This allows getState() to be optional in the user-facing client.\n */\nconst SYMBOL_GET_OUTPUT = Symbol(\"assistant-ui.store.getValue\");\n\ntype ClientInternal = {\n  [SYMBOL_GET_OUTPUT]: ClientOutputOf<unknown, ClientMethods>;\n};\n\nexport const getClientState = (client: ClientMethods) => {\n  const output = (client as unknown as ClientInternal)[SYMBOL_GET_OUTPUT];\n  if (!output) {\n    throw new Error(\n      \"Client scope contains a non-client resource. \" +\n        \"Ensure your Derived get() returns a client created with tapClientResource(), not a plain resource.\",\n    );\n  }\n  return output.state;\n};\n\n// Global cache for function templates by field name\nconst fieldAccessFns = new Map<\n  string | symbol,\n  (this: unknown, ...args: unknown[]) => unknown\n>();\n\nfunction getOrCreateProxyFn(prop: string | symbol) {\n  let template = fieldAccessFns.get(prop);\n  if (!template) {\n    template = function (this: unknown, ...args: unknown[]) {\n      if (!this || typeof this !== \"object\") {\n        throw new Error(\n          `Method \"${String(prop)}\" called without proper context. ` +\n            `This may indicate the function was called incorrectly.`,\n        );\n      }\n\n      const output = (this as ClientInternal)[SYMBOL_GET_OUTPUT];\n      if (!output) {\n        throw new Error(\n          `Method \"${String(prop)}\" called on invalid client proxy. ` +\n            `Ensure you are calling this method on a valid client instance.`,\n        );\n      }\n\n      const method = output.methods[prop];\n      if (!method)\n        throw new Error(`Method \"${String(prop)}\" is not implemented.`);\n      if (typeof method !== \"function\")\n        throw new Error(`\"${String(prop)}\" is not a function.`);\n      return method(...args);\n    };\n    fieldAccessFns.set(prop, template);\n  }\n  return template;\n}\n\nclass ClientProxyHandler\n  extends BaseProxyHandler\n  implements ProxyHandler<object>\n{\n  private boundFns: Map<string | symbol, Function> | undefined;\n  private cachedReceiver: unknown;\n\n  constructor(\n    private readonly outputRef: {\n      current: ClientOutputOf<unknown, ClientMethods>;\n    },\n    private readonly index: number,\n  ) {\n    super();\n  }\n\n  get(_: unknown, prop: string | symbol, receiver: unknown) {\n    if (prop === SYMBOL_GET_OUTPUT) return this.outputRef.current;\n    if (prop === SYMBOL_CLIENT_INDEX) return this.index;\n    const introspection = handleIntrospectionProp(prop, \"ClientProxy\");\n    if (introspection !== false) return introspection;\n    const value = this.outputRef.current.methods[prop];\n    if (typeof value === \"function\") {\n      if (this.cachedReceiver !== receiver) {\n        this.boundFns = new Map();\n        this.cachedReceiver = receiver;\n      }\n      let bound = this.boundFns!.get(prop);\n      if (!bound) {\n        bound = getOrCreateProxyFn(prop).bind(receiver);\n        this.boundFns!.set(prop, bound);\n      }\n      return bound;\n    }\n    return value;\n  }\n\n  ownKeys(): ArrayLike<string | symbol> {\n    return Object.keys(this.outputRef.current.methods);\n  }\n\n  has(_: unknown, prop: string | symbol) {\n    if (prop === SYMBOL_GET_OUTPUT) return true;\n    if (prop === SYMBOL_CLIENT_INDEX) return true;\n    return prop in this.outputRef.current.methods;\n  }\n}\n\n/**\n * Resource that wraps a plain resource element to create a stable client proxy.\n *\n * Takes a ResourceElement that returns { state, methods } and\n * wraps it to produce a stable client proxy. This adds the client to the\n * client stack, enabling event scoping.\n *\n * Use this for 1:1 client mappings where you want event scoping to work correctly.\n *\n * @example\n * ```typescript\n * const MessageResource = resource(({ messageId }: { messageId: string }) => {\n *   return tapInlineResource(\n *     tapClientResource(InnerMessageResource({ messageId }))\n *   );\n * });\n * ```\n */\nexport const ClientResource = wrapperResource(\n  <TState, TMethods extends ClientMethods>(\n    element: ResourceElement<ClientOutputOf<TState, TMethods>>,\n  ): ClientOutputOf<TState, TMethods> & {\n    key: string | number | undefined;\n  } => {\n    const valueRef = tapRef(\n      null as unknown as ClientOutputOf<TState, TMethods>,\n    );\n\n    const index = tapClientStack().length;\n    const methods = tapMemo(\n      () =>\n        new Proxy<TMethods>(\n          {} as TMethods,\n          new ClientProxyHandler(valueRef, index),\n        ),\n      [index],\n    );\n\n    const value = tapWithClientStack(methods, () => tapResource(element));\n    if (!valueRef.current) {\n      valueRef.current = value;\n    }\n\n    tapEffect(() => {\n      valueRef.current = value;\n    });\n\n    return { methods, state: value.state, key: element.key };\n  },\n);\n\nexport const tapClientResource = <TState, TMethods extends ClientMethods>(\n  element: ResourceElement<ClientOutputOf<TState, TMethods>>,\n) => {\n  return tapInlineResource(ClientResource(element));\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1315, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/utils/proxied-assistant-state.tsx"],"sourcesContent":["\"use client\";\nimport { getClientState } from \"../tap-client-resource\";\nimport type { AssistantClient, AssistantState } from \"../types/client\";\nimport { BaseProxyHandler, handleIntrospectionProp } from \"./base-proxy-handler\";\n\nexport const PROXIED_ASSISTANT_STATE_SYMBOL = Symbol(\n  \"assistant-ui.store.proxiedAssistantState\",\n);\n\nconst isIgnoredKey = (key: string | symbol): key is \"on\" | \"subscribe\" => {\n  return key === \"on\" || key === \"subscribe\" || typeof key === \"symbol\";\n};\n\n/**\n * Proxied state that lazily accesses scope states\n */\nexport const createProxiedAssistantState = (\n  client: AssistantClient,\n): AssistantState => {\n  class ProxiedAssistantStateProxyHandler\n    extends BaseProxyHandler\n    implements ProxyHandler<AssistantState>\n  {\n    get(_: unknown, prop: string | symbol) {\n      const introspection = handleIntrospectionProp(prop, \"AssistantState\");\n      if (introspection !== false) return introspection;\n      const scope = prop as keyof AssistantClient;\n      if (isIgnoredKey(scope)) return undefined;\n      return getClientState(client[scope]());\n    }\n\n    ownKeys(): ArrayLike<string | symbol> {\n      return Object.keys(client).filter((key) => !isIgnoredKey(key));\n    }\n\n    has(_: unknown, prop: string | symbol): boolean {\n      return !isIgnoredKey(prop) && prop in client;\n    }\n  }\n\n  return new Proxy<AssistantState>(\n    {} as AssistantState,\n    new ProxiedAssistantStateProxyHandler(),\n  );\n};\n\nexport const getProxiedAssistantState = (\n  client: AssistantClient,\n): AssistantState => {\n  return (\n    client as unknown as { [PROXIED_ASSISTANT_STATE_SYMBOL]: AssistantState }\n  )[PROXIED_ASSISTANT_STATE_SYMBOL];\n};\n"],"names":[],"mappings":";;;;;;;;AACA;AAEA;AAHA;;;AAKO,MAAM,iCAAiC,OAC5C;AAGF,MAAM,eAAe,CAAC;IACpB,OAAO,QAAQ,QAAQ,QAAQ,eAAe,OAAO,QAAQ;AAC/D;AAKO,MAAM,8BAA8B,CACzC;IAEA,MAAM,0CACI,oLAAgB;QAGxB,IAAI,CAAU,EAAE,IAAqB,EAAE;YACrC,MAAM,gBAAgB,IAAA,2LAAuB,EAAC,MAAM;YACpD,IAAI,kBAAkB,OAAO,OAAO;YACpC,MAAM,QAAQ;YACd,IAAI,aAAa,QAAQ,OAAO;YAChC,OAAO,IAAA,0KAAc,EAAC,MAAM,CAAC,MAAM;QACrC;QAEA,UAAsC;YACpC,OAAO,OAAO,IAAI,CAAC,QAAQ,MAAM,CAAC,CAAC,MAAQ,CAAC,aAAa;QAC3D;QAEA,IAAI,CAAU,EAAE,IAAqB,EAAW;YAC9C,OAAO,CAAC,aAAa,SAAS,QAAQ;QACxC;IACF;IAEA,OAAO,IAAI,MACT,CAAC,GACD,IAAI;AAER;AAEO,MAAM,2BAA2B,CACtC;IAEA,OAAO,AACL,MACD,CAAC,+BAA+B;AACnC"}},
    {"offset": {"line": 1360, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/utils/react-assistant-context.tsx"],"sourcesContent":["import React, { createContext, useContext } from \"react\";\nimport type { AssistantClient, AssistantClientAccessor } from \"../types/client\";\nimport {\n  createProxiedAssistantState,\n  PROXIED_ASSISTANT_STATE_SYMBOL,\n} from \"./proxied-assistant-state\";\nimport { BaseProxyHandler, handleIntrospectionProp } from \"./base-proxy-handler\";\n\nconst NO_OP_SUBSCRIBE = () => () => {};\n\nconst createErrorClientField = (\n  message: string,\n): AssistantClientAccessor<never> => {\n  const fn = (() => {\n    throw new Error(message);\n  }) as AssistantClientAccessor<never>;\n  fn.source = null;\n  fn.query = null;\n  return fn;\n};\n\nclass DefaultAssistantClientProxyHandler\n  extends BaseProxyHandler\n  implements ProxyHandler<AssistantClient>\n{\n  get(_: unknown, prop: string | symbol) {\n    if (prop === \"subscribe\") return NO_OP_SUBSCRIBE;\n    if (prop === \"on\") return NO_OP_SUBSCRIBE;\n    if (prop === PROXIED_ASSISTANT_STATE_SYMBOL)\n      return DefaultAssistantClientProxiedAssistantState;\n    const introspection = handleIntrospectionProp(\n      prop,\n      \"DefaultAssistantClient\",\n    );\n    if (introspection !== false) return introspection;\n    return createErrorClientField(\n      \"You are using a component or hook that requires an AuiProvider. Wrap your component in an <AuiProvider> component.\",\n    );\n  }\n\n  ownKeys(): ArrayLike<string | symbol> {\n    return [\"subscribe\", \"on\", PROXIED_ASSISTANT_STATE_SYMBOL];\n  }\n\n  has(_: unknown, prop: string | symbol): boolean {\n    return (\n      prop === \"subscribe\" ||\n      prop === \"on\" ||\n      prop === PROXIED_ASSISTANT_STATE_SYMBOL\n    );\n  }\n}\n/** Default context value - throws \"wrap in AuiProvider\" error */\nexport const DefaultAssistantClient: AssistantClient =\n  new Proxy<AssistantClient>(\n    {} as AssistantClient,\n    new DefaultAssistantClientProxyHandler(),\n  );\n\nconst DefaultAssistantClientProxiedAssistantState = createProxiedAssistantState(\n  DefaultAssistantClient,\n);\n\n/** Root prototype for created clients - throws \"scope not defined\" error */\nexport const createRootAssistantClient = (): AssistantClient =>\n  new Proxy<AssistantClient>({} as AssistantClient, {\n    get(_: AssistantClient, prop: string | symbol) {\n      const introspection = handleIntrospectionProp(prop, \"AssistantClient\");\n      if (introspection !== false) return introspection;\n\n      return createErrorClientField(\n        `The current scope does not have a \"${String(prop)}\" property.`,\n      );\n    },\n  });\n\n/**\n * React Context for the AssistantClient\n */\nconst AssistantContext = createContext<AssistantClient>(DefaultAssistantClient);\n\nexport const useAssistantContextValue = (): AssistantClient => {\n  return useContext(AssistantContext);\n};\n\n/**\n * Provider component for AssistantClient\n *\n * @example\n * ```typescript\n * <AuiProvider value={aui}>\n *   <YourApp />\n * </AuiProvider>\n * ```\n */\nexport const AuiProvider = ({\n  value,\n  children,\n}: {\n  value: AssistantClient;\n  children: React.ReactNode;\n}): React.ReactElement => {\n  return (\n    <AssistantContext.Provider value={value}>\n      {children}\n    </AssistantContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;AAIA;;;;;;AAEA,MAAM,kBAAkB,IAAM,KAAO;AAErC,MAAM,yBAAyB,CAC7B;IAEA,MAAM,KAAM;QACV,MAAM,IAAI,MAAM;IAClB;IACA,GAAG,MAAM,GAAG;IACZ,GAAG,KAAK,GAAG;IACX,OAAO;AACT;AAEA,MAAM,2CACI,oLAAgB;IAGxB,IAAI,CAAU,EAAE,IAAqB,EAAE;QACrC,IAAI,SAAS,aAAa,OAAO;QACjC,IAAI,SAAS,MAAM,OAAO;QAC1B,IAAI,SAAS,wMAA8B,EACzC,OAAO;QACT,MAAM,gBAAgB,IAAA,2LAAuB,EAC3C,MACA;QAEF,IAAI,kBAAkB,OAAO,OAAO;QACpC,OAAO,uBACL;IAEJ;IAEA,UAAsC;QACpC,OAAO;YAAC;YAAa;YAAM,wMAA8B;SAAC;IAC5D;IAEA,IAAI,CAAU,EAAE,IAAqB,EAAW;QAC9C,OACE,SAAS,eACT,SAAS,QACT,SAAS,wMAA8B;IAE3C;AACF;AAEO,MAAM,yBACX,IAAI,MACF,CAAC,GACD,IAAI;AAGR,MAAM,8CAA8C,IAAA,qMAA2B,EAC7E;;AAIK,MAAM,4BAA4B,IACvC,IAAI,MAAuB,CAAC,GAAsB;QAChD,KAAI,CAAkB,EAAE,IAAqB;YAC3C,MAAM,gBAAgB,IAAA,2LAAuB,EAAC,MAAM;YACpD,IAAI,kBAAkB,OAAO,OAAO;YAEpC,OAAO,uBACL,CAAC,mCAAmC,EAAE,OAAO,MAAM,WAAW,CAAC;QAEnE;IACF;AAEF;;CAEC,GACD,MAAM,iCAAmB,IAAA,uXAAa,EAAkB;;AAEjD,MAAM,2BAA2B;;IACtC,OAAO,IAAA,oXAAU,EAAC;AACpB;GAFa;AAcN,MAAM,cAAc,CAAC,EAC1B,KAAK,EACL,QAAQ,EAIT;IACC,qBACE,sYAAC,iBAAiB,QAAQ;QAAC,OAAO;kBAC/B;;;;;;AAGP;MAZa"}},
    {"offset": {"line": 1449, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/derived.ts"],"sourcesContent":["import { resource, ResourceElement } from \"@creatorem/ai-tap\";\nimport type {\n  AssistantClient,\n  ClientNames,\n  AssistantClientAccessor,\n  ClientMeta,\n} from \"./types/client\";\n\n/**\n * Creates a derived client field that references a client from a parent scope.\n * The get callback always calls the most recent version (useEffectEvent pattern).\n *\n * IMPORTANT: The `get` callback must return a client that was created via\n * `tapClientResource` (or `tapClientLookup`/`tapClientList` which use it internally).\n * This is required for event scoping to work correctly.\n *\n * @example\n * ```typescript\n * const aui = useAui({\n *   message: Derived({\n *     source: \"thread\",\n *     query: { index: 0 },\n *     get: (aui) => aui.thread().message({ index: 0 }),\n *   }),\n * });\n * ```\n */\nexport const Derived = resource(\n  <K extends ClientNames>(_config: Derived.Props<K>): null => {\n    return null;\n  },\n);\n\nexport type DerivedElement<K extends ClientNames> = ResourceElement<\n  null,\n  Derived.Props<K>\n>;\n\nexport namespace Derived {\n  /**\n   * Props passed to a derived client resource element.\n   */\n  export type Props<K extends ClientNames> = {\n    get: (client: AssistantClient) => ReturnType<AssistantClientAccessor<K>>;\n  } & (ClientMeta<K> | { getMeta: (client: AssistantClient) => ClientMeta<K> });\n}\n"],"names":[],"mappings":";;;;AAAA;;AA2BO,MAAM,UAAU,IAAA,yJAAQ,OAC7B,CAAwB;IACtB,OAAO;AACT"}},
    {"offset": {"line": 1469, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/attach-default-peers.ts"],"sourcesContent":["import type { ResourceElement } from \"@creatorem/ai-tap\";\nimport type { ClientElement, ClientNames } from \"./types/client\";\nimport type { DerivedElement } from \"./derived\";\n\n/**\n * Symbol used to store default peer clients on a resource.\n */\nconst DEFAULT_PEERS = Symbol(\"assistant-ui.default-peers\");\n\n/**\n * Type for resources that have default peers attached.\n */\nexport type ResourceWithDefaultPeers = {\n  [DEFAULT_PEERS]?: DefaultPeers;\n};\n\n/**\n * Default peers configuration - can be either root clients or derived clients.\n */\nexport type DefaultPeers = {\n  [K in ClientNames]?: ClientElement<K> | DerivedElement<K>;\n};\n\n/**\n * Attaches default peer clients to a resource.\n *\n * Default peers are only applied if the scope doesn't exist:\n * - Not defined in parent context\n * - Not provided by user\n * - Not already defined by a previous resource's default peers\n *\n * First definition wins - no overriding is permitted.\n *\n * @param resource - The resource to attach default peers to\n * @param peers - The default peer clients to attach\n * @throws Error if a peer key already exists in the resource's default peers\n *\n * @example\n * ```typescript\n * const ThreadListClient = resource(({ ... }) => { ... });\n *\n * attachDefaultPeers(ThreadListClient, {\n *   // Derived default peers\n *   thread: Derived({ source: \"threads\", query: { type: \"main\" }, get: ... }),\n *   threadListItem: Derived({ ... }),\n *   composer: Derived({ getMeta: ..., get: ... }),\n *\n *   // Root default peers\n *   tools: Tools({}),\n *   modelContext: ModelContext({}),\n * });\n * ```\n */\nexport function attachDefaultPeers<\n  T extends (...args: any[]) => ResourceElement<any>,\n>(resource: T, peers: DefaultPeers): void {\n  const resourceWithPeers = resource as T & ResourceWithDefaultPeers;\n  const existing = resourceWithPeers[DEFAULT_PEERS] ?? {};\n\n  for (const key of Object.keys(peers)) {\n    if (key in existing) {\n      throw new Error(\n        `Default peer \"${key}\" is already attached to this resource`,\n      );\n    }\n  }\n\n  resourceWithPeers[DEFAULT_PEERS] = { ...existing, ...peers };\n}\n\n/**\n * Gets the default peers attached to a resource, if any.\n */\nexport function getDefaultPeers<\n  T extends (...args: any[]) => ResourceElement<any>,\n>(resource: T): DefaultPeers | undefined {\n  return (resource as T & ResourceWithDefaultPeers)[DEFAULT_PEERS];\n}\n"],"names":[],"mappings":";;;;;;AAIA;;CAEC,GACD,MAAM,gBAAgB,OAAO;AA8CtB,SAAS,mBAEd,QAAW,EAAE,KAAmB;IAChC,MAAM,oBAAoB;IAC1B,MAAM,WAAW,iBAAiB,CAAC,cAAc,IAAI,CAAC;IAEtD,KAAK,MAAM,OAAO,OAAO,IAAI,CAAC,OAAQ;QACpC,IAAI,OAAO,UAAU;YACnB,MAAM,IAAI,MACR,CAAC,cAAc,EAAE,IAAI,sCAAsC,CAAC;QAEhE;IACF;IAEA,iBAAiB,CAAC,cAAc,GAAG;QAAE,GAAG,QAAQ;QAAE,GAAG,KAAK;IAAC;AAC7D;AAKO,SAAS,gBAEd,QAAW;IACX,OAAO,AAAC,QAAyC,CAAC,cAAc;AAClE"}},
    {"offset": {"line": 1501, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/utils/split-clients.ts"],"sourcesContent":["import { Derived, DerivedElement } from \"../derived\";\nimport type {\n  AssistantClient,\n  ClientElement,\n  ClientNames,\n} from \"../types/client\";\nimport { getDefaultPeers } from \"../attach-default-peers\";\nimport type { useAui } from \"../use-aui\";\nimport { tapMemo } from \"@creatorem/ai-tap\";\n\nexport type RootClients = Partial<\n  Record<ClientNames, ClientElement<ClientNames>>\n>;\nexport type DerivedClients = Partial<\n  Record<ClientNames, DerivedElement<ClientNames>>\n>;\n\n/**\n * Splits a clients object into root clients and derived clients.\n *\n * @param clients - The clients input object to split\n * @returns An object with { rootClients, derivedClients }\n *\n * @example\n * ```typescript\n * const clients = {\n *   foo: RootClient({ ... }),\n *   bar: Derived({ ... }),\n * };\n *\n * const { rootClients, derivedClients } = splitClients(clients);\n * // rootClients = { foo: ... }\n * // derivedClients = { bar: ... }\n * ```\n */\nfunction splitClients(clients: useAui.Props, baseClient: AssistantClient) {\n  const rootClients: RootClients = {};\n  const derivedClients: DerivedClients = {};\n\n  for (const [key, clientElement] of Object.entries(clients) as [\n    keyof useAui.Props,\n    NonNullable<useAui.Props[keyof useAui.Props]>,\n  ][]) {\n    if (clientElement.type === Derived) {\n      derivedClients[key] = clientElement as DerivedElement<ClientNames>;\n    } else {\n      rootClients[key] = clientElement as ClientElement<ClientNames>;\n    }\n  }\n\n  // Recursively gather all default peers, flattening nested ones\n  const gatherDefaultPeers = (\n    clientElement: ClientElement<ClientNames>,\n    visited = new Set<ClientElement<ClientNames>>(),\n  ): Array<\n    [ClientNames, ClientElement<ClientNames> | DerivedElement<ClientNames>]\n  > => {\n    // Prevent infinite loops\n    if (visited.has(clientElement)) return [];\n    visited.add(clientElement);\n\n    const defaultPeers = getDefaultPeers(clientElement.type);\n    if (!defaultPeers) return [];\n\n    const result: Array<\n      [ClientNames, ClientElement<ClientNames> | DerivedElement<ClientNames>]\n    > = [];\n\n    for (const [key, peerElement] of Object.entries(defaultPeers) as [\n      ClientNames,\n      ClientElement<ClientNames> | DerivedElement<ClientNames>,\n    ][]) {\n      result.push([key, peerElement]);\n\n      // If this peer is a root client with its own default peers, recursively gather them\n      if (peerElement.type !== Derived<ClientNames>) {\n        const nestedPeers = gatherDefaultPeers(\n          peerElement as ClientElement<ClientNames>,\n          visited,\n        );\n        result.push(...nestedPeers);\n      }\n    }\n\n    return result;\n  };\n\n  // Apply flattened default peers for each root client\n  for (const [_clientKey, clientElement] of Object.entries(rootClients) as [\n    ClientNames,\n    ClientElement<ClientNames>,\n  ][]) {\n    const allPeers = gatherDefaultPeers(clientElement);\n\n    for (const [key, peerElement] of allPeers) {\n      // Skip if already exists (first wins)\n      if (\n        key in rootClients ||\n        key in derivedClients ||\n        baseClient[key].source !== null\n      )\n        continue;\n\n      if (peerElement.type === Derived<ClientNames>) {\n        derivedClients[key] = peerElement as DerivedElement<ClientNames>;\n      } else {\n        rootClients[key] = peerElement as ClientElement<ClientNames>;\n      }\n    }\n  }\n\n  return { rootClients, derivedClients };\n}\n\nconst tapShallowMemoObject = <T extends object>(object: T) => {\n  // biome-ignore lint/correctness/useExhaustiveDependencies: shallow memo\n  return tapMemo(() => object, [...Object.entries(object).flat()]);\n};\n\nexport const tapSplitClients = (\n  clients: useAui.Props,\n  baseClient: AssistantClient,\n) => {\n  const { rootClients, derivedClients } = splitClients(clients, baseClient);\n\n  return {\n    rootClients: tapShallowMemoObject(rootClients),\n    derivedClients: tapShallowMemoObject(derivedClients),\n  };\n};\n"],"names":[],"mappings":";;;;AAAA;AAMA;AAEA;;;;AASA;;;;;;;;;;;;;;;;;CAiBC,GACD,SAAS,aAAa,OAAqB,EAAE,UAA2B;IACtE,MAAM,cAA2B,CAAC;IAClC,MAAM,iBAAiC,CAAC;IAExC,KAAK,MAAM,CAAC,KAAK,cAAc,IAAI,OAAO,OAAO,CAAC,SAG7C;QACH,IAAI,cAAc,IAAI,KAAK,iJAAO,EAAE;YAClC,cAAc,CAAC,IAAI,GAAG;QACxB,OAAO;YACL,WAAW,CAAC,IAAI,GAAG;QACrB;IACF;IAEA,+DAA+D;IAC/D,MAAM,qBAAqB,CACzB,eACA,UAAU,IAAI,KAAiC;QAI/C,yBAAyB;QACzB,IAAI,QAAQ,GAAG,CAAC,gBAAgB,OAAO,EAAE;QACzC,QAAQ,GAAG,CAAC;QAEZ,MAAM,eAAe,IAAA,4KAAe,EAAC,cAAc,IAAI;QACvD,IAAI,CAAC,cAAc,OAAO,EAAE;QAE5B,MAAM,SAEF,EAAE;QAEN,KAAK,MAAM,CAAC,KAAK,YAAY,IAAI,OAAO,OAAO,CAAC,cAG3C;YACH,OAAO,IAAI,CAAC;gBAAC;gBAAK;aAAY;YAE9B,oFAAoF;YACpF,IAAI,YAAY,IAAI,KAAK,iJAAO,EAAe;gBAC7C,MAAM,cAAc,mBAClB,aACA;gBAEF,OAAO,IAAI,IAAI;YACjB;QACF;QAEA,OAAO;IACT;IAEA,qDAAqD;IACrD,KAAK,MAAM,CAAC,YAAY,cAAc,IAAI,OAAO,OAAO,CAAC,aAGpD;QACH,MAAM,WAAW,mBAAmB;QAEpC,KAAK,MAAM,CAAC,KAAK,YAAY,IAAI,SAAU;YACzC,sCAAsC;YACtC,IACE,OAAO,eACP,OAAO,kBACP,UAAU,CAAC,IAAI,CAAC,MAAM,KAAK,MAE3B;YAEF,IAAI,YAAY,IAAI,KAAK,iJAAO,EAAe;gBAC7C,cAAc,CAAC,IAAI,GAAG;YACxB,OAAO;gBACL,WAAW,CAAC,IAAI,GAAG;YACrB;QACF;IACF;IAEA,OAAO;QAAE;QAAa;IAAe;AACvC;AAEA,MAAM,uBAAuB,CAAmB;IAC9C,wEAAwE;IACxE,OAAO,IAAA,4JAAO,EAAC,IAAM,QAAQ;WAAI,OAAO,OAAO,CAAC,QAAQ,IAAI;KAAG;AACjE;AAEO,MAAM,kBAAkB,CAC7B,SACA;IAEA,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,GAAG,aAAa,SAAS;IAE9D,OAAO;QACL,aAAa,qBAAqB;QAClC,gBAAgB,qBAAqB;IACvC;AACF"}},
    {"offset": {"line": 1597, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/types/events.ts"],"sourcesContent":["import type {\n  AssistantClientAccessor,\n  ClientEvents,\n  ClientNames,\n} from \"./client\";\n\n// --- Event Map Construction ---\ntype UnionToIntersection<U> = (\n  U extends unknown\n    ? (x: U) => void\n    : never\n) extends (x: infer I) => void\n  ? I\n  : never;\n\ntype ClientEventMap = UnionToIntersection<\n  { [K in ClientNames]: ClientEvents<K> }[ClientNames]\n>;\n\n// --- Core Types ---\n\ntype WildcardPayload = {\n  [K in keyof ClientEventMap]: { event: K; payload: ClientEventMap[K] };\n}[keyof ClientEventMap];\n\nexport type AssistantEventPayload = ClientEventMap & { \"*\": WildcardPayload };\n\nexport type AssistantEventName = keyof AssistantEventPayload;\n\ntype EventSource<T extends AssistantEventName> =\n  T extends `${infer Source}.${string}` ? Source : never;\n\n// --- Scoping ---\n\ntype ParentOf<K extends ClientNames> =\n  AssistantClientAccessor<K> extends { source: infer S }\n    ? S extends ClientNames\n      ? S\n      : never\n    : never;\n\ntype AncestorsOf<\n  K extends ClientNames,\n  Seen extends ClientNames = never,\n> = K extends Seen\n  ? never\n  : ParentOf<K> extends never\n    ? never\n    : ParentOf<K> | AncestorsOf<ParentOf<K>, Seen | K>;\n\n/** Valid scopes: `\"*\"` | event source | ancestors of event source */\nexport type AssistantEventScope<TEvent extends AssistantEventName> =\n  | \"*\"\n  | EventSource<TEvent>\n  | (EventSource<TEvent> extends ClientNames\n      ? AncestorsOf<EventSource<TEvent>>\n      : never);\n\n// --- Selection & Callbacks ---\n\nexport type AssistantEventSelector<TEvent extends AssistantEventName> =\n  | TEvent\n  | { scope: AssistantEventScope<TEvent>; event: TEvent };\n\nexport const normalizeEventSelector = <TEvent extends AssistantEventName>(\n  selector: AssistantEventSelector<TEvent>,\n) => {\n  if (typeof selector === \"string\") {\n    const source = selector.split(\".\")[0] as AssistantEventScope<TEvent>;\n    return { scope: source, event: selector };\n  }\n  return { scope: selector.scope, event: selector.event };\n};\n\nexport type AssistantEventCallback<TEvent extends AssistantEventName> = (\n  payload: AssistantEventPayload[TEvent],\n) => void;\n"],"names":[],"mappings":";;;;AAgEO,MAAM,yBAAyB,CACpC;IAEA,IAAI,OAAO,aAAa,UAAU;QAChC,MAAM,SAAS,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE;QACrC,OAAO;YAAE,OAAO;YAAQ,OAAO;QAAS;IAC1C;IACA,OAAO;QAAE,OAAO,SAAS,KAAK;QAAE,OAAO,SAAS,KAAK;IAAC;AACxD"}},
    {"offset": {"line": 1621, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/utils/notification-manager.ts"],"sourcesContent":["import { resource } from \"@creatorem/ai-tap\";\nimport type { ClientStack } from \"./tap-client-stack-context\";\nimport type {\n  AssistantEventName,\n  AssistantEventPayload,\n} from \"../types/events\";\nimport { Unsubscribe } from \"../types/client\";\nimport { tapConst } from \"@creatorem/ai-tap\";\n\ntype InternalCallback = (payload: unknown, clientStack: ClientStack) => void;\n\nexport type NotificationManager = {\n  on<TEvent extends AssistantEventName>(\n    event: TEvent,\n    callback: (\n      payload: AssistantEventPayload[TEvent],\n      clientStack: ClientStack,\n    ) => void,\n  ): Unsubscribe;\n  emit<TEvent extends Exclude<AssistantEventName, \"*\">>(\n    event: TEvent,\n    payload: AssistantEventPayload[TEvent],\n    clientStack: ClientStack,\n  ): void;\n  subscribe(callback: () => void): Unsubscribe;\n  notifySubscribers(): void;\n};\n\nexport const NotificationManager = resource((): NotificationManager => {\n  return tapConst(() => {\n    const listeners = new Map<string, Set<InternalCallback>>();\n    const wildcardListeners = new Set<InternalCallback>();\n    const subscribers = new Set<() => void>();\n\n    return {\n      on(event, callback) {\n        const cb = callback as InternalCallback;\n        if (event === \"*\") {\n          wildcardListeners.add(cb);\n          return () => wildcardListeners.delete(cb);\n        }\n\n        let set = listeners.get(event);\n        if (!set) {\n          set = new Set();\n          listeners.set(event, set);\n        }\n        set.add(cb);\n\n        return () => {\n          set!.delete(cb);\n          if (set!.size === 0) listeners.delete(event);\n        };\n      },\n\n      emit(event, payload, clientStack) {\n        const eventListeners = listeners.get(event);\n        if (!eventListeners && wildcardListeners.size === 0) return;\n\n        queueMicrotask(() => {\n          const errors = [];\n          if (eventListeners) {\n            for (const cb of eventListeners) {\n              try {\n                cb(payload, clientStack);\n              } catch (e) {\n                errors.push(e);\n              }\n            }\n          }\n          if (wildcardListeners.size > 0) {\n            const wrapped = { event, payload };\n            for (const cb of wildcardListeners) {\n              try {\n                cb(wrapped, clientStack);\n              } catch (e) {\n                errors.push(e);\n              }\n            }\n          }\n\n          if (errors.length > 0) {\n            if (errors.length === 1) {\n              throw errors[0];\n            } else {\n              for (const error of errors) {\n                console.error(error);\n              }\n              throw new AggregateError(\n                errors,\n                \"Errors occurred during event emission\",\n              );\n            }\n          }\n        });\n      },\n\n      subscribe(callback) {\n        subscribers.add(callback);\n        return () => subscribers.delete(callback);\n      },\n\n      notifySubscribers() {\n        for (const cb of subscribers) {\n          try {\n            cb();\n          } catch (e) {\n            console.error(\"NotificationManager: subscriber callback error\", e);\n          }\n        }\n      },\n    };\n  }, []);\n});\n"],"names":[],"mappings":";;;;AAAA;AAOA;;;AAqBO,MAAM,sBAAsB,IAAA,yJAAQ,OAAC;IAC1C,OAAO,IAAA,8JAAQ,EAAC;QACd,MAAM,YAAY,IAAI;QACtB,MAAM,oBAAoB,IAAI;QAC9B,MAAM,cAAc,IAAI;QAExB,OAAO;YACL,IAAG,KAAK,EAAE,QAAQ;gBAChB,MAAM,KAAK;gBACX,IAAI,UAAU,KAAK;oBACjB,kBAAkB,GAAG,CAAC;oBACtB,OAAO,IAAM,kBAAkB,MAAM,CAAC;gBACxC;gBAEA,IAAI,MAAM,UAAU,GAAG,CAAC;gBACxB,IAAI,CAAC,KAAK;oBACR,MAAM,IAAI;oBACV,UAAU,GAAG,CAAC,OAAO;gBACvB;gBACA,IAAI,GAAG,CAAC;gBAER,OAAO;oBACL,IAAK,MAAM,CAAC;oBACZ,IAAI,IAAK,IAAI,KAAK,GAAG,UAAU,MAAM,CAAC;gBACxC;YACF;YAEA,MAAK,KAAK,EAAE,OAAO,EAAE,WAAW;gBAC9B,MAAM,iBAAiB,UAAU,GAAG,CAAC;gBACrC,IAAI,CAAC,kBAAkB,kBAAkB,IAAI,KAAK,GAAG;gBAErD,eAAe;oBACb,MAAM,SAAS,EAAE;oBACjB,IAAI,gBAAgB;wBAClB,KAAK,MAAM,MAAM,eAAgB;4BAC/B,IAAI;gCACF,GAAG,SAAS;4BACd,EAAE,OAAO,GAAG;gCACV,OAAO,IAAI,CAAC;4BACd;wBACF;oBACF;oBACA,IAAI,kBAAkB,IAAI,GAAG,GAAG;wBAC9B,MAAM,UAAU;4BAAE;4BAAO;wBAAQ;wBACjC,KAAK,MAAM,MAAM,kBAAmB;4BAClC,IAAI;gCACF,GAAG,SAAS;4BACd,EAAE,OAAO,GAAG;gCACV,OAAO,IAAI,CAAC;4BACd;wBACF;oBACF;oBAEA,IAAI,OAAO,MAAM,GAAG,GAAG;wBACrB,IAAI,OAAO,MAAM,KAAK,GAAG;4BACvB,MAAM,MAAM,CAAC,EAAE;wBACjB,OAAO;4BACL,KAAK,MAAM,SAAS,OAAQ;gCAC1B,QAAQ,KAAK,CAAC;4BAChB;4BACA,MAAM,IAAI,eACR,QACA;wBAEJ;oBACF;gBACF;YACF;YAEA,WAAU,QAAQ;gBAChB,YAAY,GAAG,CAAC;gBAChB,OAAO,IAAM,YAAY,MAAM,CAAC;YAClC;YAEA;gBACE,KAAK,MAAM,MAAM,YAAa;oBAC5B,IAAI;wBACF;oBACF,EAAE,OAAO,GAAG;wBACV,QAAQ,KAAK,CAAC,kDAAkD;oBAClE;gBACF;YACF;QACF;IACF,GAAG,EAAE;AACP"}},
    {"offset": {"line": 1718, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/utils/tap-assistant-context.ts"],"sourcesContent":["import {\n  createResourceContext,\n  tap,\n  withContextProvider,\n  tapEffectEvent,\n} from \"@creatorem/ai-tap\";\nimport type {\n  AssistantEventName,\n  AssistantEventPayload,\n} from \"../types/events\";\nimport type { AssistantClient } from \"../types/client\";\nimport { tapClientStack, type ClientStack } from \"./tap-client-stack-context\";\n\ntype EmitFn = <TEvent extends Exclude<AssistantEventName, \"*\">>(\n  event: TEvent,\n  payload: AssistantEventPayload[TEvent],\n  clientStack: ClientStack,\n) => void;\n\nexport type AssistantTapContextValue = {\n  clientRef: { parent: AssistantClient; current: AssistantClient | null };\n  emit: EmitFn;\n};\n\nconst AssistantTapContext =\n  createResourceContext<AssistantTapContextValue | null>(null);\n\nexport const withAssistantTapContextProvider = <TResult>(\n  value: AssistantTapContextValue,\n  fn: () => TResult,\n) => {\n  return withContextProvider(AssistantTapContext, value, fn);\n};\n\nconst tapAssistantTapContext = () => {\n  const ctx = tap(AssistantTapContext);\n  if (!ctx) throw new Error(\"AssistantTapContext is not available\");\n\n  return ctx;\n};\n\nexport const tapAssistantClientRef = () => {\n  return tapAssistantTapContext().clientRef;\n};\n\nexport const tapAssistantEmit = () => {\n  const { emit } = tapAssistantTapContext();\n  const clientStack = tapClientStack();\n\n  return tapEffectEvent(\n    <TEvent extends Exclude<AssistantEventName, \"*\">>(\n      event: TEvent,\n      payload: AssistantEventPayload[TEvent],\n    ) => {\n      emit(event, payload, clientStack);\n    },\n  );\n};\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AAWA;;;AAaA,MAAM,sBACJ,IAAA,qKAAqB,EAAkC;AAElD,MAAM,kCAAkC,CAC7C,OACA;IAEA,OAAO,IAAA,mKAAmB,EAAC,qBAAqB,OAAO;AACzD;AAEA,MAAM,yBAAyB;IAC7B,MAAM,MAAM,IAAA,mJAAG,EAAC;IAChB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAE1B,OAAO;AACT;AAEO,MAAM,wBAAwB;IACnC,OAAO,yBAAyB,SAAS;AAC3C;AAEO,MAAM,mBAAmB;IAC9B,MAAM,EAAE,IAAI,EAAE,GAAG;IACjB,MAAM,cAAc,IAAA,2LAAc;IAElC,OAAO,IAAA,8KAAc,EACnB,CACE,OACA;QAEA,KAAK,OAAO,SAAS;IACvB;AAEJ"}},
    {"offset": {"line": 1757, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/use-aui.tsx"],"sourcesContent":["\"use client\";\n\nimport { useResource } from \"@creatorem/ai-tap/react\";\nimport {\n  resource,\n  tapMemo,\n  tapResources,\n  tapEffectEvent,\n  tapInlineResource,\n  tapEffect,\n  tapRef,\n  tapResource,\n  withKey,\n} from \"@creatorem/ai-tap\";\nimport type {\n  AssistantClient,\n  AssistantClientAccessor,\n  ClientNames,\n  ClientElement,\n  ClientMeta,\n} from \"./types/client\";\nimport { Derived, DerivedElement } from \"./derived\";\nimport { StoreResource } from \"./utils/store-resource\";\nimport {\n  useAssistantContextValue,\n  DefaultAssistantClient,\n  createRootAssistantClient,\n} from \"./utils/react-assistant-context\";\nimport {\n  DerivedClients,\n  RootClients,\n  tapSplitClients,\n} from \"./utils/split-clients\";\nimport {\n  normalizeEventSelector,\n  type AssistantEventName,\n  type AssistantEventCallback,\n  type AssistantEventSelector,\n} from \"./types/events\";\nimport { NotificationManager } from \"./utils/notification-manager\";\nimport { withAssistantTapContextProvider } from \"./utils/tap-assistant-context\";\nimport { tapClientResource } from \"./tap-client-resource\";\nimport { getClientIndex } from \"./utils/tap-client-stack-context\";\nimport {\n  PROXIED_ASSISTANT_STATE_SYMBOL,\n  createProxiedAssistantState,\n} from \"./utils/proxied-assistant-state\";\n\nconst RootClientResource = resource(\n  <K extends ClientNames>({\n    element,\n    emit,\n    clientRef,\n  }: {\n    element: ClientElement<K>;\n    emit: NotificationManager[\"emit\"];\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n  }) => {\n    const { methods, state } = withAssistantTapContextProvider(\n      { clientRef, emit },\n      () => tapClientResource(element),\n    );\n    return tapMemo(() => ({ state, methods }), [methods, state]);\n  },\n);\n\nconst RootClientAccessorResource = resource(\n  <K extends ClientNames>({\n    element,\n    notifications,\n    clientRef,\n    name,\n  }: {\n    element: ClientElement<K>;\n    notifications: NotificationManager;\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n    name: K;\n  }): AssistantClientAccessor<K> => {\n    const store = tapInlineResource(\n      StoreResource(\n        RootClientResource({ element, emit: notifications.emit, clientRef }),\n      ),\n    );\n\n    tapEffect(() => {\n      return store.subscribe(notifications.notifySubscribers);\n    }, [store, notifications]);\n\n    return tapMemo(() => {\n      const clientFunction = () => store.getValue().methods;\n      Object.defineProperties(clientFunction, {\n        source: {\n          value: \"root\" as const,\n          writable: false,\n        },\n        query: {\n          value: {} as Record<string, never>,\n          writable: false,\n        },\n        name: {\n          value: name,\n          configurable: true,\n        },\n      });\n      return clientFunction as AssistantClientAccessor<K>;\n    }, [store, name]);\n  },\n);\n\nconst NoOpRootClientsAccessorsResource = resource(() => {\n  return tapMemo(\n    () => ({\n      clients: [] as AssistantClientAccessor<ClientNames>[],\n      subscribe: undefined,\n      on: undefined,\n    }),\n    [],\n  );\n});\n\nconst RootClientsAccessorsResource = resource(\n  ({\n    clients: inputClients,\n    clientRef,\n  }: {\n    clients: RootClients;\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n  }) => {\n    const notifications = tapInlineResource(NotificationManager());\n\n    tapEffect(\n      () => clientRef.parent.subscribe(notifications.notifySubscribers),\n      [clientRef, notifications],\n    );\n\n    const results = tapResources(\n      () =>\n        Object.keys(inputClients).map((key) =>\n          withKey(\n            key,\n            RootClientAccessorResource({\n              element: inputClients[key as keyof typeof inputClients]!,\n              notifications,\n              clientRef,\n              name: key as keyof typeof inputClients,\n            }),\n          ),\n        ),\n      [inputClients, notifications, clientRef],\n    );\n\n    return tapMemo(() => {\n      return {\n        clients: results,\n        subscribe: notifications.subscribe,\n        on: function <TEvent extends AssistantEventName>(\n          this: AssistantClient,\n          selector: AssistantEventSelector<TEvent>,\n          callback: AssistantEventCallback<TEvent>,\n        ) {\n          if (!this) {\n            throw new Error(\n              \"const { on } = useAui() is not supported. Use aui.on() instead.\",\n            );\n          }\n\n          const { scope, event } = normalizeEventSelector(selector);\n\n          if (scope !== \"*\") {\n            const source = this[scope as ClientNames].source;\n            if (source === null) {\n              throw new Error(\n                `Scope \"${scope}\" is not available. Use { scope: \"*\", event: \"${event}\" } to listen globally.`,\n              );\n            }\n          }\n\n          const localUnsub = notifications.on(event, (payload, clientStack) => {\n            if (scope === \"*\") {\n              callback(payload);\n              return;\n            }\n\n            const scopeClient = this[scope as ClientNames]();\n            const index = getClientIndex(scopeClient);\n            if (scopeClient === clientStack[index]) {\n              callback(payload);\n            }\n          });\n          if (\n            scope !== \"*\" &&\n            clientRef.parent[scope as ClientNames].source === null\n          )\n            return localUnsub;\n\n          const parentUnsub = clientRef.parent.on(selector, callback);\n\n          return () => {\n            localUnsub();\n            parentUnsub();\n          };\n        },\n      };\n    }, [results, notifications, clientRef]);\n  },\n);\n\ntype MetaMemo<K extends ClientNames> = {\n  meta?: ClientMeta<K>;\n  dep?: unknown;\n};\n\nconst getMeta = <K extends ClientNames>(\n  props: Derived.Props<K>,\n  clientRef: { parent: AssistantClient; current: AssistantClient | null },\n  memo: MetaMemo<K>,\n): ClientMeta<K> => {\n  if (\"source\" in props && \"query\" in props) return props;\n  if (memo.dep === props) return memo.meta!;\n  const meta = props.getMeta(clientRef.current!);\n  memo.meta = meta;\n  memo.dep = props;\n  return meta;\n};\n\nconst DerivedClientAccessorResource = resource(\n  <K extends ClientNames>({\n    element,\n    clientRef,\n    name,\n  }: {\n    element: DerivedElement<K>;\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n    name: K;\n  }) => {\n    const get = tapEffectEvent(() => element.props);\n\n    return tapMemo(() => {\n      const clientFunction = () => get().get(clientRef.current!);\n      const metaMemo = {};\n      Object.defineProperties(clientFunction, {\n        source: {\n          get: () => getMeta(get(), clientRef, metaMemo).source,\n        },\n        query: {\n          get: () => getMeta(get(), clientRef, metaMemo).query,\n        },\n        name: {\n          value: name,\n          configurable: true,\n        },\n      });\n      return clientFunction as AssistantClientAccessor<K>;\n    }, [clientRef, name]);\n  },\n);\n\nconst DerivedClientsAccessorsResource = resource(\n  ({\n    clients,\n    clientRef,\n  }: {\n    clients: DerivedClients;\n    clientRef: { parent: AssistantClient; current: AssistantClient | null };\n  }) => {\n    return tapResources(\n      () =>\n        Object.keys(clients).map((key) =>\n          withKey(\n            key,\n            DerivedClientAccessorResource({\n              element: clients[key as keyof typeof clients]!,\n              clientRef,\n              name: key as keyof typeof clients,\n            }),\n          ),\n        ),\n      [clients, clientRef],\n    );\n  },\n);\n\n/**\n * Resource that creates an extended AssistantClient.\n */\nexport const AssistantClientResource = resource(\n  ({\n    parent,\n    clients,\n  }: {\n    parent: AssistantClient;\n    clients: useAui.Props;\n  }): AssistantClient => {\n    const { rootClients, derivedClients } = tapSplitClients(clients, parent);\n\n    const clientRef = tapRef({\n      parent: parent,\n      current: null as AssistantClient | null,\n    }).current;\n\n    tapEffect(() => {\n      // if (clientRef.current && clientRef.current !== client)\n      //   throw new Error(\"clientRef.current !== client\");\n\n      clientRef.current = client;\n    });\n\n    const rootFields = tapResource(\n      Object.keys(rootClients).length > 0\n        ? RootClientsAccessorsResource({ clients: rootClients, clientRef })\n        : NoOpRootClientsAccessorsResource(),\n    );\n\n    const derivedFields = tapInlineResource(\n      DerivedClientsAccessorsResource({ clients: derivedClients, clientRef }),\n    );\n\n    const client = tapMemo(() => {\n      // Swap DefaultAssistantClient -> createRootAssistantClient at root to change error message\n      const proto =\n        parent === DefaultAssistantClient\n          ? createRootAssistantClient()\n          : parent;\n\n      const client = Object.create(proto) as AssistantClient;\n      Object.assign(client, {\n        subscribe: rootFields.subscribe ?? parent.subscribe,\n        on: rootFields.on ?? parent.on,\n        [PROXIED_ASSISTANT_STATE_SYMBOL]: createProxiedAssistantState(client),\n      });\n\n      for (const field of rootFields.clients) {\n        (client as any)[field.name] = field;\n      }\n      for (const field of derivedFields) {\n        (client as any)[field.name] = field;\n      }\n\n      return client;\n    }, [parent, rootFields, derivedFields]);\n\n    if (clientRef.current === null) {\n      clientRef.current = client;\n    }\n\n    return client;\n  },\n);\n\nexport namespace useAui {\n  export type Props = {\n    [K in ClientNames]?: ClientElement<K> | DerivedElement<K>;\n  };\n}\n\nexport function useAui(): AssistantClient;\nexport function useAui(clients: useAui.Props): AssistantClient;\nexport function useAui(\n  clients: useAui.Props,\n  config: { parent: null | AssistantClient },\n): AssistantClient;\n/** @deprecated This API is highly experimental and may be changed in a minor release */\nexport function useAui(\n  clients?: useAui.Props,\n  { parent }: { parent: null | AssistantClient } = {\n    parent: useAssistantContextValue(),\n  },\n): AssistantClient {\n  if (clients) {\n    return useResource(\n      AssistantClientResource({\n        parent: parent ?? DefaultAssistantClient,\n        clients,\n      }),\n    );\n  }\n  if (parent === null)\n    throw new Error(\"received null parent, this usage is not allowed\");\n  return parent;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2031, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/tap-client-lookup.ts"],"sourcesContent":["import {\n  tapInlineResource,\n  tapMemo,\n  tapResources,\n  type ResourceElement,\n} from \"@creatorem/ai-tap\";\nimport type { ClientMethods, ClientOutputOf } from \"./types/client\";\nimport { ClientResource } from \"./tap-client-resource\";\nimport { wrapperResource } from \"./wrapper-resource\";\n\nconst ClientResourceWithKey = wrapperResource(\n  <TState, TMethods extends ClientMethods>(\n    el: ResourceElement<ClientOutputOf<TState, TMethods>>,\n  ) => {\n    if (el.key === undefined) {\n      throw new Error(\"tapClientResource: Element has no key\");\n    }\n    return tapInlineResource(ClientResource(el)) as ClientOutputOf<\n      TState,\n      TMethods\n    > & { key: string | number };\n  },\n);\n\nexport function tapClientLookup<TState, TMethods extends ClientMethods>(\n  getElements: () => readonly ResourceElement<\n    ClientOutputOf<TState, TMethods>\n  >[],\n  getElementsDeps: readonly unknown[],\n): {\n  state: TState[];\n  get: (lookup: { index: number } | { key: string }) => TMethods;\n} {\n  const resources = tapResources(\n    () => getElements().map((el) => ClientResourceWithKey(el)),\n    // biome-ignore lint/correctness/useExhaustiveDependencies: getElementsDeps is passed through from caller\n    getElementsDeps,\n  );\n\n  const keys = tapMemo(() => Object.keys(resources), [resources]);\n\n  // For arrays, track element key -> index mapping\n  const keyToIndex = tapMemo(() => {\n    return resources.reduce(\n      (acc, resource, index) => {\n        acc[resource.key] = index;\n        return acc;\n      },\n      {} as Record<string, number>,\n    );\n  }, [resources]);\n\n  const state = tapMemo(() => {\n    return resources.map((r) => r.state);\n  }, [resources]);\n\n  return {\n    state,\n    get: (lookup: { index: number } | { key: string }) => {\n      if (\"index\" in lookup) {\n        if (lookup.index < 0 || lookup.index >= keys.length) {\n          throw new Error(\n            `tapClientLookup: Index ${lookup.index} out of bounds (length: ${keys.length})`,\n          );\n        }\n        return resources[lookup.index]!.methods;\n      }\n\n      const index = keyToIndex[lookup.key];\n      if (index === undefined) {\n        throw new Error(`tapClientLookup: Key \"${lookup.key}\" not found`);\n      }\n      return resources[index]!.methods;\n    },\n  };\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAOA;AACA;;;;AAEA,MAAM,wBAAwB,IAAA,qKAAe,OAC3C,CACE;IAEA,IAAI,GAAG,GAAG,KAAK,WAAW;QACxB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,IAAA,oLAAiB,EAAC,IAAA,0KAAc,EAAC;AAI1C;;AAGK,SAAS,gBACd,WAEG,EACH,eAAmC;IAKnC,MAAM,YAAY,IAAA,sKAAY,EAC5B,IAAM,cAAc,GAAG,CAAC,CAAC,KAAO,sBAAsB,MACtD,yGAAyG;IACzG;IAGF,MAAM,OAAO,IAAA,4JAAO,EAAC,IAAM,OAAO,IAAI,CAAC,YAAY;QAAC;KAAU;IAE9D,iDAAiD;IACjD,MAAM,aAAa,IAAA,4JAAO,EAAC;QACzB,OAAO,UAAU,MAAM,CACrB,CAAC,KAAK,UAAU;YACd,GAAG,CAAC,SAAS,GAAG,CAAC,GAAG;YACpB,OAAO;QACT,GACA,CAAC;IAEL,GAAG;QAAC;KAAU;IAEd,MAAM,QAAQ,IAAA,4JAAO,EAAC;QACpB,OAAO,UAAU,GAAG,CAAC,CAAC,IAAM,EAAE,KAAK;IACrC,GAAG;QAAC;KAAU;IAEd,OAAO;QACL;QACA,KAAK,CAAC;YACJ,IAAI,WAAW,QAAQ;gBACrB,IAAI,OAAO,KAAK,GAAG,KAAK,OAAO,KAAK,IAAI,KAAK,MAAM,EAAE;oBACnD,MAAM,IAAI,MACR,CAAC,uBAAuB,EAAE,OAAO,KAAK,CAAC,wBAAwB,EAAE,KAAK,MAAM,CAAC,CAAC,CAAC;gBAEnF;gBACA,OAAO,SAAS,CAAC,OAAO,KAAK,CAAC,CAAE,OAAO;YACzC;YAEA,MAAM,QAAQ,UAAU,CAAC,OAAO,GAAG,CAAC;YACpC,IAAI,UAAU,WAAW;gBACvB,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,OAAO,GAAG,CAAC,WAAW,CAAC;YAClE;YACA,OAAO,SAAS,CAAC,MAAM,CAAE,OAAO;QAClC;IACF;AACF"}},
    {"offset": {"line": 2097, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/util-hooks/tap-subscribable.ts"],"sourcesContent":["import { tapState, tapEffect } from \"@creatorem/ai-tap\";\nimport { SubscribableWithState } from \"../runtime/subscribable/subscribable\";\n\nexport const tapSubscribable = <T>(\n  subscribable: Omit<SubscribableWithState<T, any>, \"path\">,\n) => {\n  const [, setState] = tapState(subscribable.getState);\n  tapEffect(() => {\n    setState(subscribable.getState());\n    return subscribable.subscribe(() => {\n      setState(subscribable.getState());\n    });\n  }, [subscribable]);\n\n  return subscribable.getState();\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAGO,MAAM,kBAAkB,CAC7B;IAEA,MAAM,GAAG,SAAS,GAAG,IAAA,8JAAQ,EAAC,aAAa,QAAQ;IACnD,IAAA,gKAAS,EAAC;QACR,SAAS,aAAa,QAAQ;QAC9B,OAAO,aAAa,SAAS,CAAC;YAC5B,SAAS,aAAa,QAAQ;QAChC;IACF,GAAG;QAAC;KAAa;IAEjB,OAAO,aAAa,QAAQ;AAC9B"}},
    {"offset": {"line": 2123, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/client/thread-list-item-runtime-client.ts"],"sourcesContent":["import { resource, tapEffect } from \"@creatorem/ai-tap\";\nimport { type ClientOutput, tapAssistantEmit } from \"@creatorem/ai-store\";\nimport {\n  ThreadListItemEventType,\n  ThreadListItemRuntime,\n} from \"../runtime/thread-list-item-runtime\";\nimport { Unsubscribe } from \"../../types\";\nimport { tapSubscribable } from \"../util-hooks/tap-subscribable\";\n\nexport const ThreadListItemClient = resource(\n  ({\n    runtime,\n  }: {\n    runtime: ThreadListItemRuntime;\n  }): ClientOutput<\"threadListItem\"> => {\n    const state = tapSubscribable(runtime);\n    const emit = tapAssistantEmit();\n\n    // Bind thread list item events to event manager\n    tapEffect(() => {\n      const unsubscribers: Unsubscribe[] = [];\n\n      // Subscribe to thread list item events\n      const threadListItemEvents: ThreadListItemEventType[] = [\n        \"switchedTo\",\n        \"switchedAway\",\n      ];\n\n      for (const event of threadListItemEvents) {\n        const unsubscribe = runtime.unstable_on(event, () => {\n          emit(`threadListItem.${event}`, {\n            threadId: runtime.getState()!.id,\n          });\n        });\n        unsubscribers.push(unsubscribe);\n      }\n\n      return () => {\n        for (const unsub of unsubscribers) unsub();\n      };\n    }, [runtime, emit]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        switchTo: runtime.switchTo,\n        rename: runtime.rename,\n        archive: runtime.archive,\n        unarchive: runtime.unarchive,\n        delete: runtime.delete,\n        generateTitle: runtime.generateTitle,\n        initialize: runtime.initialize,\n        detach: runtime.detach,\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAMA;;;;AAEO,MAAM,uBAAuB,IAAA,yJAAQ,OAC1C,CAAC,EACC,OAAO,EAGR;IACC,MAAM,QAAQ,IAAA,2MAAe,EAAC;IAC9B,MAAM,OAAO,IAAA,uLAAgB;IAE7B,gDAAgD;IAChD,IAAA,gKAAS,EAAC;QACR,MAAM,gBAA+B,EAAE;QAEvC,uCAAuC;QACvC,MAAM,uBAAkD;YACtD;YACA;SACD;QAED,KAAK,MAAM,SAAS,qBAAsB;YACxC,MAAM,cAAc,QAAQ,WAAW,CAAC,OAAO;gBAC7C,KAAK,CAAC,eAAe,EAAE,OAAO,EAAE;oBAC9B,UAAU,QAAQ,QAAQ,GAAI,EAAE;gBAClC;YACF;YACA,cAAc,IAAI,CAAC;QACrB;QAEA,OAAO;YACL,KAAK,MAAM,SAAS,cAAe;QACrC;IACF,GAAG;QAAC;QAAS;KAAK;IAElB,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB,UAAU,QAAQ,QAAQ;YAC1B,QAAQ,QAAQ,MAAM;YACtB,SAAS,QAAQ,OAAO;YACxB,WAAW,QAAQ,SAAS;YAC5B,QAAQ,QAAQ,MAAM;YACtB,eAAe,QAAQ,aAAa;YACpC,YAAY,QAAQ,UAAU;YAC9B,QAAQ,QAAQ,MAAM;YACtB,uBAAuB,IAAM;QAC/B;IACF;AACF"}},
    {"offset": {"line": 2187, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/client/attachment-runtime-client.ts"],"sourcesContent":["import { resource } from \"@creatorem/ai-tap\";\nimport { type ClientOutput } from \"@creatorem/ai-store\";\nimport { AttachmentRuntime } from \"../runtime\";\nimport { tapSubscribable } from \"../util-hooks/tap-subscribable\";\n\nexport const AttachmentRuntimeClient = resource(\n  ({ runtime }: { runtime: AttachmentRuntime }): ClientOutput<\"attachment\"> => {\n    const state = tapSubscribable(runtime);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        remove: runtime.remove,\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEO,MAAM,0BAA0B,IAAA,yJAAQ,OAC7C,CAAC,EAAE,OAAO,EAAkC;IAC1C,MAAM,QAAQ,IAAA,2MAAe,EAAC;IAE9B,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB,QAAQ,QAAQ,MAAM;YACtB,uBAAuB,IAAM;QAC/B;IACF;AACF"}},
    {"offset": {"line": 2217, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/client/composer-runtime-client.ts"],"sourcesContent":["import {\n  resource,\n  tapMemo,\n  tapEffect,\n  tapInlineResource,\n  type tapRef,\n  withKey,\n} from \"@creatorem/ai-tap\";\nimport {\n  type ClientOutput,\n  tapAssistantEmit,\n  tapClientLookup,\n} from \"@creatorem/ai-store\";\nimport {\n  ComposerRuntime,\n  EditComposerRuntime,\n} from \"../runtime/composer-runtime\";\nimport { Unsubscribe } from \"../../types\";\nimport { ComposerRuntimeEventType } from \"../runtime-cores/core/composer-runtime-core\";\nimport { ComposerState } from \"../../types/scopes\";\nimport { AttachmentRuntimeClient } from \"./attachment-runtime-client\";\nimport { tapSubscribable } from \"../util-hooks/tap-subscribable\";\n\nconst ComposerAttachmentClientByIndex = resource(\n  ({ runtime, index }: { runtime: ComposerRuntime; index: number }) => {\n    const attachmentRuntime = tapMemo(\n      () => runtime.getAttachmentByIndex(index),\n      [runtime, index],\n    );\n\n    return tapInlineResource(\n      AttachmentRuntimeClient({\n        runtime: attachmentRuntime,\n      }),\n    );\n  },\n);\n\nexport const ComposerClient = resource(\n  ({\n    threadIdRef,\n    messageIdRef,\n    runtime,\n  }: {\n    threadIdRef: tapRef.RefObject<string>;\n    messageIdRef?: tapRef.RefObject<string>;\n    runtime: ComposerRuntime;\n  }): ClientOutput<\"composer\"> => {\n    const runtimeState = tapSubscribable(runtime);\n    const emit = tapAssistantEmit();\n\n    // Bind composer events to event manager\n    tapEffect(() => {\n      const unsubscribers: Unsubscribe[] = [];\n\n      // Subscribe to composer events\n      const composerEvents: ComposerRuntimeEventType[] = [\n        \"send\",\n        \"attachmentAdd\",\n      ];\n\n      for (const event of composerEvents) {\n        const unsubscribe = runtime.unstable_on(event, () => {\n          emit(`composer.${event}`, {\n            threadId: threadIdRef.current,\n            ...(messageIdRef && { messageId: messageIdRef.current }),\n          });\n        });\n        unsubscribers.push(unsubscribe);\n      }\n\n      return () => {\n        for (const unsub of unsubscribers) unsub();\n      };\n    }, [runtime, emit, threadIdRef, messageIdRef]);\n\n    const attachments = tapClientLookup(\n      () =>\n        runtimeState.attachments.map((attachment, idx) =>\n          withKey(\n            attachment.id,\n            ComposerAttachmentClientByIndex({\n              runtime,\n              index: idx,\n            }),\n          ),\n        ),\n      [runtimeState.attachments, runtime],\n    );\n\n    const state = tapMemo<ComposerState>(() => {\n      return {\n        text: runtimeState.text,\n        role: runtimeState.role,\n        attachments: attachments.state,\n        runConfig: runtimeState.runConfig,\n        isEditing: runtimeState.isEditing,\n        canCancel: runtimeState.canCancel,\n        attachmentAccept: runtimeState.attachmentAccept,\n        isEmpty: runtimeState.isEmpty,\n        type: runtimeState.type ?? \"thread\",\n        dictation: runtimeState.dictation,\n      };\n    }, [runtimeState, attachments.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        setText: runtime.setText,\n        setRole: runtime.setRole,\n        setRunConfig: runtime.setRunConfig,\n        addAttachment: runtime.addAttachment,\n        reset: runtime.reset,\n        clearAttachments: runtime.clearAttachments,\n        send: runtime.send,\n        cancel: runtime.cancel,\n        beginEdit:\n          (runtime as EditComposerRuntime).beginEdit ??\n          (() => {\n            throw new Error(\"beginEdit is not supported in this runtime\");\n          }),\n        startDictation: runtime.startDictation,\n        stopDictation: runtime.stopDictation,\n        attachment: (selector) => {\n          if (\"id\" in selector) {\n            return attachments.get({ key: selector.id });\n          } else {\n            return attachments.get(selector);\n          }\n        },\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAYA;AACA;;;;;AAEA,MAAM,kCAAkC,IAAA,yJAAQ,OAC9C,CAAC,EAAE,OAAO,EAAE,KAAK,EAA+C;IAC9D,MAAM,oBAAoB,IAAA,4JAAO,EAC/B,IAAM,QAAQ,oBAAoB,CAAC,QACnC;QAAC;QAAS;KAAM;IAGlB,OAAO,IAAA,oLAAiB,EACtB,IAAA,wNAAuB,EAAC;QACtB,SAAS;IACX;AAEJ;;AAGK,MAAM,iBAAiB,IAAA,yJAAQ,QACpC,CAAC,EACC,WAAW,EACX,YAAY,EACZ,OAAO,EAKR;IACC,MAAM,eAAe,IAAA,2MAAe,EAAC;IACrC,MAAM,OAAO,IAAA,uLAAgB;IAE7B,wCAAwC;IACxC,IAAA,gKAAS,EAAC;QACR,MAAM,gBAA+B,EAAE;QAEvC,+BAA+B;QAC/B,MAAM,iBAA6C;YACjD;YACA;SACD;QAED,KAAK,MAAM,SAAS,eAAgB;YAClC,MAAM,cAAc,QAAQ,WAAW,CAAC,OAAO;gBAC7C,KAAK,CAAC,SAAS,EAAE,OAAO,EAAE;oBACxB,UAAU,YAAY,OAAO;oBAC7B,GAAI,gBAAgB;wBAAE,WAAW,aAAa,OAAO;oBAAC,CAAC;gBACzD;YACF;YACA,cAAc,IAAI,CAAC;QACrB;QAEA,OAAO;YACL,KAAK,MAAM,SAAS,cAAe;QACrC;IACF,GAAG;QAAC;QAAS;QAAM;QAAa;KAAa;IAE7C,MAAM,cAAc,IAAA,yKAAe,EACjC,IACE,aAAa,WAAW,CAAC,GAAG,CAAC,CAAC,YAAY,MACxC,IAAA,2JAAO,EACL,WAAW,EAAE,EACb,gCAAgC;gBAC9B;gBACA,OAAO;YACT,MAGN;QAAC,aAAa,WAAW;QAAE;KAAQ;IAGrC,MAAM,QAAQ,IAAA,4JAAO,EAAgB;QACnC,OAAO;YACL,MAAM,aAAa,IAAI;YACvB,MAAM,aAAa,IAAI;YACvB,aAAa,YAAY,KAAK;YAC9B,WAAW,aAAa,SAAS;YACjC,WAAW,aAAa,SAAS;YACjC,WAAW,aAAa,SAAS;YACjC,kBAAkB,aAAa,gBAAgB;YAC/C,SAAS,aAAa,OAAO;YAC7B,MAAM,aAAa,IAAI,IAAI;YAC3B,WAAW,aAAa,SAAS;QACnC;IACF,GAAG;QAAC;QAAc,YAAY,KAAK;KAAC;IAEpC,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB,SAAS,QAAQ,OAAO;YACxB,SAAS,QAAQ,OAAO;YACxB,cAAc,QAAQ,YAAY;YAClC,eAAe,QAAQ,aAAa;YACpC,OAAO,QAAQ,KAAK;YACpB,kBAAkB,QAAQ,gBAAgB;YAC1C,MAAM,QAAQ,IAAI;YAClB,QAAQ,QAAQ,MAAM;YACtB,WACE,AAAC,QAAgC,SAAS,IAC1C,CAAC;gBACC,MAAM,IAAI,MAAM;YAClB,CAAC;YACH,gBAAgB,QAAQ,cAAc;YACtC,eAAe,QAAQ,aAAa;YACpC,YAAY,CAAC;gBACX,IAAI,QAAQ,UAAU;oBACpB,OAAO,YAAY,GAAG,CAAC;wBAAE,KAAK,SAAS,EAAE;oBAAC;gBAC5C,OAAO;oBACL,OAAO,YAAY,GAAG,CAAC;gBACzB;YACF;YACA,uBAAuB,IAAM;QAC/B;IACF;AACF"}},
    {"offset": {"line": 2342, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/client/message-part-runtime-client.ts"],"sourcesContent":["import { resource } from \"@creatorem/ai-tap\";\nimport { type ClientOutput } from \"@creatorem/ai-store\";\nimport { MessagePartRuntime } from \"../runtime/message-part-runtime\";\nimport { tapSubscribable } from \"../util-hooks/tap-subscribable\";\n\nexport const MessagePartClient = resource(\n  ({ runtime }: { runtime: MessagePartRuntime }): ClientOutput<\"part\"> => {\n    const state = tapSubscribable(runtime);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        addToolResult: (result) => runtime.addToolResult(result),\n        resumeToolCall: (payload) => runtime.resumeToolCall(payload),\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":";;;;AAAA;AAGA;;;AAEO,MAAM,oBAAoB,IAAA,yJAAQ,OACvC,CAAC,EAAE,OAAO,EAAmC;IAC3C,MAAM,QAAQ,IAAA,2MAAe,EAAC;IAE9B,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB,eAAe,CAAC,SAAW,QAAQ,aAAa,CAAC;YACjD,gBAAgB,CAAC,UAAY,QAAQ,cAAc,CAAC;YACpD,uBAAuB,IAAM;QAC/B;IACF;AACF"}},
    {"offset": {"line": 2373, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/client/message-runtime-client.ts"],"sourcesContent":["import {\n  withKey,\n  resource,\n  tapInlineResource,\n  tapMemo,\n  tapState,\n} from \"@creatorem/ai-tap\";\nimport {\n  type ClientOutput,\n  tapClientLookup,\n  tapClientResource,\n} from \"@creatorem/ai-store\";\nimport { MessageRuntime } from \"../runtime/message-runtime\";\nimport { tapSubscribable } from \"../util-hooks/tap-subscribable\";\nimport { ComposerClient } from \"./composer-runtime-client\";\nimport { MessagePartClient } from \"./message-part-runtime-client\";\nimport { RefObject } from \"react\";\nimport { MessageState } from \"../../types/scopes\";\nimport { AttachmentRuntimeClient } from \"./attachment-runtime-client\";\n\nconst MessageAttachmentClientByIndex = resource(\n  ({ runtime, index }: { runtime: MessageRuntime; index: number }) => {\n    const attachmentRuntime = tapMemo(\n      () => runtime.getAttachmentByIndex(index),\n      [runtime, index],\n    );\n    return tapInlineResource(\n      AttachmentRuntimeClient({ runtime: attachmentRuntime }),\n    );\n  },\n);\n\nconst MessagePartByIndex = resource(\n  ({ runtime, index }: { runtime: MessageRuntime; index: number }) => {\n    const partRuntime = tapMemo(\n      () => runtime.getMessagePartByIndex(index),\n      [runtime, index],\n    );\n    return tapInlineResource(MessagePartClient({ runtime: partRuntime }));\n  },\n);\n\nexport const MessageClient = resource(\n  ({\n    runtime,\n    threadIdRef,\n  }: {\n    runtime: MessageRuntime;\n    threadIdRef: RefObject<string>;\n  }): ClientOutput<\"message\"> => {\n    const runtimeState = tapSubscribable(runtime);\n\n    const [isCopiedState, setIsCopied] = tapState(false);\n    const [isHoveringState, setIsHovering] = tapState(false);\n\n    const messageIdRef = tapMemo(\n      () => ({\n        get current() {\n          return runtime.getState().id;\n        },\n      }),\n      [runtime],\n    );\n\n    const composer = tapClientResource(\n      ComposerClient({\n        runtime: runtime.composer,\n        threadIdRef,\n        messageIdRef,\n      }),\n    );\n\n    const parts = tapClientLookup(\n      () =>\n        runtimeState.content.map((part, idx) =>\n          withKey(\n            \"toolCallId\" in part && part.toolCallId != null\n              ? `toolCallId-${part.toolCallId}`\n              : `index-${idx}`,\n            MessagePartByIndex({ runtime, index: idx }),\n          ),\n        ),\n      [runtimeState.content, runtime],\n    );\n\n    const attachments = tapClientLookup(\n      () =>\n        (runtimeState.attachments ?? []).map((attachment, idx) =>\n          withKey(\n            attachment.id,\n            MessageAttachmentClientByIndex({ runtime, index: idx }),\n          ),\n        ),\n      [runtimeState.attachments, runtime],\n    );\n\n    const state = tapMemo<MessageState>(() => {\n      return {\n        ...(runtimeState as MessageState),\n\n        parts: parts.state,\n        composer: composer.state,\n\n        isCopied: isCopiedState,\n        isHovering: isHoveringState,\n      };\n    }, [\n      runtimeState,\n      parts.state,\n      composer.state,\n      isCopiedState,\n      isHoveringState,\n    ]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n\n        composer: composer.methods,\n\n        reload: (config) => runtime.reload(config),\n        speak: () => runtime.speak(),\n        stopSpeaking: () => runtime.stopSpeaking(),\n        submitFeedback: (feedback) => runtime.submitFeedback(feedback),\n        switchToBranch: (options) => runtime.switchToBranch(options),\n        getCopyText: () => runtime.unstable_getCopyText(),\n        part: (selector) => {\n          if (\"index\" in selector) {\n            return parts.get({ index: selector.index });\n          } else {\n            return parts.get({ key: `toolCallId-${selector.toolCallId}` });\n          }\n        },\n\n        attachment: (selector) => {\n          if (\"id\" in selector) {\n            return attachments.get({ key: selector.id });\n          } else {\n            return attachments.get(selector);\n          }\n        },\n\n        setIsCopied,\n        setIsHovering,\n\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2511, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/client/thread-runtime-client.ts"],"sourcesContent":["import { ThreadRuntimeEventType } from \"../runtime-cores/core/thread-runtime-core\";\nimport { ThreadRuntime } from \"../runtime/thread-runtime\";\nimport {\n  resource,\n  tapInlineResource,\n  tapMemo,\n  tapEffect,\n  type tapRef,\n  withKey,\n} from \"@creatorem/ai-tap\";\nimport {\n  type ClientOutput,\n  tapAssistantEmit,\n  tapClientLookup,\n  tapClientResource,\n} from \"@creatorem/ai-store\";\nimport { ComposerClient } from \"./composer-runtime-client\";\nimport { MessageClient } from \"./message-runtime-client\";\nimport { tapSubscribable } from \"../util-hooks/tap-subscribable\";\nimport { Unsubscribe } from \"../../types\";\nimport { ThreadState } from \"../../types/scopes\";\n\nconst MessageClientById = resource(\n  ({\n    runtime,\n    id,\n    threadIdRef,\n  }: {\n    runtime: ThreadRuntime;\n    id: string;\n    threadIdRef: tapRef.RefObject<string>;\n  }) => {\n    const messageRuntime = tapMemo(\n      () => runtime.getMessageById(id),\n      [runtime, id],\n    );\n\n    return tapInlineResource(\n      MessageClient({ runtime: messageRuntime, threadIdRef }),\n    );\n  },\n);\n\nexport const ThreadClient = resource(\n  ({ runtime }: { runtime: ThreadRuntime }): ClientOutput<\"thread\"> => {\n    const runtimeState = tapSubscribable(runtime);\n    const emit = tapAssistantEmit();\n\n    // Bind thread events to event manager\n    tapEffect(() => {\n      const unsubscribers: Unsubscribe[] = [];\n\n      // Subscribe to thread events\n      const threadEvents: ThreadRuntimeEventType[] = [\n        \"runStart\",\n        \"runEnd\",\n        \"initialize\",\n        \"modelContextUpdate\",\n      ];\n\n      for (const event of threadEvents) {\n        const unsubscribe = runtime.unstable_on(event, () => {\n          const threadId = runtime.getState()?.threadId || \"unknown\";\n          emit(`thread.${event}`, {\n            threadId,\n          });\n        });\n        unsubscribers.push(unsubscribe);\n      }\n\n      return () => {\n        for (const unsub of unsubscribers) unsub();\n      };\n    }, [runtime, emit]);\n\n    const threadIdRef = tapMemo(\n      () => ({\n        get current() {\n          return runtime.getState()!.threadId;\n        },\n      }),\n      [runtime],\n    );\n\n    const composer = tapClientResource(\n      ComposerClient({\n        runtime: runtime.composer,\n        threadIdRef,\n      }),\n    );\n\n    const messages = tapClientLookup(\n      () =>\n        runtimeState.messages.map((m) =>\n          withKey(m.id, MessageClientById({ runtime, id: m.id, threadIdRef })),\n        ),\n      [runtimeState.messages, runtime, threadIdRef],\n    );\n\n    const state = tapMemo<ThreadState>(() => {\n      return {\n        isEmpty: messages.state.length === 0 && !runtimeState.isLoading,\n        isDisabled: runtimeState.isDisabled,\n        isLoading: runtimeState.isLoading,\n        isRunning: runtimeState.isRunning,\n        capabilities: runtimeState.capabilities,\n        state: runtimeState.state,\n        suggestions: runtimeState.suggestions,\n        extras: runtimeState.extras,\n        speech: runtimeState.speech,\n\n        composer: composer.state,\n        messages: messages.state,\n      };\n    }, [runtimeState, messages, composer.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        composer: composer.methods,\n        append: runtime.append,\n        startRun: runtime.startRun,\n        unstable_resumeRun: runtime.unstable_resumeRun,\n        cancelRun: runtime.cancelRun,\n        getModelContext: runtime.getModelContext,\n        export: runtime.export,\n        import: runtime.import,\n        reset: runtime.reset,\n        stopSpeaking: runtime.stopSpeaking,\n        startVoice: async () => {\n          throw new Error(\"startVoice is not supported in this runtime\");\n        },\n        stopVoice: async () => {\n          throw new Error(\"stopVoice is not supported in this runtime\");\n        },\n        message: (selector) => {\n          if (\"id\" in selector) {\n            return messages.get({ key: selector.id });\n          } else {\n            return messages.get(selector);\n          }\n        },\n        __internal_getRuntime: () => runtime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":";;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAMA;AACA;AACA;;;;;;AAIA,MAAM,oBAAoB,IAAA,yJAAQ,OAChC,CAAC,EACC,OAAO,EACP,EAAE,EACF,WAAW,EAKZ;IACC,MAAM,iBAAiB,IAAA,4JAAO,EAC5B,IAAM,QAAQ,cAAc,CAAC,KAC7B;QAAC;QAAS;KAAG;IAGf,OAAO,IAAA,oLAAiB,EACtB,IAAA,2MAAa,EAAC;QAAE,SAAS;QAAgB;IAAY;AAEzD;;AAGK,MAAM,eAAe,IAAA,yJAAQ,QAClC,CAAC,EAAE,OAAO,EAA8B;IACtC,MAAM,eAAe,IAAA,2MAAe,EAAC;IACrC,MAAM,OAAO,IAAA,uLAAgB;IAE7B,sCAAsC;IACtC,IAAA,gKAAS,EAAC;QACR,MAAM,gBAA+B,EAAE;QAEvC,6BAA6B;QAC7B,MAAM,eAAyC;YAC7C;YACA;YACA;YACA;SACD;QAED,KAAK,MAAM,SAAS,aAAc;YAChC,MAAM,cAAc,QAAQ,WAAW,CAAC,OAAO;gBAC7C,MAAM,WAAW,QAAQ,QAAQ,IAAI,YAAY;gBACjD,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE;oBACtB;gBACF;YACF;YACA,cAAc,IAAI,CAAC;QACrB;QAEA,OAAO;YACL,KAAK,MAAM,SAAS,cAAe;QACrC;IACF,GAAG;QAAC;QAAS;KAAK;IAElB,MAAM,cAAc,IAAA,4JAAO,EACzB,IAAM,CAAC;YACL,IAAI,WAAU;gBACZ,OAAO,QAAQ,QAAQ,GAAI,QAAQ;YACrC;QACF,CAAC,GACD;QAAC;KAAQ;IAGX,MAAM,WAAW,IAAA,6KAAiB,EAChC,IAAA,6MAAc,EAAC;QACb,SAAS,QAAQ,QAAQ;QACzB;IACF;IAGF,MAAM,WAAW,IAAA,yKAAe,EAC9B,IACE,aAAa,QAAQ,CAAC,GAAG,CAAC,CAAC,IACzB,IAAA,2JAAO,EAAC,EAAE,EAAE,EAAE,kBAAkB;gBAAE;gBAAS,IAAI,EAAE,EAAE;gBAAE;YAAY,MAErE;QAAC,aAAa,QAAQ;QAAE;QAAS;KAAY;IAG/C,MAAM,QAAQ,IAAA,4JAAO,EAAc;QACjC,OAAO;YACL,SAAS,SAAS,KAAK,CAAC,MAAM,KAAK,KAAK,CAAC,aAAa,SAAS;YAC/D,YAAY,aAAa,UAAU;YACnC,WAAW,aAAa,SAAS;YACjC,WAAW,aAAa,SAAS;YACjC,cAAc,aAAa,YAAY;YACvC,OAAO,aAAa,KAAK;YACzB,aAAa,aAAa,WAAW;YACrC,QAAQ,aAAa,MAAM;YAC3B,QAAQ,aAAa,MAAM;YAE3B,UAAU,SAAS,KAAK;YACxB,UAAU,SAAS,KAAK;QAC1B;IACF,GAAG;QAAC;QAAc;QAAU,SAAS,KAAK;KAAC;IAE3C,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB,UAAU,SAAS,OAAO;YAC1B,QAAQ,QAAQ,MAAM;YACtB,UAAU,QAAQ,QAAQ;YAC1B,oBAAoB,QAAQ,kBAAkB;YAC9C,WAAW,QAAQ,SAAS;YAC5B,iBAAiB,QAAQ,eAAe;YACxC,QAAQ,QAAQ,MAAM;YACtB,QAAQ,QAAQ,MAAM;YACtB,OAAO,QAAQ,KAAK;YACpB,cAAc,QAAQ,YAAY;YAClC,YAAY;gBACV,MAAM,IAAI,MAAM;YAClB;YACA,WAAW;gBACT,MAAM,IAAI,MAAM;YAClB;YACA,SAAS,CAAC;gBACR,IAAI,QAAQ,UAAU;oBACpB,OAAO,SAAS,GAAG,CAAC;wBAAE,KAAK,SAAS,EAAE;oBAAC;gBACzC,OAAO;oBACL,OAAO,SAAS,GAAG,CAAC;gBACtB;YACF;YACA,uBAAuB,IAAM;QAC/B;IACF;AACF"}},
    {"offset": {"line": 2656, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/client/thread-list-runtime-client.ts"],"sourcesContent":["import {\n  withKey,\n  resource,\n  tapInlineResource,\n  tapMemo,\n} from \"@creatorem/ai-tap\";\nimport {\n  type ClientOutput,\n  tapClientLookup,\n  tapClientResource,\n} from \"@creatorem/ai-store\";\nimport { ThreadListRuntime } from \"../runtime/thread-list-runtime\";\nimport { tapSubscribable } from \"../util-hooks/tap-subscribable\";\nimport { ThreadListItemClient } from \"./thread-list-item-runtime-client\";\nimport { ThreadClient } from \"./thread-runtime-client\";\nimport { ThreadsState } from \"../../types/scopes\";\nimport type { AssistantRuntime } from \"../runtime/assistant-runtime\";\n\nconst ThreadListItemClientById = resource(\n  ({ runtime, id }: { runtime: ThreadListRuntime; id: string }) => {\n    const threadListItemRuntime = tapMemo(\n      () => runtime.getItemById(id),\n      [runtime, id],\n    );\n    return tapInlineResource(\n      ThreadListItemClient({\n        runtime: threadListItemRuntime,\n      }),\n    );\n  },\n);\n\nexport const ThreadListClient = resource(\n  ({\n    runtime,\n    __internal_assistantRuntime,\n  }: {\n    runtime: ThreadListRuntime;\n    __internal_assistantRuntime: AssistantRuntime;\n  }): ClientOutput<\"threads\"> => {\n    const runtimeState = tapSubscribable(runtime);\n\n    const main = tapClientResource(\n      ThreadClient({\n        runtime: runtime.main,\n      }),\n    );\n\n    const threadItems = tapClientLookup(\n      () =>\n        Object.keys(runtimeState.threadItems).map((id) =>\n          withKey(id, ThreadListItemClientById({ runtime, id })),\n        ),\n      [runtimeState.threadItems, runtime],\n    );\n\n    const state = tapMemo<ThreadsState>(() => {\n      return {\n        mainThreadId: runtimeState.mainThreadId,\n        newThreadId: runtimeState.newThreadId ?? null,\n        isLoading: runtimeState.isLoading,\n        threadIds: runtimeState.threadIds,\n        archivedThreadIds: runtimeState.archivedThreadIds,\n        threadItems: threadItems.state,\n\n        main: main.state,\n      };\n    }, [runtimeState, threadItems.state, main.state]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        thread: () => main.methods,\n        item: (threadIdOrOptions) => {\n          if (threadIdOrOptions === \"main\") {\n            return threadItems.get({ key: state.mainThreadId });\n          }\n\n          if (\"id\" in threadIdOrOptions) {\n            return threadItems.get({ key: threadIdOrOptions.id });\n          }\n\n          const { index, archived = false } = threadIdOrOptions;\n          const id = archived\n            ? state.archivedThreadIds[index]!\n            : state.threadIds[index]!;\n          return threadItems.get({ key: id });\n        },\n        switchToThread: async (threadId) => {\n          await runtime.switchToThread(threadId);\n        },\n        switchToNewThread: async () => {\n          await runtime.switchToNewThread();\n        },\n        __internal_getAssistantRuntime: () => __internal_assistantRuntime,\n      },\n    };\n  },\n);\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAMA;AACA;AACA;;;;;;AAIA,MAAM,2BAA2B,IAAA,yJAAQ,OACvC,CAAC,EAAE,OAAO,EAAE,EAAE,EAA8C;IAC1D,MAAM,wBAAwB,IAAA,4JAAO,EACnC,IAAM,QAAQ,WAAW,CAAC,KAC1B;QAAC;QAAS;KAAG;IAEf,OAAO,IAAA,oLAAiB,EACtB,IAAA,iOAAoB,EAAC;QACnB,SAAS;IACX;AAEJ;;AAGK,MAAM,mBAAmB,IAAA,yJAAQ,QACtC,CAAC,EACC,OAAO,EACP,2BAA2B,EAI5B;IACC,MAAM,eAAe,IAAA,2MAAe,EAAC;IAErC,MAAM,OAAO,IAAA,6KAAiB,EAC5B,IAAA,yMAAY,EAAC;QACX,SAAS,QAAQ,IAAI;IACvB;IAGF,MAAM,cAAc,IAAA,yKAAe,EACjC,IACE,OAAO,IAAI,CAAC,aAAa,WAAW,EAAE,GAAG,CAAC,CAAC,KACzC,IAAA,2JAAO,EAAC,IAAI,yBAAyB;gBAAE;gBAAS;YAAG,MAEvD;QAAC,aAAa,WAAW;QAAE;KAAQ;IAGrC,MAAM,QAAQ,IAAA,4JAAO,EAAe;QAClC,OAAO;YACL,cAAc,aAAa,YAAY;YACvC,aAAa,aAAa,WAAW,IAAI;YACzC,WAAW,aAAa,SAAS;YACjC,WAAW,aAAa,SAAS;YACjC,mBAAmB,aAAa,iBAAiB;YACjD,aAAa,YAAY,KAAK;YAE9B,MAAM,KAAK,KAAK;QAClB;IACF,GAAG;QAAC;QAAc,YAAY,KAAK;QAAE,KAAK,KAAK;KAAC;IAEhD,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB,QAAQ,IAAM,KAAK,OAAO;YAC1B,MAAM,CAAC;gBACL,IAAI,sBAAsB,QAAQ;oBAChC,OAAO,YAAY,GAAG,CAAC;wBAAE,KAAK,MAAM,YAAY;oBAAC;gBACnD;gBAEA,IAAI,QAAQ,mBAAmB;oBAC7B,OAAO,YAAY,GAAG,CAAC;wBAAE,KAAK,kBAAkB,EAAE;oBAAC;gBACrD;gBAEA,MAAM,EAAE,KAAK,EAAE,WAAW,KAAK,EAAE,GAAG;gBACpC,MAAM,KAAK,WACP,MAAM,iBAAiB,CAAC,MAAM,GAC9B,MAAM,SAAS,CAAC,MAAM;gBAC1B,OAAO,YAAY,GAAG,CAAC;oBAAE,KAAK;gBAAG;YACnC;YACA,gBAAgB,OAAO;gBACrB,MAAM,QAAQ,cAAc,CAAC;YAC/B;YACA,mBAAmB;gBACjB,MAAM,QAAQ,iBAAiB;YACjC;YACA,gCAAgC,IAAM;QACxC;IACF;AACF"}},
    {"offset": {"line": 2756, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/model-context/model-context-types.ts"],"sourcesContent":["import { Unsubscribe } from \"../types/unsubscribe\";\nimport { Tool } from \"assistant-stream\";\n\nexport type LanguageModelV1CallSettings = {\n  maxTokens?: number;\n  temperature?: number;\n  topP?: number;\n  presencePenalty?: number;\n  frequencyPenalty?: number;\n  seed?: number;\n  headers?: Record<string, string | undefined>;\n};\n\nexport type LanguageModelConfig = {\n  apiKey?: string;\n  baseUrl?: string;\n  modelName?: string;\n};\n\nexport type ModelContext = {\n  priority?: number | undefined;\n  system?: string | undefined;\n  tools?: Record<string, Tool<any, any>> | undefined;\n  callSettings?: LanguageModelV1CallSettings | undefined;\n  config?: LanguageModelConfig | undefined;\n};\n\nexport type ModelContextProvider = {\n  getModelContext: () => ModelContext;\n  subscribe?: (callback: () => void) => Unsubscribe;\n};\n\nexport const mergeModelContexts = (\n  configSet: Set<ModelContextProvider>,\n): ModelContext => {\n  const configs = Array.from(configSet)\n    .map((c) => c.getModelContext())\n    .sort((a, b) => (b.priority ?? 0) - (a.priority ?? 0));\n\n  return configs.reduce((acc, config) => {\n    if (config.system) {\n      if (acc.system) {\n        // TODO should the separator be configurable?\n        acc.system += `\\n\\n${config.system}`;\n      } else {\n        acc.system = config.system;\n      }\n    }\n    if (config.tools) {\n      for (const [name, tool] of Object.entries(config.tools)) {\n        const existing = acc.tools?.[name];\n        if (existing && existing !== tool) {\n          throw new Error(\n            `You tried to define a tool with the name ${name}, but it already exists.`,\n          );\n        }\n\n        if (!acc.tools) acc.tools = {};\n        acc.tools[name] = tool;\n      }\n    }\n    if (config.config) {\n      acc.config = {\n        ...acc.config,\n        ...config.config,\n      };\n    }\n    if (config.callSettings) {\n      acc.callSettings = {\n        ...acc.callSettings,\n        ...config.callSettings,\n      };\n    }\n    return acc;\n  }, {} as ModelContext);\n};\n"],"names":[],"mappings":";;;;AAgCO,MAAM,qBAAqB,CAChC;IAEA,MAAM,UAAU,MAAM,IAAI,CAAC,WACxB,GAAG,CAAC,CAAC,IAAM,EAAE,eAAe,IAC5B,IAAI,CAAC,CAAC,GAAG,IAAM,CAAC,EAAE,QAAQ,IAAI,CAAC,IAAI,CAAC,EAAE,QAAQ,IAAI,CAAC;IAEtD,OAAO,QAAQ,MAAM,CAAC,CAAC,KAAK;QAC1B,IAAI,OAAO,MAAM,EAAE;YACjB,IAAI,IAAI,MAAM,EAAE;gBACd,6CAA6C;gBAC7C,IAAI,MAAM,IAAI,CAAC,IAAI,EAAE,OAAO,MAAM,EAAE;YACtC,OAAO;gBACL,IAAI,MAAM,GAAG,OAAO,MAAM;YAC5B;QACF;QACA,IAAI,OAAO,KAAK,EAAE;YAChB,KAAK,MAAM,CAAC,MAAM,KAAK,IAAI,OAAO,OAAO,CAAC,OAAO,KAAK,EAAG;gBACvD,MAAM,WAAW,IAAI,KAAK,EAAE,CAAC,KAAK;gBAClC,IAAI,YAAY,aAAa,MAAM;oBACjC,MAAM,IAAI,MACR,CAAC,yCAAyC,EAAE,KAAK,wBAAwB,CAAC;gBAE9E;gBAEA,IAAI,CAAC,IAAI,KAAK,EAAE,IAAI,KAAK,GAAG,CAAC;gBAC7B,IAAI,KAAK,CAAC,KAAK,GAAG;YACpB;QACF;QACA,IAAI,OAAO,MAAM,EAAE;YACjB,IAAI,MAAM,GAAG;gBACX,GAAG,IAAI,MAAM;gBACb,GAAG,OAAO,MAAM;YAClB;QACF;QACA,IAAI,OAAO,YAAY,EAAE;YACvB,IAAI,YAAY,GAAG;gBACjB,GAAG,IAAI,YAAY;gBACnB,GAAG,OAAO,YAAY;YACxB;QACF;QACA,OAAO;IACT,GAAG,CAAC;AACN"}},
    {"offset": {"line": 2803, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/utils/composite-context-provider.ts"],"sourcesContent":["import {\n  type ModelContextProvider,\n  mergeModelContexts,\n} from \"../model-context/model-context-types\";\n\nexport class CompositeContextProvider implements ModelContextProvider {\n  private _providers = new Set<ModelContextProvider>();\n\n  getModelContext() {\n    return mergeModelContexts(this._providers);\n  }\n\n  registerModelContextProvider(provider: ModelContextProvider) {\n    this._providers.add(provider);\n    const unsubscribe = provider.subscribe?.(() => {\n      this.notifySubscribers();\n    });\n    this.notifySubscribers();\n    return () => {\n      this._providers.delete(provider);\n      unsubscribe?.();\n      this.notifySubscribers();\n    };\n  }\n\n  private _subscribers = new Set<() => void>();\n\n  notifySubscribers() {\n    for (const callback of this._subscribers) callback();\n  }\n\n  subscribe(callback: () => void) {\n    this._subscribers.add(callback);\n    return () => this._subscribers.delete(callback);\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAKO,MAAM;IACH,aAAa,IAAI,MAA4B;IAErD,kBAAkB;QAChB,OAAO,IAAA,kMAAkB,EAAC,IAAI,CAAC,UAAU;IAC3C;IAEA,6BAA6B,QAA8B,EAAE;QAC3D,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC;QACpB,MAAM,cAAc,SAAS,SAAS,GAAG;YACvC,IAAI,CAAC,iBAAiB;QACxB;QACA,IAAI,CAAC,iBAAiB;QACtB,OAAO;YACL,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YACvB;YACA,IAAI,CAAC,iBAAiB;QACxB;IACF;IAEQ,eAAe,IAAI,MAAkB;IAE7C,oBAAoB;QAClB,KAAK,MAAM,YAAY,IAAI,CAAC,YAAY,CAAE;IAC5C;IAEA,UAAU,QAAoB,EAAE;QAC9B,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC;QACtB,OAAO,IAAM,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;IACxC;AACF"}},
    {"offset": {"line": 2842, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/client/model-context-client.ts"],"sourcesContent":["import { resource, tapMemo, tapState } from \"@creatorem/ai-tap\";\nimport { type ClientOutput } from \"@creatorem/ai-store\";\nimport { CompositeContextProvider } from \"../utils/composite-context-provider\";\nimport type { ModelContextState } from \"../types/scopes\";\n\nconst version = 1;\n\nexport const ModelContext = resource((): ClientOutput<\"modelContext\"> => {\n  const [state] = tapState<ModelContextState>(\n    () => ({ version: version + 1 }) as unknown as ModelContextState,\n  );\n  const composite = tapMemo(() => new CompositeContextProvider(), []);\n\n  return {\n    state,\n    methods: {\n      getState: () => state,\n      getModelContext: () => composite.getModelContext(),\n      subscribe: (callback) => composite.subscribe(callback),\n      register: (provider) => composite.registerModelContextProvider(provider),\n    },\n  };\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAEA;;;AAGA,MAAM,UAAU;AAET,MAAM,eAAe,IAAA,yJAAQ,OAAC;IACnC,MAAM,CAAC,MAAM,GAAG,IAAA,8JAAQ,EACtB,IAAM,CAAC;YAAE,SAAS,UAAU;QAAE,CAAC;IAEjC,MAAM,YAAY,IAAA,4JAAO,EAAC,IAAM,IAAI,oMAAwB,IAAI,EAAE;IAElE,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB,iBAAiB,IAAM,UAAU,eAAe;YAChD,WAAW,CAAC,WAAa,UAAU,SAAS,CAAC;YAC7C,UAAU,CAAC,WAAa,UAAU,4BAA4B,CAAC;QACjE;IACF;AACF"}},
    {"offset": {"line": 2879, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/client/tools.ts"],"sourcesContent":["import { resource, tapState, tapEffect, tapCallback } from \"@creatorem/ai-tap\";\nimport {\n  tapAssistantClientRef,\n  type ClientOutput,\n  attachDefaultPeers,\n} from \"@creatorem/ai-store\";\nimport { ToolsState } from \"../types/scopes\";\nimport type { Tool } from \"assistant-stream\";\nimport { type Toolkit } from \"../model-context/toolbox\";\nimport { ToolCallMessagePartComponent } from \"../types\";\nimport { ModelContext } from \"./model-context-client\";\n\nexport const Tools = resource(\n  ({ toolkit }: { toolkit?: Toolkit }): ClientOutput<\"tools\"> => {\n    const [state, setState] = tapState<ToolsState>(() => ({\n      tools: {},\n    }));\n\n    const clientRef = tapAssistantClientRef();\n\n    const setToolUI = tapCallback(\n      (toolName: string, render: ToolCallMessagePartComponent) => {\n        setState((prev) => {\n          return {\n            ...prev,\n            tools: {\n              ...prev.tools,\n              [toolName]: [...(prev.tools[toolName] ?? []), render],\n            },\n          };\n        });\n\n        return () => {\n          setState((prev) => {\n            return {\n              ...prev,\n              tools: {\n                ...prev.tools,\n                [toolName]:\n                  prev.tools[toolName]?.filter((r) => r !== render) ?? [],\n              },\n            };\n          });\n        };\n      },\n      [],\n    );\n\n    tapEffect(() => {\n      if (!toolkit) return;\n      const unsubscribes: (() => void)[] = [];\n\n      // Register tool UIs (exclude symbols)\n      for (const [toolName, tool] of Object.entries(toolkit)) {\n        if (tool.render) {\n          unsubscribes.push(setToolUI(toolName, tool.render));\n        }\n      }\n\n      // Register tools with model context (exclude symbols)\n      const toolsWithoutRender = Object.entries(toolkit).reduce(\n        (acc, [name, tool]) => {\n          const { render, ...rest } = tool;\n          acc[name] = rest;\n          return acc;\n        },\n        {} as Record<string, Tool<any, any>>,\n      );\n\n      const modelContextProvider = {\n        getModelContext: () => ({\n          tools: toolsWithoutRender,\n        }),\n      };\n\n      unsubscribes.push(\n        clientRef.current!.modelContext().register(modelContextProvider),\n      );\n\n      return () => {\n        unsubscribes.forEach((fn) => fn());\n      };\n    }, [toolkit, setToolUI, clientRef]);\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        setToolUI,\n      },\n    };\n  },\n);\n\nattachDefaultPeers(Tools, {\n  modelContext: ModelContext(),\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AASA;;;;AAEO,MAAM,QAAQ,IAAA,yJAAQ,OAC3B,CAAC,EAAE,OAAO,EAAyB;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,8JAAQ,EAAa,IAAM,CAAC;YACpD,OAAO,CAAC;QACV,CAAC;IAED,MAAM,YAAY,IAAA,4LAAqB;IAEvC,MAAM,YAAY,IAAA,oKAAW,EAC3B,CAAC,UAAkB;QACjB,SAAS,CAAC;YACR,OAAO;gBACL,GAAG,IAAI;gBACP,OAAO;oBACL,GAAG,KAAK,KAAK;oBACb,CAAC,SAAS,EAAE;2BAAK,KAAK,KAAK,CAAC,SAAS,IAAI,EAAE;wBAAG;qBAAO;gBACvD;YACF;QACF;QAEA,OAAO;YACL,SAAS,CAAC;gBACR,OAAO;oBACL,GAAG,IAAI;oBACP,OAAO;wBACL,GAAG,KAAK,KAAK;wBACb,CAAC,SAAS,EACR,KAAK,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC,IAAM,MAAM,WAAW,EAAE;oBAC3D;gBACF;YACF;QACF;IACF,GACA,EAAE;IAGJ,IAAA,gKAAS,EAAC;QACR,IAAI,CAAC,SAAS;QACd,MAAM,eAA+B,EAAE;QAEvC,sCAAsC;QACtC,KAAK,MAAM,CAAC,UAAU,KAAK,IAAI,OAAO,OAAO,CAAC,SAAU;YACtD,IAAI,KAAK,MAAM,EAAE;gBACf,aAAa,IAAI,CAAC,UAAU,UAAU,KAAK,MAAM;YACnD;QACF;QAEA,sDAAsD;QACtD,MAAM,qBAAqB,OAAO,OAAO,CAAC,SAAS,MAAM,CACvD,CAAC,KAAK,CAAC,MAAM,KAAK;YAChB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,GAAG;YAC5B,GAAG,CAAC,KAAK,GAAG;YACZ,OAAO;QACT,GACA,CAAC;QAGH,MAAM,uBAAuB;YAC3B,iBAAiB,IAAM,CAAC;oBACtB,OAAO;gBACT,CAAC;QACH;QAEA,aAAa,IAAI,CACf,UAAU,OAAO,CAAE,YAAY,GAAG,QAAQ,CAAC;QAG7C,OAAO;YACL,aAAa,OAAO,CAAC,CAAC,KAAO;QAC/B;IACF,GAAG;QAAC;QAAS;QAAW;KAAU;IAElC,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB;QACF;IACF;AACF;;AAGF,IAAA,+KAAkB,EAAC,OAAO;IACxB,cAAc,IAAA,mLAAY;AAC5B"}},
    {"offset": {"line": 2974, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/client/suggestions.ts"],"sourcesContent":["import { resource, tapState, withKey } from \"@creatorem/ai-tap\";\nimport { type ClientOutput, tapClientLookup } from \"@creatorem/ai-store\";\nimport type { SuggestionsState, SuggestionState } from \"../types/scopes\";\n\nexport type SuggestionConfig =\n  | string\n  | { title: string; label: string; prompt: string };\n\nconst SuggestionClient = resource(\n  (state: SuggestionState): ClientOutput<\"suggestion\"> => {\n    return {\n      state,\n      methods: {\n        getState: () => state,\n      },\n    };\n  },\n);\n\nconst SuggestionsResource = resource(\n  (suggestions?: SuggestionConfig[]): ClientOutput<\"suggestions\"> => {\n    const [state] = tapState<SuggestionsState>(() => {\n      const normalizedSuggestions = (suggestions ?? []).map((s) => {\n        if (typeof s === \"string\") {\n          return {\n            title: s,\n            label: \"\",\n            prompt: s,\n          };\n        }\n        return {\n          title: s.title,\n          label: s.label,\n          prompt: s.prompt,\n        };\n      });\n\n      return {\n        suggestions: normalizedSuggestions,\n      };\n    });\n\n    const suggestionClients = tapClientLookup(\n      () =>\n        state.suggestions.map((suggestion, index) =>\n          withKey(index, SuggestionClient(suggestion)),\n        ),\n      [state.suggestions],\n    );\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        suggestion: ({ index }: { index: number }) => {\n          return suggestionClients.get({ index });\n        },\n      },\n    };\n  },\n);\n\nexport const Suggestions: {\n  (): import(\"@creatorem/ai-tap\").ResourceElement<\n    ClientOutput<\"suggestions\">,\n    undefined\n  >;\n  (\n    suggestions: SuggestionConfig[],\n  ): import(\"@creatorem/ai-tap\").ResourceElement<\n    ClientOutput<\"suggestions\">,\n    SuggestionConfig[]\n  >;\n} = SuggestionsResource as any;\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AACA;;;AAOA,MAAM,mBAAmB,IAAA,yJAAQ,OAC/B,CAAC;IACC,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;QAClB;IACF;AACF;;AAGF,MAAM,sBAAsB,IAAA,yJAAQ,QAClC,CAAC;IACC,MAAM,CAAC,MAAM,GAAG,IAAA,8JAAQ,EAAmB;QACzC,MAAM,wBAAwB,CAAC,eAAe,EAAE,EAAE,GAAG,CAAC,CAAC;YACrD,IAAI,OAAO,MAAM,UAAU;gBACzB,OAAO;oBACL,OAAO;oBACP,OAAO;oBACP,QAAQ;gBACV;YACF;YACA,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,OAAO,EAAE,KAAK;gBACd,QAAQ,EAAE,MAAM;YAClB;QACF;QAEA,OAAO;YACL,aAAa;QACf;IACF;IAEA,MAAM,oBAAoB,IAAA,yKAAe,EACvC,IACE,MAAM,WAAW,CAAC,GAAG,CAAC,CAAC,YAAY,QACjC,IAAA,2JAAO,EAAC,OAAO,iBAAiB,eAEpC;QAAC,MAAM,WAAW;KAAC;IAGrB,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB,YAAY,CAAC,EAAE,KAAK,EAAqB;gBACvC,OAAO,kBAAkB,GAAG,CAAC;oBAAE;gBAAM;YACvC;QACF;IACF;AACF;;AAGK,MAAM,cAWT"}},
    {"offset": {"line": 3042, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/runtime-adapter.ts"],"sourcesContent":["import { resource, tapEffect, tapInlineResource } from \"@creatorem/ai-tap\";\nimport type { AssistantRuntime } from \"./runtime/assistant-runtime\";\nimport { ThreadListClient } from \"./client/thread-list-runtime-client\";\nimport {\n  tapAssistantClientRef,\n  Derived,\n  attachDefaultPeers,\n} from \"@creatorem/ai-store\";\nimport { ModelContext } from \"../client/model-context-client\";\nimport { Tools, Suggestions } from \"../model-context\";\n\nexport const RuntimeAdapter = resource((runtime: AssistantRuntime) => {\n  const clientRef = tapAssistantClientRef();\n\n  tapEffect(() => {\n    return runtime.registerModelContextProvider(\n      clientRef.current!.modelContext(),\n    );\n  }, [runtime, clientRef]);\n\n  return tapInlineResource(\n    ThreadListClient({\n      runtime: runtime.threads,\n      __internal_assistantRuntime: runtime,\n    }),\n  );\n});\n\nattachDefaultPeers(RuntimeAdapter, {\n  modelContext: ModelContext(),\n  tools: Tools({}),\n  suggestions: Suggestions(),\n  threadListItem: Derived({\n    source: \"threads\",\n    query: { type: \"main\" },\n    get: (aui) => aui.threads().item(\"main\"),\n  }),\n  thread: Derived({\n    source: \"threads\",\n    query: { type: \"main\" },\n    get: (aui) => aui.threads().thread(\"main\"),\n  }),\n  composer: Derived({\n    source: \"thread\",\n    query: {},\n    get: (aui) => aui.threads().thread(\"main\").composer,\n  }),\n});\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAKA;AACA;AAAA;;;;;;AAEO,MAAM,iBAAiB,IAAA,yJAAQ,OAAC,CAAC;IACtC,MAAM,YAAY,IAAA,4LAAqB;IAEvC,IAAA,gKAAS,EAAC;QACR,OAAO,QAAQ,4BAA4B,CACzC,UAAU,OAAO,CAAE,YAAY;IAEnC,GAAG;QAAC;QAAS;KAAU;IAEvB,OAAO,IAAA,oLAAiB,EACtB,IAAA,qNAAgB,EAAC;QACf,SAAS,QAAQ,OAAO;QACxB,6BAA6B;IAC/B;AAEJ;;AAEA,IAAA,+KAAkB,EAAC,gBAAgB;IACjC,cAAc,IAAA,mLAAY;IAC1B,OAAO,IAAA,uJAAK,EAAC,CAAC;IACd,aAAa,IAAA,mKAAW;IACxB,gBAAgB,IAAA,iJAAO,EAAC;QACtB,QAAQ;QACR,OAAO;YAAE,MAAM;QAAO;QACtB,KAAK,CAAC,MAAQ,IAAI,OAAO,GAAG,IAAI,CAAC;IACnC;IACA,QAAQ,IAAA,iJAAO,EAAC;QACd,QAAQ;QACR,OAAO;YAAE,MAAM;QAAO;QACtB,KAAK,CAAC,MAAQ,IAAI,OAAO,GAAG,MAAM,CAAC;IACrC;IACA,UAAU,IAAA,iJAAO,EAAC;QAChB,QAAQ;QACR,OAAO,CAAC;QACR,KAAK,CAAC,MAAQ,IAAI,OAAO,GAAG,MAAM,CAAC,QAAQ,QAAQ;IACrD;AACF"}},
    {"offset": {"line": 3109, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/stores/thread-viewport.tsx"],"sourcesContent":["\"use client\";\n\nimport { create } from \"zustand\";\nimport type { Unsubscribe } from \"../../types/unsubscribe\";\n\nexport type SizeHandle = {\n  /** Update the height */\n  setHeight: (height: number) => void;\n  /** Unregister this handle */\n  unregister: Unsubscribe;\n};\n\ntype SizeRegistry = {\n  register: () => SizeHandle;\n};\n\nconst createSizeRegistry = (\n  onChange: (total: number) => void,\n): SizeRegistry => {\n  const entries = new Map<symbol, number>();\n\n  const recalculate = () => {\n    let total = 0;\n    for (const height of entries.values()) {\n      total += height;\n    }\n    onChange(total);\n  };\n\n  return {\n    register: () => {\n      const id = Symbol();\n      entries.set(id, 0);\n\n      return {\n        setHeight: (height: number) => {\n          if (entries.get(id) !== height) {\n            entries.set(id, height);\n            recalculate();\n          }\n        },\n        unregister: () => {\n          entries.delete(id);\n          recalculate();\n        },\n      };\n    },\n  };\n};\n\nexport type ThreadViewportState = {\n  readonly isAtBottom: boolean;\n  readonly scrollToBottom: (config?: {\n    behavior?: ScrollBehavior | undefined;\n  }) => void;\n  readonly onScrollToBottom: (\n    callback: ({ behavior }: { behavior: ScrollBehavior }) => void,\n  ) => Unsubscribe;\n\n  /** Controls scroll anchoring: \"top\" anchors user messages at top, \"bottom\" is classic behavior */\n  readonly turnAnchor: \"top\" | \"bottom\";\n\n  /** Raw height values from registered elements */\n  readonly height: {\n    /** Total viewport height */\n    readonly viewport: number;\n    /** Total content inset height (footer, anchor message, etc.) */\n    readonly inset: number;\n    /** Height of the anchor user message (full height) */\n    readonly userMessage: number;\n  };\n\n  /** Register a viewport and get a handle to update its height */\n  readonly registerViewport: () => SizeHandle;\n\n  /** Register a content inset (footer, anchor message, etc.) and get a handle to update its height */\n  readonly registerContentInset: () => SizeHandle;\n\n  /** Register the anchor user message height */\n  readonly registerUserMessageHeight: () => SizeHandle;\n};\n\nexport type ThreadViewportStoreOptions = {\n  turnAnchor?: \"top\" | \"bottom\" | undefined;\n};\n\nexport const makeThreadViewportStore = (\n  options: ThreadViewportStoreOptions = {},\n) => {\n  const scrollToBottomListeners = new Set<\n    (config: { behavior: ScrollBehavior }) => void\n  >();\n\n  const viewportRegistry = createSizeRegistry((total) => {\n    store.setState({\n      height: {\n        ...store.getState().height,\n        viewport: total,\n      },\n    });\n  });\n  const insetRegistry = createSizeRegistry((total) => {\n    store.setState({\n      height: {\n        ...store.getState().height,\n        inset: total,\n      },\n    });\n  });\n  const userMessageRegistry = createSizeRegistry((total) => {\n    store.setState({\n      height: {\n        ...store.getState().height,\n        userMessage: total,\n      },\n    });\n  });\n\n  const store = create<ThreadViewportState>(() => ({\n    isAtBottom: true,\n    scrollToBottom: ({ behavior = \"auto\" } = {}) => {\n      for (const listener of scrollToBottomListeners) {\n        listener({ behavior });\n      }\n    },\n    onScrollToBottom: (callback) => {\n      scrollToBottomListeners.add(callback);\n      return () => {\n        scrollToBottomListeners.delete(callback);\n      };\n    },\n\n    turnAnchor: options.turnAnchor ?? \"bottom\",\n\n    height: {\n      viewport: 0,\n      inset: 0,\n      userMessage: 0,\n    },\n\n    registerViewport: viewportRegistry.register,\n    registerContentInset: insetRegistry.register,\n    registerUserMessageHeight: userMessageRegistry.register,\n  }));\n\n  return store;\n};\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAgBA,MAAM,qBAAqB,CACzB;IAEA,MAAM,UAAU,IAAI;IAEpB,MAAM,cAAc;QAClB,IAAI,QAAQ;QACZ,KAAK,MAAM,UAAU,QAAQ,MAAM,GAAI;YACrC,SAAS;QACX;QACA,SAAS;IACX;IAEA,OAAO;QACL,UAAU;YACR,MAAM,KAAK;YACX,QAAQ,GAAG,CAAC,IAAI;YAEhB,OAAO;gBACL,WAAW,CAAC;oBACV,IAAI,QAAQ,GAAG,CAAC,QAAQ,QAAQ;wBAC9B,QAAQ,GAAG,CAAC,IAAI;wBAChB;oBACF;gBACF;gBACA,YAAY;oBACV,QAAQ,MAAM,CAAC;oBACf;gBACF;YACF;QACF;IACF;AACF;AAsCO,MAAM,0BAA0B,CACrC,UAAsC,CAAC,CAAC;IAExC,MAAM,0BAA0B,IAAI;IAIpC,MAAM,mBAAmB,mBAAmB,CAAC;QAC3C,MAAM,QAAQ,CAAC;YACb,QAAQ;gBACN,GAAG,MAAM,QAAQ,GAAG,MAAM;gBAC1B,UAAU;YACZ;QACF;IACF;IACA,MAAM,gBAAgB,mBAAmB,CAAC;QACxC,MAAM,QAAQ,CAAC;YACb,QAAQ;gBACN,GAAG,MAAM,QAAQ,GAAG,MAAM;gBAC1B,OAAO;YACT;QACF;IACF;IACA,MAAM,sBAAsB,mBAAmB,CAAC;QAC9C,MAAM,QAAQ,CAAC;YACb,QAAQ;gBACN,GAAG,MAAM,QAAQ,GAAG,MAAM;gBAC1B,aAAa;YACf;QACF;IACF;IAEA,MAAM,QAAQ,IAAA,iWAAM,EAAsB,IAAM,CAAC;YAC/C,YAAY;YACZ,gBAAgB,CAAC,EAAE,WAAW,MAAM,EAAE,GAAG,CAAC,CAAC;gBACzC,KAAK,MAAM,YAAY,wBAAyB;oBAC9C,SAAS;wBAAE;oBAAS;gBACtB;YACF;YACA,kBAAkB,CAAC;gBACjB,wBAAwB,GAAG,CAAC;gBAC5B,OAAO;oBACL,wBAAwB,MAAM,CAAC;gBACjC;YACF;YAEA,YAAY,QAAQ,UAAU,IAAI;YAElC,QAAQ;gBACN,UAAU;gBACV,OAAO;gBACP,aAAa;YACf;YAEA,kBAAkB,iBAAiB,QAAQ;YAC3C,sBAAsB,cAAc,QAAQ;YAC5C,2BAA2B,oBAAoB,QAAQ;QACzD,CAAC;IAED,OAAO;AACT"}},
    {"offset": {"line": 3204, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/react/utils/create-context-hook.ts"],"sourcesContent":["\"use client\";\n\nimport { useContext, Context } from \"react\";\n\n/**\n * Creates a context hook with optional support.\n * @param context - The React context to consume.\n * @param providerName - The name of the provider for error messages.\n * @returns A hook function that provides the context value.\n */\nexport function createContextHook<T>(\n  context: Context<T | null>,\n  providerName: string,\n) {\n  function useContextHook(options?: {\n    optional?: boolean | undefined;\n  }): T | null {\n    const contextValue = useContext(context);\n    if (!options?.optional && !contextValue) {\n      throw new Error(`This component must be used within ${providerName}.`);\n    }\n    return contextValue;\n  }\n\n  return useContextHook;\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAUO,SAAS,kBACd,OAA0B,EAC1B,YAAoB;;IAEpB,SAAS,eAAe,OAEvB;;QACC,MAAM,eAAe,IAAA,oXAAU,EAAC;QAChC,IAAI,CAAC,SAAS,YAAY,CAAC,cAAc;YACvC,MAAM,IAAI,MAAM,CAAC,mCAAmC,EAAE,aAAa,CAAC,CAAC;QACvE;QACA,OAAO;IACT;OARS;IAUT,OAAO;AACT"}},
    {"offset": {"line": 3231, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/react/utils/create-context-store-hook.ts"],"sourcesContent":["import { UseBoundStore } from \"zustand\";\nimport { ReadonlyStore } from \"../../readonly-store\";\n\n/**\n * Creates hooks for accessing a store within a context.\n * @param contextHook - The hook to access the context.\n * @param contextKey - The key of the store in the context.\n * @returns An object containing the hooks: `use...` and `use...Store`.\n */\nexport function createContextStoreHook<T, K extends keyof T & string>(\n  contextHook: (options?: { optional?: boolean }) => T | null,\n  contextKey: K,\n) {\n  type StoreType = T[K];\n  type StateType = StoreType extends ReadonlyStore<infer S> ? S : never;\n\n  // Define useStoreStoreHook with overloads\n  function useStoreStoreHook(): ReadonlyStore<StateType>;\n  function useStoreStoreHook(options: {\n    optional: true;\n  }): ReadonlyStore<StateType> | null;\n  function useStoreStoreHook(options?: {\n    optional?: boolean;\n  }): ReadonlyStore<StateType> | null {\n    const context = contextHook(options);\n    if (!context) return null;\n    return context[contextKey] as ReadonlyStore<StateType>;\n  }\n\n  // Define useStoreHook with overloads\n  function useStoreHook(): StateType;\n  function useStoreHook<TSelected>(\n    selector: (state: StateType) => TSelected,\n  ): TSelected;\n  function useStoreHook(options: { optional: true }): StateType | null;\n  function useStoreHook<TSelected>(options: {\n    optional: true;\n    selector?: (state: StateType) => TSelected;\n  }): TSelected | null;\n  function useStoreHook<TSelected>(\n    param?:\n      | ((state: StateType) => TSelected)\n      | {\n          optional?: boolean;\n          selector?: (state: StateType) => TSelected;\n        },\n  ): TSelected | StateType | null {\n    let optional = false;\n    let selector: ((state: StateType) => TSelected) | undefined;\n\n    if (typeof param === \"function\") {\n      selector = param;\n    } else if (param && typeof param === \"object\") {\n      optional = !!param.optional;\n      selector = param.selector;\n    }\n\n    const store = useStoreStoreHook({\n      optional,\n    } as any) as UseBoundStore<ReadonlyStore<StateType>>;\n    if (!store) return null;\n    return selector ? store(selector) : store();\n  }\n\n  // Return an object with keys based on contextKey\n  return {\n    [contextKey]: useStoreHook,\n    [`${contextKey}Store`]: useStoreStoreHook,\n  } as {\n    [P in K]: typeof useStoreHook;\n  } & {\n    [P in `${K}Store`]: typeof useStoreStoreHook;\n  };\n}\n"],"names":[],"mappings":";;;;AASO,SAAS,uBACd,WAA2D,EAC3D,UAAa;;IAUb,SAAS,kBAAkB,OAE1B;QACC,MAAM,UAAU,YAAY;QAC5B,IAAI,CAAC,SAAS,OAAO;QACrB,OAAO,OAAO,CAAC,WAAW;IAC5B;IAYA,SAAS,aACP,KAKK;;QAEL,IAAI,WAAW;QACf,IAAI;QAEJ,IAAI,OAAO,UAAU,YAAY;YAC/B,WAAW;QACb,OAAO,IAAI,SAAS,OAAO,UAAU,UAAU;YAC7C,WAAW,CAAC,CAAC,MAAM,QAAQ;YAC3B,WAAW,MAAM,QAAQ;QAC3B;QAEA,MAAM,QAAQ,kBAAkB;YAC9B;QACF;QACA,IAAI,CAAC,OAAO,OAAO;QACnB,OAAO,WAAW,MAAM,YAAY;IACtC;OAvBS;;YAkBO;;;IAOhB,iDAAiD;IACjD,OAAO;QACL,CAAC,WAAW,EAAE;QACd,CAAC,GAAG,WAAW,KAAK,CAAC,CAAC,EAAE;IAC1B;AAKF"}},
    {"offset": {"line": 3276, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/react/thread-viewport-context.ts"],"sourcesContent":["\"use client\";\n\nimport { createContext } from \"react\";\nimport { ReadonlyStore } from \"../readonly-store\";\nimport { UseBoundStore } from \"zustand\";\nimport { createContextHook } from \"./utils/create-context-hook\";\nimport { createContextStoreHook } from \"./utils/create-context-store-hook\";\nimport { ThreadViewportState } from \"../stores\";\n\nexport type ThreadViewportContextValue = {\n  useThreadViewport: UseBoundStore<ReadonlyStore<ThreadViewportState>>;\n};\n\nexport const ThreadViewportContext =\n  createContext<ThreadViewportContextValue | null>(null);\n\nconst useThreadViewportContext = createContextHook(\n  ThreadViewportContext,\n  \"ThreadPrimitive.Viewport\",\n);\n\nexport const { useThreadViewport, useThreadViewportStore } =\n  createContextStoreHook(useThreadViewportContext, \"useThreadViewport\");\n"],"names":[],"mappings":";;;;;;;;AAEA;AAGA;AACA;AANA;;;;AAaO,MAAM,sCACX,IAAA,uXAAa,EAAoC;AAEnD,MAAM,2BAA2B,IAAA,0MAAiB,EAChD,uBACA;AAGK,MAAM,EAAE,iBAAiB,EAAE,sBAAsB,EAAE,GACxD,IAAA,wNAAsB,EAAC,0BAA0B"}},
    {"offset": {"line": 3301, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/readonly-store.ts"],"sourcesContent":["import type { StoreApi } from \"zustand\";\n\nexport type ReadonlyStore<T> = Omit<StoreApi<T>, \"setState\" | \"destroy\">;\n\nexport const writableStore = <T>(store: ReadonlyStore<T> | undefined) => {\n  return store as unknown as StoreApi<T>;\n};\n"],"names":[],"mappings":";;;;AAIO,MAAM,gBAAgB,CAAI;IAC/B,OAAO;AACT"}},
    {"offset": {"line": 3315, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/providers/thread-viewport-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useEffect, useState } from \"react\";\nimport {\n  makeThreadViewportStore,\n  type ThreadViewportStoreOptions,\n} from \"../stores/thread-viewport\";\nimport {\n  ThreadViewportContext,\n  ThreadViewportContextValue,\n  useThreadViewportStore,\n} from \"../react/thread-viewport-context\";\nimport { writableStore } from \"../readonly-store\";\n\nexport type ThreadViewportProviderProps = PropsWithChildren<{\n  options?: ThreadViewportStoreOptions;\n}>;\n\nconst useThreadViewportStoreValue = (options: ThreadViewportStoreOptions) => {\n  const outerViewport = useThreadViewportStore({ optional: true });\n  const [store] = useState(() => makeThreadViewportStore(options));\n\n  // Forward scrollToBottom from outer viewport to inner viewport\n  useEffect(() => {\n    return outerViewport?.getState().onScrollToBottom(() => {\n      store.getState().scrollToBottom();\n    });\n  }, [outerViewport, store]);\n\n  useEffect(() => {\n    if (!outerViewport) return;\n    return store.subscribe((state) => {\n      if (outerViewport.getState().isAtBottom !== state.isAtBottom) {\n        writableStore(outerViewport).setState({ isAtBottom: state.isAtBottom });\n      }\n    });\n  }, [store, outerViewport]);\n\n  // Sync options to store when they change\n  useEffect(() => {\n    const nextState = {\n      turnAnchor: options.turnAnchor ?? \"bottom\",\n    };\n\n    const currentState = store.getState();\n    if (currentState.turnAnchor !== nextState.turnAnchor) {\n      writableStore(store).setState(nextState);\n    }\n  }, [store, options.turnAnchor]);\n\n  return store;\n};\n\nexport const ThreadPrimitiveViewportProvider: FC<\n  ThreadViewportProviderProps\n> = ({ children, options = {} }) => {\n  const useThreadViewport = useThreadViewportStoreValue(options);\n\n  const [context] = useState<ThreadViewportContextValue>(() => {\n    return {\n      useThreadViewport,\n    };\n  });\n\n  return (\n    <ThreadViewportContext.Provider value={context}>\n      {children}\n    </ThreadViewportContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAIA;AAKA;;;AAbA;;;;;AAmBA,MAAM,8BAA8B,CAAC;;IACnC,MAAM,gBAAgB,IAAA,0MAAsB,EAAC;QAAE,UAAU;IAAK;IAC9D,MAAM,CAAC,MAAM,GAAG,IAAA,kXAAQ;gDAAC,IAAM,IAAA,kMAAuB,EAAC;;IAEvD,+DAA+D;IAC/D,IAAA,mXAAS;iDAAC;YACR,OAAO,eAAe,WAAW;yDAAiB;oBAChD,MAAM,QAAQ,GAAG,cAAc;gBACjC;;QACF;gDAAG;QAAC;QAAe;KAAM;IAEzB,IAAA,mXAAS;iDAAC;YACR,IAAI,CAAC,eAAe;YACpB,OAAO,MAAM,SAAS;yDAAC,CAAC;oBACtB,IAAI,cAAc,QAAQ,GAAG,UAAU,KAAK,MAAM,UAAU,EAAE;wBAC5D,IAAA,4KAAa,EAAC,eAAe,QAAQ,CAAC;4BAAE,YAAY,MAAM,UAAU;wBAAC;oBACvE;gBACF;;QACF;gDAAG;QAAC;QAAO;KAAc;IAEzB,yCAAyC;IACzC,IAAA,mXAAS;iDAAC;YACR,MAAM,YAAY;gBAChB,YAAY,QAAQ,UAAU,IAAI;YACpC;YAEA,MAAM,eAAe,MAAM,QAAQ;YACnC,IAAI,aAAa,UAAU,KAAK,UAAU,UAAU,EAAE;gBACpD,IAAA,4KAAa,EAAC,OAAO,QAAQ,CAAC;YAChC;QACF;gDAAG;QAAC;QAAO,QAAQ,UAAU;KAAC;IAE9B,OAAO;AACT;GAjCM;;QACkB,0MAAsB;;;AAkCvC,MAAM,kCAET,CAAC,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC,EAAE;;IAC7B,MAAM,oBAAoB,4BAA4B;IAEtD,MAAM,CAAC,QAAQ,GAAG,IAAA,kXAAQ;oDAA6B;YACrD,OAAO;gBACL;YACF;QACF;;IAEA,qBACE,sYAAC,yMAAqB,CAAC,QAAQ;QAAC,OAAO;kBACpC;;;;;;AAGP;IAhBa;;QAGe;;;KAHf"}},
    {"offset": {"line": 3425, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/legacy-runtime/assistant-runtime-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport { FC, memo, PropsWithChildren, useEffect } from \"react\";\nimport { useAui, AuiProvider, AssistantClient } from \"@creatorem/ai-store\";\nimport { AssistantRuntime } from \"./runtime/assistant-runtime\";\nimport { AssistantRuntimeCore } from \"./runtime-cores/core/assistant-runtime-core\";\nimport { RuntimeAdapter } from \"./runtime-adapter\";\nimport { ThreadPrimitiveViewportProvider } from \"../context/providers/thread-viewport-provider\";\n// import { DevToolsProviderApi } from \"../devtools\";\n\nexport namespace AssistantRuntimeProvider {\n  export type Props = PropsWithChildren<{\n    /**\n     * The runtime to provide to the rest of your app.\n     */\n    runtime: AssistantRuntime;\n\n    /**\n     * The aui instance to extend. If not provided, a new aui instance will be created.\n     */\n    aui?: AssistantClient;\n  }>;\n}\n\nconst getRenderComponent = (runtime: AssistantRuntime) => {\n  return (runtime as { _core?: AssistantRuntimeCore })._core?.RenderComponent;\n};\n\nexport const AssistantRuntimeProviderImpl: FC<\n  AssistantRuntimeProvider.Props\n> = ({ children, aui: parent = null, runtime }) => {\n  const aui = useAui({ threads: RuntimeAdapter(runtime) }, { parent: parent });\n\n  // useEffect(() => {\n  //   if (process.env[\"NODE_ENV\"] === \"production\") return;\n  //   return DevToolsProviderApi.register(aui);\n  // }, [aui]);\n\n  const RenderComponent = getRenderComponent(runtime);\n\n  return (\n    <AuiProvider value={aui}>\n      {RenderComponent && <RenderComponent />}\n\n      {/* TODO temporarily allow accessing viewport state from outside the viewport */}\n      {/* TODO figure out if this behavior should be deprecated, since it is quite hacky */}\n      <ThreadPrimitiveViewportProvider>\n        {children}\n      </ThreadPrimitiveViewportProvider>\n    </AuiProvider>\n  );\n};\n\nexport const AssistantRuntimeProvider = memo(AssistantRuntimeProviderImpl);\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAGA;AACA;;;AAPA;;;;;AAwBA,MAAM,qBAAqB,CAAC;IAC1B,OAAO,AAAC,QAA6C,KAAK,EAAE;AAC9D;AAEO,MAAM,+BAET,CAAC,EAAE,QAAQ,EAAE,KAAK,SAAS,IAAI,EAAE,OAAO,EAAE;;IAC5C,MAAM,MAAM,IAAA,oJAAM,EAAC;QAAE,SAAS,IAAA,wLAAc,EAAC;IAAS,GAAG;QAAE,QAAQ;IAAO;IAE1E,oBAAoB;IACpB,0DAA0D;IAC1D,8CAA8C;IAC9C,aAAa;IAEb,MAAM,kBAAkB,mBAAmB;IAE3C,qBACE,sYAAC,qLAAW;QAAC,OAAO;;YACjB,iCAAmB,sYAAC;;;;;0BAIrB,sYAAC,yNAA+B;0BAC7B;;;;;;;;;;;;AAIT;GAvBa;;QAGC,oJAAM;;;KAHP;AAyBN,MAAM,yCAA2B,IAAA,8WAAI,EAAC"}},
    {"offset": {"line": 3499, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 3511, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/attachment/attachment-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace AttachmentPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  /**\n   * Props for the AttachmentPrimitive.Root component.\n   * Accepts all standard div element props.\n   */\n  export type Props = PrimitiveDivProps;\n}\n\n/**\n * The root container component for an attachment.\n *\n * This component provides the foundational wrapper for attachment-related components\n * and content. It serves as the context provider for attachment state and actions.\n *\n * @example\n * ```tsx\n * <AttachmentPrimitive.Root>\n *   <AttachmentPrimitive.Name />\n *   <AttachmentPrimitive.Remove />\n * </AttachmentPrimitive.Root>\n * ```\n */\nexport const AttachmentPrimitiveRoot = forwardRef<\n  AttachmentPrimitiveRoot.Element,\n  AttachmentPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nAttachmentPrimitiveRoot.displayName = \"AttachmentPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AA8BO,MAAM,wCAA0B,IAAA,oXAAU,OAG/C,CAAC,OAAO;IACR,qBAAO,sYAAC,sYAAS,CAAC,GAAG;QAAE,GAAG,KAAK;QAAE,KAAK;;;;;;AACxC;;AAEA,wBAAwB,WAAW,GAAG"}},
    {"offset": {"line": 3544, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/use-aui-state.tsx"],"sourcesContent":["import { useSyncExternalStore, useDebugValue } from \"react\";\nimport type { AssistantState } from \"./types/client\";\nimport { useAui } from \"./use-aui\";\nimport { getProxiedAssistantState } from \"./utils/proxied-assistant-state\";\n\n/**\n * Hook to access a slice of the assistant state with automatic subscription\n *\n * @param selector - Function to select a slice of the state\n * @returns The selected state slice\n *\n * @example\n * ```typescript\n * const aui = useAui({\n *   foo: RootScope({ ... }),\n * });\n *\n * const bar = useAuiState((state) => state.foo.bar);\n * ```\n */\nexport const useAuiState = <T,>(selector: (state: AssistantState) => T): T => {\n  const aui = useAui();\n  const proxiedState = getProxiedAssistantState(aui);\n\n  const slice = useSyncExternalStore(\n    aui.subscribe,\n    () => selector(proxiedState),\n    () => selector(proxiedState),\n  );\n\n  if (slice === proxiedState) {\n    throw new Error(\n      \"You tried to return the entire AssistantState. This is not supported due to technical limitations.\",\n    );\n  }\n\n  useDebugValue(slice);\n\n  return slice;\n};\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;;;;;AAiBO,MAAM,cAAc,CAAK;;IAC9B,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,eAAe,IAAA,kMAAwB,EAAC;IAE9C,MAAM,QAAQ,IAAA,8XAAoB,EAChC,IAAI,SAAS;mDACb,IAAM,SAAS;;mDACf,IAAM,SAAS;;IAGjB,IAAI,UAAU,cAAc;QAC1B,MAAM,IAAI,MACR;IAEJ;IAEA,IAAA,uXAAa,EAAC;IAEd,OAAO;AACT;GAnBa;;QACC,oJAAM;QAGJ,8XAAoB"}},
    {"offset": {"line": 3583, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/attachment/attachment-thumb.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, forwardRef, type ComponentRef } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace AttachmentPrimitiveThumb {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const AttachmentPrimitiveThumb = forwardRef<\n  AttachmentPrimitiveThumb.Element,\n  AttachmentPrimitiveThumb.Props\n>((props, ref) => {\n  const ext = useAuiState(({ attachment }) => {\n    const parts = attachment.name.split(\".\");\n    return parts.length > 1 ? parts.pop()! : \"\";\n  });\n  return (\n    <Primitive.div {...props} ref={ref}>\n      .{ext}\n    </Primitive.div>\n  );\n});\n\nAttachmentPrimitiveThumb.displayName = \"AttachmentPrimitive.Thumb\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,MAAM,yCAA2B,GAAA,IAAA,oXAAU,UAGhD,CAAC,OAAO;;IACR,MAAM,MAAM,IAAA,kKAAW;qDAAC,CAAC,EAAE,UAAU,EAAE;YACrC,MAAM,QAAQ,WAAW,IAAI,CAAC,KAAK,CAAC;YACpC,OAAO,MAAM,MAAM,GAAG,IAAI,MAAM,GAAG,KAAM;QAC3C;;IACA,qBACE,sYAAC,sYAAS,CAAC,GAAG;QAAE,GAAG,KAAK;QAAE,KAAK;;YAAK;YAChC;;;;;;;AAGR;;QATc,kKAAW;;;;QAAX,kKAAW;;;;AAWzB,yBAAyB,WAAW,GAAG"}},
    {"offset": {"line": 3638, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/attachment/attachment-name.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nexport namespace AttachmentPrimitiveName {\n  export type Props = Record<string, never>;\n}\n\nexport const AttachmentPrimitiveName: FC<\n  AttachmentPrimitiveName.Props\n> = () => {\n  const name = useAuiState(({ attachment }) => attachment.name);\n  return <>{name}</>;\n};\n\nAttachmentPrimitiveName.displayName = \"AttachmentPrimitive.Name\";\n"],"names":[],"mappings":";;;;;AAGA;;;AAHA;;AASO,MAAM,0BAET;;IACF,MAAM,OAAO,IAAA,kKAAW;qDAAC,CAAC,EAAE,UAAU,EAAE,GAAK,WAAW,IAAI;;IAC5D,qBAAO;kBAAG;;AACZ;GALa;;QAGE,kKAAW;;;KAHb;AAOb,wBAAwB,WAAW,GAAG"}},
    {"offset": {"line": 3673, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/utils/create-action-button.tsx"],"sourcesContent":["import {\n  ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  MouseEventHandler,\n} from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\n\ntype ActionButtonCallback<TProps> = (\n  props: TProps,\n) => MouseEventHandler<HTMLButtonElement> | null;\n\ntype PrimitiveButtonProps = ComponentPropsWithoutRef<typeof Primitive.button>;\n\nexport type ActionButtonProps<THook> = PrimitiveButtonProps &\n  (THook extends (props: infer TProps) => unknown ? TProps : never);\n\nexport type ActionButtonElement = ComponentRef<typeof Primitive.button>;\n\nexport const createActionButton = <TProps,>(\n  displayName: string,\n  useActionButton: ActionButtonCallback<TProps>,\n  forwardProps: (keyof NonNullable<TProps>)[] = [],\n) => {\n  const ActionButton = forwardRef<\n    ActionButtonElement,\n    PrimitiveButtonProps & TProps\n  >((props, forwardedRef) => {\n    const forwardedProps = {} as TProps;\n    const primitiveProps = {} as PrimitiveButtonProps;\n\n    (Object.keys(props) as Array<keyof typeof props>).forEach((key) => {\n      if (forwardProps.includes(key as keyof TProps)) {\n        (forwardedProps as any)[key] = props[key];\n      } else {\n        (primitiveProps as any)[key] = props[key];\n      }\n    });\n\n    const callback = useActionButton(forwardedProps as TProps) ?? undefined;\n    return (\n      <Primitive.button\n        type=\"button\"\n        {...primitiveProps}\n        ref={forwardedRef}\n        disabled={primitiveProps.disabled || !callback}\n        onClick={composeEventHandlers(primitiveProps.onClick, callback)}\n      />\n    );\n  });\n\n  ActionButton.displayName = displayName;\n\n  return ActionButton;\n};\n"],"names":[],"mappings":";;;;;AAAA;AAMA;AACA;;;;;AAaO,MAAM,qBAAqB,CAChC,aACA,iBACA,eAA8C,EAAE;;IAEhD,MAAM,6BAAe,IAAA,oXAAU,KAG7B,CAAC,OAAO;;QACR,MAAM,iBAAiB,CAAC;QACxB,MAAM,iBAAiB,CAAC;QAEvB,OAAO,IAAI,CAAC,OAAqC,OAAO,CAAC,CAAC;YACzD,IAAI,aAAa,QAAQ,CAAC,MAAsB;gBAC7C,cAAsB,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI;YAC3C,OAAO;gBACJ,cAAsB,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI;YAC3C;QACF;QAEA,MAAM,WAAW,gBAAgB,mBAA6B;QAC9D,qBACE,sYAAC,sYAAS,CAAC,MAAM;YACf,MAAK;YACJ,GAAG,cAAc;YAClB,KAAK;YACL,UAAU,eAAe,QAAQ,IAAI,CAAC;YACtC,SAAS,IAAA,8PAAoB,EAAC,eAAe,OAAO,EAAE;;;;;;IAG5D;;YAVmB;;;IAYnB,aAAa,WAAW,GAAG;IAE3B,OAAO;AACT"}},
    {"offset": {"line": 3725, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/attachment/attachment-remove.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport { useAui } from \"@creatorem/ai-store\";\n\nconst useAttachmentRemove = () => {\n  const aui = useAui();\n\n  const handleRemoveAttachment = useCallback(() => {\n    aui.attachment().remove();\n  }, [aui]);\n\n  return handleRemoveAttachment;\n};\n\nexport namespace AttachmentPrimitiveRemove {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useAttachmentRemove>;\n}\n\nexport const AttachmentPrimitiveRemove = createActionButton(\n  \"AttachmentPrimitive.Remove\",\n  useAttachmentRemove,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;;AARA;;;;AAUA,MAAM,sBAAsB;;IAC1B,MAAM,MAAM,IAAA,oJAAM;IAElB,MAAM,yBAAyB,IAAA,qXAAW;mEAAC;YACzC,IAAI,UAAU,GAAG,MAAM;QACzB;kEAAG;QAAC;KAAI;IAER,OAAO;AACT;GARM;;QACQ,oJAAM;;;AAcb,MAAM,4BAA4B,IAAA,yLAAkB,EACzD,8BACA"}},
    {"offset": {"line": 3790, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 3810, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-send.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\nexport const useComposerSend = () => {\n  const aui = useAui();\n\n  const disabled = useAuiState(\n    (s) => s.thread.isRunning || !s.composer.isEditing || s.composer.isEmpty,\n  );\n\n  const callback = useCallback(() => {\n    aui.composer().send();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveSend {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the ComposerPrimitive.Send component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useComposerSend>;\n}\n\n/**\n * A button component that sends the current message in the composer.\n *\n * This component automatically handles the send functionality and is disabled\n * when sending is not available (e.g., when the thread is running, the composer\n * is empty, or not in editing mode).\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Send>\n *   Send Message\n * </ComposerPrimitive.Send>\n * ```\n */\nexport const ComposerPrimitiveSend = createActionButton(\n  \"ComposerPrimitive.Send\",\n  useComposerSend,\n);\n"],"names":[],"mappings":";;;;;;AAEA;AAKA;AACA;AAAA;;AARA;;;;AAUO,MAAM,kBAAkB;;IAC7B,MAAM,MAAM,IAAA,oJAAM;IAElB,MAAM,WAAW,IAAA,kKAAW;iDAC1B,CAAC,IAAM,EAAE,MAAM,CAAC,SAAS,IAAI,CAAC,EAAE,QAAQ,CAAC,SAAS,IAAI,EAAE,QAAQ,CAAC,OAAO;;IAG1E,MAAM,WAAW,IAAA,qXAAW;iDAAC;YAC3B,IAAI,QAAQ,GAAG,IAAI;QACrB;gDAAG;QAAC;KAAI;IAER,IAAI,UAAU,OAAO;IACrB,OAAO;AACT;GAba;;QACC,oJAAM;QAED,kKAAW;;;AAmCvB,MAAM,wBAAwB,IAAA,yLAAkB,EACrD,0BACA"}},
    {"offset": {"line": 3855, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  type FormEvent,\n  forwardRef,\n  ComponentPropsWithoutRef,\n} from \"react\";\nimport { useComposerSend } from \"./composer-send\";\n\nexport namespace ComposerPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.form>;\n  /**\n   * Props for the ComposerPrimitive.Root component.\n   * Accepts all standard form element props.\n   */\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.form>;\n}\n\n/**\n * The root form container for message composition.\n *\n * This component provides a form wrapper that handles message submission when the form\n * is submitted (e.g., via Enter key or submit button). It automatically prevents the\n * default form submission and triggers the composer's send functionality.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Root>\n *   <ComposerPrimitive.Input placeholder=\"Type your message...\" />\n *   <ComposerPrimitive.Send>Send</ComposerPrimitive.Send>\n * </ComposerPrimitive.Root>\n * ```\n */\nexport const ComposerPrimitiveRoot = forwardRef<\n  ComposerPrimitiveRoot.Element,\n  ComposerPrimitiveRoot.Props\n>(({ onSubmit, ...rest }, forwardedRef) => {\n  const send = useComposerSend();\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n\n    if (!send) return;\n    send();\n  };\n\n  return (\n    <Primitive.form\n      {...rest}\n      ref={forwardedRef}\n      onSubmit={composeEventHandlers(onSubmit, handleSubmit)}\n    />\n  );\n});\n\nComposerPrimitiveRoot.displayName = \"ComposerPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAMA;;;AAVA;;;;;AAoCO,MAAM,sCAAwB,GAAA,IAAA,oXAAU,UAG7C,CAAC,EAAE,QAAQ,EAAE,GAAG,MAAM,EAAE;;IACxB,MAAM,OAAO,IAAA,6LAAe;IAE5B,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAEhB,IAAI,CAAC,MAAM;QACX;IACF;IAEA,qBACE,sYAAC,sYAAS,CAAC,IAAI;QACZ,GAAG,IAAI;QACR,KAAK;QACL,UAAU,IAAA,8PAAoB,EAAC,UAAU;;;;;;AAG/C;;QAhBe,6LAAe;;;;QAAf,6LAAe;;;;AAkB9B,sBAAsB,WAAW,GAAG"}},
    {"offset": {"line": 3909, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/utils/hooks/use-on-scroll-to-bottom.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useEffect } from \"react\";\nimport { useThreadViewport } from \"../../context/react/thread-viewport-context\";\n\nexport const useOnScrollToBottom = (\n  callback: (config: { behavior: ScrollBehavior }) => void,\n) => {\n  const callbackRef = useCallbackRef(callback);\n  const onScrollToBottom = useThreadViewport((vp) => vp.onScrollToBottom);\n\n  useEffect(() => {\n    return onScrollToBottom(callbackRef);\n  }, [onScrollToBottom, callbackRef]);\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;AAJA;;;;AAMO,MAAM,sBAAsB,CACjC;;IAEA,MAAM,cAAc,IAAA,8VAAc,EAAC;IACnC,MAAM,mBAAmB,IAAA,qMAAiB;mEAAC,CAAC,KAAO,GAAG,gBAAgB;;IAEtE,IAAA,mXAAS;yCAAC;YACR,OAAO,iBAAiB;QAC1B;wCAAG;QAAC;QAAkB;KAAY;AACpC;GATa;;QAGS,8VAAc;QACT,qMAAiB"}},
    {"offset": {"line": 3949, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-input.tsx"],"sourcesContent":["\"use client\";\n\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport {\n  ClipboardEvent,\n  type KeyboardEvent,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useRef,\n} from \"react\";\nimport TextareaAutosize, {\n  type TextareaAutosizeProps,\n} from \"react-textarea-autosize\";\nimport { useEscapeKeydown } from \"@radix-ui/react-use-escape-keydown\";\nimport { useOnScrollToBottom } from \"../../utils/hooks/use-on-scroll-to-bottom\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\nimport { flushResourcesSync } from \"@creatorem/ai-tap\";\n\nexport namespace ComposerPrimitiveInput {\n  export type Element = HTMLTextAreaElement;\n  export type Props = TextareaAutosizeProps & {\n    /**\n     * Whether to render as a child component using Slot.\n     * When true, the component will merge its props with its child.\n     */\n    asChild?: boolean | undefined;\n    /**\n     * Whether to submit the message when Enter is pressed (without Shift).\n     * @default true\n     */\n    submitOnEnter?: boolean | undefined;\n    /**\n     * Whether to cancel message composition when Escape is pressed.\n     * @default true\n     */\n    cancelOnEscape?: boolean | undefined;\n    /**\n     * Whether to automatically focus the input when a new run starts.\n     * @default true\n     */\n    unstable_focusOnRunStart?: boolean | undefined;\n    /**\n     * Whether to automatically focus the input when scrolling to bottom.\n     * @default true\n     */\n    unstable_focusOnScrollToBottom?: boolean | undefined;\n    /**\n     * Whether to automatically focus the input when switching threads.\n     * @default true\n     */\n    unstable_focusOnThreadSwitched?: boolean | undefined;\n    /**\n     * Whether to automatically add pasted files as attachments.\n     * @default true\n     */\n    addAttachmentOnPaste?: boolean | undefined;\n  };\n}\n\n/**\n * A text input component for composing messages.\n *\n * This component provides a rich text input experience with automatic resizing,\n * keyboard shortcuts, file paste support, and intelligent focus management.\n * It integrates with the composer context to manage message state and submission.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Input\n *   placeholder=\"Type your message...\"\n *   submitOnEnter={true}\n *   addAttachmentOnPaste={true}\n * />\n * ```\n */\nexport const ComposerPrimitiveInput = forwardRef<\n  ComposerPrimitiveInput.Element,\n  ComposerPrimitiveInput.Props\n>(\n  (\n    {\n      autoFocus = false,\n      asChild,\n      disabled: disabledProp,\n      onChange,\n      onKeyDown,\n      onPaste,\n      submitOnEnter = true,\n      cancelOnEscape = true,\n      unstable_focusOnRunStart = true,\n      unstable_focusOnScrollToBottom = true,\n      unstable_focusOnThreadSwitched = true,\n      addAttachmentOnPaste = true,\n      ...rest\n    },\n    forwardedRef,\n  ) => {\n    const aui = useAui();\n\n    const value = useAuiState(({ composer }) => {\n      if (!composer.isEditing) return \"\";\n      return composer.text;\n    });\n\n    const Component = asChild ? Slot : TextareaAutosize;\n\n    const isDisabled =\n      useAuiState(\n        ({ thread, composer }) =>\n          thread.isDisabled || composer.dictation?.inputDisabled,\n      ) || disabledProp;\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n    const ref = useComposedRefs(forwardedRef, textareaRef);\n\n    useEscapeKeydown((e) => {\n      if (!cancelOnEscape) return;\n\n      // Only handle ESC if it originated from within this input\n      if (!textareaRef.current?.contains(e.target as Node)) return;\n\n      const composer = aui.composer();\n      if (composer.getState().canCancel) {\n        composer.cancel();\n        e.preventDefault();\n      }\n    });\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (isDisabled || !submitOnEnter) return;\n\n      // ignore IME composition events\n      if (e.nativeEvent.isComposing) return;\n\n      if (e.key === \"Enter\" && e.shiftKey === false) {\n        const isRunning = aui.thread().getState().isRunning;\n\n        if (!isRunning) {\n          e.preventDefault();\n\n          textareaRef.current?.closest(\"form\")?.requestSubmit();\n        }\n      }\n    };\n\n    const handlePaste = async (e: ClipboardEvent<HTMLTextAreaElement>) => {\n      if (!addAttachmentOnPaste) return;\n      const threadCapabilities = aui.thread().getState().capabilities;\n      const files = Array.from(e.clipboardData?.files || []);\n\n      if (threadCapabilities.attachments && files.length > 0) {\n        try {\n          e.preventDefault();\n          await Promise.all(\n            files.map((file) => aui.composer().addAttachment(file)),\n          );\n        } catch (error) {\n          console.error(\"Error adding attachment:\", error);\n        }\n      }\n    };\n\n    const autoFocusEnabled = autoFocus && !isDisabled;\n    const focus = useCallback(() => {\n      const textarea = textareaRef.current;\n      if (!textarea || !autoFocusEnabled) return;\n\n      textarea.focus({ preventScroll: true });\n      textarea.setSelectionRange(textarea.value.length, textarea.value.length);\n    }, [autoFocusEnabled]);\n\n    useEffect(() => focus(), [focus]);\n\n    useOnScrollToBottom(() => {\n      if (\n        aui.composer().getState().type === \"thread\" &&\n        unstable_focusOnScrollToBottom\n      ) {\n        focus();\n      }\n    });\n\n    useEffect(() => {\n      if (\n        aui.composer().getState().type !== \"thread\" ||\n        !unstable_focusOnRunStart\n      )\n        return undefined;\n\n      return aui.on(\"thread.runStart\", focus);\n    }, [unstable_focusOnRunStart, focus, aui]);\n\n    useEffect(() => {\n      if (\n        aui.composer().getState().type !== \"thread\" ||\n        !unstable_focusOnThreadSwitched\n      )\n        return undefined;\n\n      return aui.on(\"threadListItem.switchedTo\", focus);\n    }, [unstable_focusOnThreadSwitched, focus, aui]);\n\n    return (\n      <Component\n        name=\"input\"\n        value={value}\n        {...rest}\n        ref={ref as React.ForwardedRef<HTMLTextAreaElement>}\n        disabled={isDisabled}\n        onChange={composeEventHandlers(onChange, (e) => {\n          if (!aui.composer().getState().isEditing) return;\n          flushResourcesSync(() => {\n            aui.composer().setText(e.target.value);\n          });\n        })}\n        onKeyDown={composeEventHandlers(onKeyDown, handleKeyPress)}\n        onPaste={composeEventHandlers(onPaste, handlePaste)}\n      />\n    );\n  },\n);\n\nComposerPrimitiveInput.displayName = \"ComposerPrimitive.Input\";\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4123, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-cancel.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\nconst useComposerCancel = () => {\n  const aui = useAui();\n  const disabled = useAuiState(({ composer }) => !composer.canCancel);\n\n  const callback = useCallback(() => {\n    aui.composer().cancel();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveCancel {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the ComposerPrimitive.Cancel component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useComposerCancel>;\n}\n\n/**\n * A button component that cancels the current message composition.\n *\n * This component automatically handles the cancel functionality and is disabled\n * when canceling is not available.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Cancel>\n *   Cancel\n * </ComposerPrimitive.Cancel>\n * ```\n */\nexport const ComposerPrimitiveCancel = createActionButton(\n  \"ComposerPrimitive.Cancel\",\n  useComposerCancel,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;AAAA;;AARA;;;;AAUA,MAAM,oBAAoB;;IACxB,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,WAAW,IAAA,kKAAW;mDAAC,CAAC,EAAE,QAAQ,EAAE,GAAK,CAAC,SAAS,SAAS;;IAElE,MAAM,WAAW,IAAA,qXAAW;mDAAC;YAC3B,IAAI,QAAQ,GAAG,MAAM;QACvB;kDAAG;QAAC;KAAI;IAER,IAAI,UAAU,OAAO;IACrB,OAAO;AACT;GAVM;;QACQ,oJAAM;QACD,kKAAW;;;AAgCvB,MAAM,0BAA0B,IAAA,yLAAkB,EACvD,4BACA"}},
    {"offset": {"line": 4166, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-add-attachment.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\nconst useComposerAddAttachment = ({\n  multiple = true,\n}: {\n  /** allow selecting multiple files */\n  multiple?: boolean | undefined;\n} = {}) => {\n  const disabled = useAuiState(({ composer }) => !composer.isEditing);\n  const aui = useAui();\n\n  const callback = useCallback(() => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.multiple = multiple;\n    input.hidden = true;\n\n    const attachmentAccept = aui.composer().getState().attachmentAccept;\n    if (attachmentAccept !== \"*\") {\n      input.accept = attachmentAccept;\n    }\n\n    document.body.appendChild(input);\n\n    input.onchange = (e) => {\n      const fileList = (e.target as HTMLInputElement).files;\n      if (!fileList) return;\n      for (const file of fileList) {\n        aui.composer().addAttachment(file);\n      }\n\n      document.body.removeChild(input);\n    };\n\n    input.oncancel = () => {\n      if (!input.files || input.files.length === 0) {\n        document.body.removeChild(input);\n      }\n    };\n\n    input.click();\n  }, [aui, multiple]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveAddAttachment {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useComposerAddAttachment>;\n}\n\nexport const ComposerPrimitiveAddAttachment = createActionButton(\n  \"ComposerPrimitive.AddAttachment\",\n  useComposerAddAttachment,\n  [\"multiple\"],\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;AAAA;;AARA;;;;AAUA,MAAM,2BAA2B,CAAC,EAChC,WAAW,IAAI,EAIhB,GAAG,CAAC,CAAC;;IACJ,MAAM,WAAW,IAAA,kKAAW;0DAAC,CAAC,EAAE,QAAQ,EAAE,GAAK,CAAC,SAAS,SAAS;;IAClE,MAAM,MAAM,IAAA,oJAAM;IAElB,MAAM,WAAW,IAAA,qXAAW;0DAAC;YAC3B,MAAM,QAAQ,SAAS,aAAa,CAAC;YACrC,MAAM,IAAI,GAAG;YACb,MAAM,QAAQ,GAAG;YACjB,MAAM,MAAM,GAAG;YAEf,MAAM,mBAAmB,IAAI,QAAQ,GAAG,QAAQ,GAAG,gBAAgB;YACnE,IAAI,qBAAqB,KAAK;gBAC5B,MAAM,MAAM,GAAG;YACjB;YAEA,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,MAAM,QAAQ;kEAAG,CAAC;oBAChB,MAAM,WAAW,AAAC,EAAE,MAAM,CAAsB,KAAK;oBACrD,IAAI,CAAC,UAAU;oBACf,KAAK,MAAM,QAAQ,SAAU;wBAC3B,IAAI,QAAQ,GAAG,aAAa,CAAC;oBAC/B;oBAEA,SAAS,IAAI,CAAC,WAAW,CAAC;gBAC5B;;YAEA,MAAM,QAAQ;kEAAG;oBACf,IAAI,CAAC,MAAM,KAAK,IAAI,MAAM,KAAK,CAAC,MAAM,KAAK,GAAG;wBAC5C,SAAS,IAAI,CAAC,WAAW,CAAC;oBAC5B;gBACF;;YAEA,MAAM,KAAK;QACb;yDAAG;QAAC;QAAK;KAAS;IAElB,IAAI,UAAU,OAAO;IACrB,OAAO;AACT;GA3CM;;QAMa,kKAAW;QAChB,oJAAM;;;AA2Cb,MAAM,iCAAiC,IAAA,yLAAkB,EAC9D,mCACA,0BACA;IAAC;CAAW"}},
    {"offset": {"line": 4238, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/providers/attachment-by-index-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@creatorem/ai-store\";\n\nexport const MessageAttachmentByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n  }>\n> = ({ index, children }) => {\n  const aui = useAui({\n    attachment: Derived({\n      source: \"message\",\n      query: { type: \"index\", index },\n      get: (aui) => aui.message().attachment({ index }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n\nexport const ComposerAttachmentByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n  }>\n> = ({ index, children }) => {\n  const aui = useAui({\n    attachment: Derived({\n      source: \"composer\",\n      query: { type: \"index\", index },\n      get: (aui) => aui.composer().attachment({ index }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n"],"names":[],"mappings":";;;;;;;AAGA;AAAA;AAAA;;;AAHA;;AAKO,MAAM,mCAIT,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE;;IACtB,MAAM,MAAM,IAAA,oJAAM,EAAC;QACjB,YAAY,IAAA,iJAAO,EAAC;YAClB,QAAQ;YACR,OAAO;gBAAE,MAAM;gBAAS;YAAM;YAC9B,GAAG;gEAAE,CAAC,MAAQ,IAAI,OAAO,GAAG,UAAU,CAAC;wBAAE;oBAAM;;QACjD;IACF;IAEA,qBAAO,sYAAC,qLAAW;QAAC,OAAO;kBAAM;;;;;;AACnC;GAda;;QAKC,oJAAM;;;KALP;AAgBN,MAAM,oCAIT,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE;;IACtB,MAAM,MAAM,IAAA,oJAAM,EAAC;QACjB,YAAY,IAAA,iJAAO,EAAC;YAClB,QAAQ;YACR,OAAO;gBAAE,MAAM;gBAAS;YAAM;YAC9B,GAAG;iEAAE,CAAC,MAAQ,IAAI,QAAQ,GAAG,UAAU,CAAC;wBAAE;oBAAM;;QAClD;IACF;IAEA,qBAAO,sYAAC,qLAAW;QAAC,OAAO;kBAAM;;;;;;AACnC;IAda;;QAKC,oJAAM;;;MALP"}},
    {"offset": {"line": 4324, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-attachments.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentType, type FC, memo, useMemo } from \"react\";\nimport { Attachment } from \"../../types\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport { ComposerAttachmentByIndexProvider } from \"../../context/providers\";\n\nexport namespace ComposerPrimitiveAttachments {\n  export type Props = {\n    components:\n      | {\n          Image?: ComponentType | undefined;\n          Document?: ComponentType | undefined;\n          File?: ComponentType | undefined;\n          Attachment?: ComponentType | undefined;\n        }\n      | undefined;\n  };\n}\n\nconst getComponent = (\n  components: ComposerPrimitiveAttachments.Props[\"components\"],\n  attachment: Attachment,\n) => {\n  const type = attachment.type;\n  switch (type) {\n    case \"image\":\n      return components?.Image ?? components?.Attachment;\n    case \"document\":\n      return components?.Document ?? components?.Attachment;\n    case \"file\":\n      return components?.File ?? components?.Attachment;\n    default:\n      const _exhaustiveCheck: never = type;\n      throw new Error(`Unknown attachment type: ${_exhaustiveCheck}`);\n  }\n};\n\nconst AttachmentComponent: FC<{\n  components: ComposerPrimitiveAttachments.Props[\"components\"];\n}> = ({ components }) => {\n  const attachment = useAuiState(({ attachment }) => attachment);\n  if (!attachment) return null;\n\n  const Component = getComponent(components, attachment);\n  if (!Component) return null;\n  return <Component />;\n};\n\nexport namespace ComposerPrimitiveAttachmentByIndex {\n  export type Props = {\n    index: number;\n    components?: ComposerPrimitiveAttachments.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single attachment at the specified index within the composer.\n *\n * This component provides direct access to render a specific attachment\n * from the composer's attachment list using the provided component configuration.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.AttachmentByIndex\n *   index={0}\n *   components={{\n *     Image: MyImageAttachment,\n *     Document: MyDocumentAttachment\n *   }}\n * />\n * ```\n */\nexport const ComposerPrimitiveAttachmentByIndex: FC<ComposerPrimitiveAttachmentByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <ComposerAttachmentByIndexProvider index={index}>\n          <AttachmentComponent components={components} />\n        </ComposerAttachmentByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.components?.Image === next.components?.Image &&\n      prev.components?.Document === next.components?.Document &&\n      prev.components?.File === next.components?.File &&\n      prev.components?.Attachment === next.components?.Attachment,\n  );\n\nComposerPrimitiveAttachmentByIndex.displayName =\n  \"ComposerPrimitive.AttachmentByIndex\";\n\nexport const ComposerPrimitiveAttachments: FC<\n  ComposerPrimitiveAttachments.Props\n> = ({ components }) => {\n  const attachmentsCount = useAuiState((s) => s.composer.attachments.length);\n\n  const attachmentElements = useMemo(() => {\n    return Array.from({ length: attachmentsCount }, (_, index) => (\n      <ComposerPrimitiveAttachmentByIndex\n        key={index}\n        index={index}\n        components={components}\n      />\n    ));\n  }, [attachmentsCount, components]);\n\n  return attachmentElements;\n};\n\nComposerPrimitiveAttachments.displayName = \"ComposerPrimitive.Attachments\";\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AACA;;;AALA;;;;AAoBA,MAAM,eAAe,CACnB,YACA;IAEA,MAAM,OAAO,WAAW,IAAI;IAC5B,OAAQ;QACN,KAAK;YACH,OAAO,YAAY,SAAS,YAAY;QAC1C,KAAK;YACH,OAAO,YAAY,YAAY,YAAY;QAC7C,KAAK;YACH,OAAO,YAAY,QAAQ,YAAY;QACzC;YACE,MAAM,mBAA0B;YAChC,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,kBAAkB;IAClE;AACF;AAEA,MAAM,sBAED,CAAC,EAAE,UAAU,EAAE;;IAClB,MAAM,aAAa,IAAA,kKAAW;uDAAC,CAAC,EAAE,UAAU,EAAE,GAAK;;IACnD,IAAI,CAAC,YAAY,OAAO;IAExB,MAAM,YAAY,aAAa,YAAY;IAC3C,IAAI,CAAC,WAAW,OAAO;IACvB,qBAAO,sYAAC;;;;;AACV;GATM;;QAGe,kKAAW;;;KAH1B;AAmCC,MAAM,mDACX,IAAA,8WAAI,EACF,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE;IACpB,qBACE,sYAAC,kOAAiC;QAAC,OAAO;kBACxC,cAAA,sYAAC;YAAoB,YAAY;;;;;;;;;;;AAGvC,GACA,CAAC,MAAM,OACL,KAAK,KAAK,KAAK,KAAK,KAAK,IACzB,KAAK,UAAU,EAAE,UAAU,KAAK,UAAU,EAAE,SAC5C,KAAK,UAAU,EAAE,aAAa,KAAK,UAAU,EAAE,YAC/C,KAAK,UAAU,EAAE,SAAS,KAAK,UAAU,EAAE,QAC3C,KAAK,UAAU,EAAE,eAAe,KAAK,UAAU,EAAE;MAd1C;AAiBb,mCAAmC,WAAW,GAC5C;AAEK,MAAM,+BAET,CAAC,EAAE,UAAU,EAAE;;IACjB,MAAM,mBAAmB,IAAA,kKAAW;sEAAC,CAAC,IAAM,EAAE,QAAQ,CAAC,WAAW,CAAC,MAAM;;IAEzE,MAAM,qBAAqB,IAAA,iXAAO;oEAAC;YACjC,OAAO,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAiB;4EAAG,CAAC,GAAG,sBAClD,sYAAC;wBAEC,OAAO;wBACP,YAAY;uBAFP;;;;;;QAKX;mEAAG;QAAC;QAAkB;KAAW;IAEjC,OAAO;AACT;IAhBa;;QAGc,kKAAW;;;MAHzB;AAkBb,6BAA6B,WAAW,GAAG"}},
    {"offset": {"line": 4436, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-attachment-dropzone.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef, useCallback, useState } from \"react\";\n\nimport { Slot } from \"@radix-ui/react-slot\";\nimport React from \"react\";\nimport { useAui } from \"@creatorem/ai-store\";\n\nexport namespace ComposerPrimitiveAttachmentDropzone {\n  export type Element = HTMLDivElement;\n  export type Props = React.HTMLAttributes<HTMLDivElement> & {\n    asChild?: boolean | undefined;\n    disabled?: boolean | undefined;\n  };\n}\n\nexport const ComposerPrimitiveAttachmentDropzone = forwardRef<\n  HTMLDivElement,\n  ComposerPrimitiveAttachmentDropzone.Props\n>(({ disabled, asChild = false, children, ...rest }, ref) => {\n  const [isDragging, setIsDragging] = useState(false);\n  const aui = useAui();\n\n  const handleDragEnterCapture = useCallback(\n    (e: React.DragEvent) => {\n      if (disabled) return;\n      e.preventDefault();\n      setIsDragging(true);\n    },\n    [disabled],\n  );\n\n  const handleDragOverCapture = useCallback(\n    (e: React.DragEvent) => {\n      if (disabled) return;\n      e.preventDefault();\n      if (!isDragging) setIsDragging(true);\n    },\n    [disabled, isDragging],\n  );\n\n  const handleDragLeaveCapture = useCallback(\n    (e: React.DragEvent) => {\n      if (disabled) return;\n      e.preventDefault();\n      const next = e.relatedTarget as Node | null;\n      if (next && e.currentTarget.contains(next)) {\n        return;\n      }\n      setIsDragging(false);\n    },\n    [disabled],\n  );\n\n  const handleDrop = useCallback(\n    async (e: React.DragEvent) => {\n      if (disabled) return;\n      e.preventDefault();\n      setIsDragging(false);\n      for (const file of e.dataTransfer.files) {\n        try {\n          await aui.composer().addAttachment(file);\n        } catch (error) {\n          console.error(\"Failed to add attachment:\", error);\n        }\n      }\n    },\n    [disabled, aui],\n  );\n\n  const dragProps = {\n    onDragEnterCapture: handleDragEnterCapture,\n    onDragOverCapture: handleDragOverCapture,\n    onDragLeaveCapture: handleDragLeaveCapture,\n    onDropCapture: handleDrop,\n  };\n\n  const Comp = asChild ? Slot : \"div\";\n\n  return (\n    <Comp\n      {...(isDragging ? { \"data-dragging\": \"true\" } : null)}\n      ref={ref}\n      {...dragProps}\n      {...rest}\n    >\n      {children}\n    </Comp>\n  );\n});\n\nComposerPrimitiveAttachmentDropzone.displayName =\n  \"ComposerPrimitive.AttachmentDropzone\";\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAEA;;;AANA;;;;AAgBO,MAAM,oDAAsC,GAAA,IAAA,oXAAU,UAG3D,CAAC,EAAE,QAAQ,EAAE,UAAU,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,EAAE;;IACnD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kXAAQ,EAAC;IAC7C,MAAM,MAAM,IAAA,oJAAM;IAElB,MAAM,yBAAyB,IAAA,qXAAW;mFACxC,CAAC;YACC,IAAI,UAAU;YACd,EAAE,cAAc;YAChB,cAAc;QAChB;kFACA;QAAC;KAAS;IAGZ,MAAM,wBAAwB,IAAA,qXAAW;kFACvC,CAAC;YACC,IAAI,UAAU;YACd,EAAE,cAAc;YAChB,IAAI,CAAC,YAAY,cAAc;QACjC;iFACA;QAAC;QAAU;KAAW;IAGxB,MAAM,yBAAyB,IAAA,qXAAW;mFACxC,CAAC;YACC,IAAI,UAAU;YACd,EAAE,cAAc;YAChB,MAAM,OAAO,EAAE,aAAa;YAC5B,IAAI,QAAQ,EAAE,aAAa,CAAC,QAAQ,CAAC,OAAO;gBAC1C;YACF;YACA,cAAc;QAChB;kFACA;QAAC;KAAS;IAGZ,MAAM,aAAa,IAAA,qXAAW;uEAC5B,OAAO;YACL,IAAI,UAAU;YACd,EAAE,cAAc;YAChB,cAAc;YACd,KAAK,MAAM,QAAQ,EAAE,YAAY,CAAC,KAAK,CAAE;gBACvC,IAAI;oBACF,MAAM,IAAI,QAAQ,GAAG,aAAa,CAAC;gBACrC,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,6BAA6B;gBAC7C;YACF;QACF;sEACA;QAAC;QAAU;KAAI;IAGjB,MAAM,YAAY;QAChB,oBAAoB;QACpB,mBAAmB;QACnB,oBAAoB;QACpB,eAAe;IACjB;IAEA,MAAM,OAAO,UAAU,gTAAI,GAAG;IAE9B,qBACE,sYAAC;QACE,GAAI,aAAa;YAAE,iBAAiB;QAAO,IAAI,IAAI;QACpD,KAAK;QACJ,GAAG,SAAS;QACZ,GAAG,IAAI;kBAEP;;;;;;AAGP;;QApEc,oJAAM;;;;QAAN,oJAAM;;;;AAsEpB,oCAAoC,WAAW,GAC7C"}},
    {"offset": {"line": 4544, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-dictate.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useAui, useAuiState } from \"@creatorem/ai-store\";\nimport type {\n  ActionButtonElement,\n  ActionButtonProps,\n} from \"../../utils/create-action-button\";\nimport { createActionButton } from \"../../utils/create-action-button\";\n\nconst useComposerDictate = () => {\n  const aui = useAui();\n  const disabled = useAuiState(\n    ({ thread, composer }) =>\n      composer.dictation != null ||\n      !thread.capabilities.dictation ||\n      !composer.isEditing,\n  );\n\n  const callback = useCallback(() => {\n    aui.composer().startDictation();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveDictate {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useComposerDictate>;\n}\n\n/**\n * A button that starts dictation to convert voice to text.\n *\n * Requires a DictationAdapter to be configured in the runtime.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.Dictate>\n *   <MicIcon />\n * </ComposerPrimitive.Dictate>\n * ```\n */\nexport const ComposerPrimitiveDictate = createActionButton(\n  \"ComposerPrimitive.Dictate\",\n  useComposerDictate,\n);\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAKA;;AARA;;;;AAUA,MAAM,qBAAqB;;IACzB,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,WAAW,IAAA,kKAAW;oDAC1B,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE,GACnB,SAAS,SAAS,IAAI,QACtB,CAAC,OAAO,YAAY,CAAC,SAAS,IAC9B,CAAC,SAAS,SAAS;;IAGvB,MAAM,WAAW,IAAA,qXAAW;oDAAC;YAC3B,IAAI,QAAQ,GAAG,cAAc;QAC/B;mDAAG;QAAC;KAAI;IAER,IAAI,UAAU,OAAO;IACrB,OAAO;AACT;GAfM;;QACQ,oJAAM;QACD,kKAAW;;;AAgCvB,MAAM,2BAA2B,IAAA,yLAAkB,EACxD,6BACA"}},
    {"offset": {"line": 4587, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-stop-dictation.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useAui } from \"@creatorem/ai-store\";\nimport type {\n  ActionButtonElement,\n  ActionButtonProps,\n} from \"../../utils/create-action-button\";\nimport { createActionButton } from \"../../utils/create-action-button\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nconst useComposerStopDictation = () => {\n  const aui = useAui();\n  const isDictating = useAuiState(({ composer }) => composer.dictation != null);\n\n  const callback = useCallback(() => {\n    aui.composer().stopDictation();\n  }, [aui]);\n\n  if (!isDictating) return null;\n  return callback;\n};\n\nexport namespace ComposerPrimitiveStopDictation {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useComposerStopDictation>;\n}\n\n/**\n * A button that stops the current dictation session.\n *\n * Only rendered when dictation is active.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.StopDictation>\n *   <StopIcon />\n * </ComposerPrimitive.StopDictation>\n * ```\n */\nexport const ComposerPrimitiveStopDictation = createActionButton(\n  \"ComposerPrimitive.StopDictation\",\n  useComposerStopDictation,\n);\n"],"names":[],"mappings":";;;;AAEA;AACA;AAKA;AACA;;AATA;;;;;AAWA,MAAM,2BAA2B;;IAC/B,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,cAAc,IAAA,kKAAW;6DAAC,CAAC,EAAE,QAAQ,EAAE,GAAK,SAAS,SAAS,IAAI;;IAExE,MAAM,WAAW,IAAA,qXAAW;0DAAC;YAC3B,IAAI,QAAQ,GAAG,aAAa;QAC9B;yDAAG;QAAC;KAAI;IAER,IAAI,CAAC,aAAa,OAAO;IACzB,OAAO;AACT;GAVM;;QACQ,oJAAM;QACE,kKAAW;;;AA2B1B,MAAM,iCAAiC,IAAA,yLAAkB,EAC9D,mCACA"}},
    {"offset": {"line": 4631, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-dictation-transcript.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nexport namespace ComposerPrimitiveDictationTranscript {\n  export type Element = ComponentRef<typeof Primitive.span>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.span>;\n}\n\n/**\n * Renders the current interim (partial) transcript while dictation is active.\n *\n * This component displays real-time feedback of what the user is saying before\n * the transcription is finalized and committed to the composer input.\n *\n * @example\n * ```tsx\n * <ComposerPrimitive.If dictation>\n *   <div className=\"dictation-preview\">\n *     <ComposerPrimitive.DictationTranscript />\n *   </div>\n * </ComposerPrimitive.If>\n * ```\n */\nexport const ComposerPrimitiveDictationTranscript = forwardRef<\n  ComposerPrimitiveDictationTranscript.Element,\n  ComposerPrimitiveDictationTranscript.Props\n>(({ children, ...props }, forwardRef) => {\n  const transcript = useAuiState(\n    ({ composer }) => composer.dictation?.transcript,\n  );\n\n  if (!transcript) return null;\n\n  return (\n    <Primitive.span {...props} ref={forwardRef}>\n      {children ?? transcript}\n    </Primitive.span>\n  );\n});\n\nComposerPrimitiveDictationTranscript.displayName =\n  \"ComposerPrimitive.DictationTranscript\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AA0BO,MAAM,qDAAuC,GAAA,IAAA,oXAAU,UAG5D,CAAC,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IACzB,MAAM,aAAa,IAAA,kKAAW;wEAC5B,CAAC,EAAE,QAAQ,EAAE,GAAK,SAAS,SAAS,EAAE;;IAGxC,IAAI,CAAC,YAAY,OAAO;IAExB,qBACE,sYAAC,sYAAS,CAAC,IAAI;QAAE,GAAG,KAAK;QAAE,KAAK;kBAC7B,YAAY;;;;;;AAGnB;;QAXqB,kKAAW;;;;QAAX,kKAAW;;;;AAahC,qCAAqC,WAAW,GAC9C"}},
    {"offset": {"line": 4681, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/composer/composer-if.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport type { RequireAtLeastOne } from \"../../utils/require-at-least-one\";\n\ntype ComposerIfFilters = {\n  /** Whether the composer is in editing mode */\n  editing: boolean | undefined;\n  /** Whether dictation is currently active */\n  dictation: boolean | undefined;\n};\n\nexport type UseComposerIfProps = RequireAtLeastOne<ComposerIfFilters>;\n\nconst useComposerIf = (props: UseComposerIfProps) => {\n  return useAuiState(({ composer }) => {\n    if (props.editing === true && !composer.isEditing) return false;\n    if (props.editing === false && composer.isEditing) return false;\n\n    const isDictating = composer.dictation != null;\n    if (props.dictation === true && !isDictating) return false;\n    if (props.dictation === false && isDictating) return false;\n\n    return true;\n  });\n};\n\nexport namespace ComposerPrimitiveIf {\n  export type Props = PropsWithChildren<UseComposerIfProps>;\n}\n\n/**\n * @deprecated Use `<AuiIf condition={({ composer }) => ...} />` instead.\n */\nexport const ComposerPrimitiveIf: FC<ComposerPrimitiveIf.Props> = ({\n  children,\n  ...query\n}) => {\n  const result = useComposerIf(query);\n  return result ? children : null;\n};\n\nComposerPrimitiveIf.displayName = \"ComposerPrimitive.If\";\n"],"names":[],"mappings":";;;;AAGA;;AAHA;;AAeA,MAAM,gBAAgB,CAAC;;IACrB,OAAO,IAAA,kKAAW;qCAAC,CAAC,EAAE,QAAQ,EAAE;YAC9B,IAAI,MAAM,OAAO,KAAK,QAAQ,CAAC,SAAS,SAAS,EAAE,OAAO;YAC1D,IAAI,MAAM,OAAO,KAAK,SAAS,SAAS,SAAS,EAAE,OAAO;YAE1D,MAAM,cAAc,SAAS,SAAS,IAAI;YAC1C,IAAI,MAAM,SAAS,KAAK,QAAQ,CAAC,aAAa,OAAO;YACrD,IAAI,MAAM,SAAS,KAAK,SAAS,aAAa,OAAO;YAErD,OAAO;QACT;;AACF;GAXM;;QACG,kKAAW;;;AAmBb,MAAM,sBAAqD,CAAC,EACjE,QAAQ,EACR,GAAG,OACJ;;IACC,MAAM,SAAS,cAAc;IAC7B,OAAO,SAAS,WAAW;AAC7B;IANa;;QAII;;;KAJJ;AAQb,oBAAoB,WAAW,GAAG"}},
    {"offset": {"line": 4779, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 4796, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/utils/hooks/use-managed-ref.ts"],"sourcesContent":["import { useCallback, useRef } from \"react\";\n\nexport const useManagedRef = <TNode>(\n  callback: (node: TNode) => (() => void) | void,\n) => {\n  const cleanupRef = useRef<(() => void) | void>(undefined);\n\n  const ref = useCallback(\n    (el: TNode | null) => {\n      // Call the previous cleanup function\n      if (cleanupRef.current) {\n        cleanupRef.current();\n      }\n\n      // Call the new callback and store its cleanup function\n      if (el) {\n        cleanupRef.current = callback(el);\n      }\n    },\n    [callback],\n  );\n\n  return ref;\n};\n"],"names":[],"mappings":";;;;AAAA;;;AAEO,MAAM,gBAAgB,CAC3B;;IAEA,MAAM,aAAa,IAAA,gXAAM,EAAsB;IAE/C,MAAM,MAAM,IAAA,qXAAW;0CACrB,CAAC;YACC,qCAAqC;YACrC,IAAI,WAAW,OAAO,EAAE;gBACtB,WAAW,OAAO;YACpB;YAEA,uDAAuD;YACvD,IAAI,IAAI;gBACN,WAAW,OAAO,GAAG,SAAS;YAChC;QACF;yCACA;QAAC;KAAS;IAGZ,OAAO;AACT;GArBa"}},
    {"offset": {"line": 4830, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/utils/hooks/use-size-handle.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useManagedRef } from \"./use-managed-ref\";\nimport type { SizeHandle } from \"../../context/stores/thread-viewport\";\n\n/**\n * Hook that creates a ref for tracking element size via a SizeHandle.\n * Automatically sets up ResizeObserver and reports height changes.\n *\n * @param register - Function that returns a SizeHandle (e.g., registerContentInset)\n * @param getHeight - Optional function to compute height (defaults to el.offsetHeight)\n * @returns A ref callback to attach to the element\n */\nexport const useSizeHandle = (\n  register: (() => SizeHandle) | null | undefined,\n  getHeight?: (el: HTMLElement) => number,\n) => {\n  const callbackRef = useCallback(\n    (el: HTMLElement) => {\n      if (!register) return;\n\n      const sizeHandle = register();\n\n      const updateHeight = () => {\n        const height = getHeight ? getHeight(el) : el.offsetHeight;\n        sizeHandle.setHeight(height);\n      };\n\n      const ro = new ResizeObserver(updateHeight);\n      ro.observe(el);\n      updateHeight();\n\n      return () => {\n        ro.disconnect();\n        sizeHandle.unregister();\n      };\n    },\n    [register, getHeight],\n  );\n\n  return useManagedRef(callbackRef);\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAcO,MAAM,gBAAgB,CAC3B,UACA;;IAEA,MAAM,cAAc,IAAA,qXAAW;kDAC7B,CAAC;YACC,IAAI,CAAC,UAAU;YAEf,MAAM,aAAa;YAEnB,MAAM;uEAAe;oBACnB,MAAM,SAAS,YAAY,UAAU,MAAM,GAAG,YAAY;oBAC1D,WAAW,SAAS,CAAC;gBACvB;;YAEA,MAAM,KAAK,IAAI,eAAe;YAC9B,GAAG,OAAO,CAAC;YACX;YAEA;0DAAO;oBACL,GAAG,UAAU;oBACb,WAAW,UAAU;gBACvB;;QACF;iDACA;QAAC;QAAU;KAAU;IAGvB,OAAO,IAAA,uLAAa,EAAC;AACvB;GA5Ba;;QA2BJ,uLAAa"}},
    {"offset": {"line": 4880, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-viewport-slack.tsx"],"sourcesContent":["\"use client\";\n\nimport { Slot } from \"@radix-ui/react-slot\";\nimport {\n  createContext,\n  type FC,\n  type ReactNode,\n  useCallback,\n  useContext,\n} from \"react\";\nimport { useThreadViewportStore } from \"../../context/react/thread-viewport-context\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport { useManagedRef } from \"../../utils/hooks/use-managed-ref\";\n\nconst SlackNestingContext = createContext(false);\n\nconst parseCssLength = (value: string, element: HTMLElement): number => {\n  const match = value.match(/^([\\d.]+)(em|px|rem)$/);\n  if (!match) return 0;\n\n  const num = parseFloat(match[1]!);\n  const unit = match[2];\n\n  if (unit === \"px\") return num;\n  if (unit === \"em\") {\n    const fontSize = parseFloat(getComputedStyle(element).fontSize) || 16;\n    return num * fontSize;\n  }\n  if (unit === \"rem\") {\n    const rootFontSize =\n      parseFloat(getComputedStyle(document.documentElement).fontSize) || 16;\n    return num * rootFontSize;\n  }\n  return 0;\n};\n\nexport type ThreadViewportSlackProps = {\n  /** Threshold at which the user message height clamps to the offset */\n  fillClampThreshold?: string;\n  /** Offset used when clamping large user messages */\n  fillClampOffset?: string;\n  children: ReactNode;\n};\n\n/**\n * A slot component that provides minimum height to enable scroll anchoring.\n *\n * When using `turnAnchor=\"top\"`, this component ensures there is\n * enough scroll room below the anchor point (last user message) for it to scroll\n * to the top of the viewport. The min-height is applied only to the last\n * assistant message.\n *\n * This component is used internally by MessagePrimitive.Root.\n */\nexport const ThreadPrimitiveViewportSlack: FC<ThreadViewportSlackProps> = ({\n  children,\n  fillClampThreshold = \"10em\",\n  fillClampOffset = \"6em\",\n}) => {\n  const shouldApplySlack = useAuiState(\n    // only add slack to the last assistant message following a user message (valid turn)\n    ({ thread, message }) =>\n      message.isLast &&\n      message.role === \"assistant\" &&\n      message.index >= 1 &&\n      thread.messages.at(message.index - 1)?.role === \"user\",\n  );\n  const threadViewportStore = useThreadViewportStore({ optional: true });\n  const isNested = useContext(SlackNestingContext);\n\n  const callback = useCallback(\n    (el: HTMLElement) => {\n      if (!threadViewportStore || isNested) return;\n\n      const updateMinHeight = () => {\n        const state = threadViewportStore.getState();\n        if (state.turnAnchor === \"top\" && shouldApplySlack) {\n          const { viewport, inset, userMessage } = state.height;\n          const threshold = parseCssLength(fillClampThreshold, el);\n          const offset = parseCssLength(fillClampOffset, el);\n          const clampAdjustment =\n            userMessage <= threshold ? userMessage : offset;\n\n          const minHeight = Math.max(0, viewport - inset - clampAdjustment);\n          el.style.minHeight = `${minHeight}px`;\n          el.style.flexShrink = \"0\";\n          el.style.transition = \"min-height 0s\";\n        } else {\n          el.style.minHeight = \"\";\n          el.style.flexShrink = \"\";\n          el.style.transition = \"\";\n        }\n      };\n\n      updateMinHeight();\n      return threadViewportStore.subscribe(updateMinHeight);\n    },\n    [\n      threadViewportStore,\n      shouldApplySlack,\n      isNested,\n      fillClampThreshold,\n      fillClampOffset,\n    ],\n  );\n\n  const ref = useManagedRef<HTMLElement>(callback);\n\n  return (\n    <SlackNestingContext.Provider value={true}>\n      <Slot ref={ref}>{children}</Slot>\n    </SlackNestingContext.Provider>\n  );\n};\n\nThreadPrimitiveViewportSlack.displayName = \"ThreadPrimitive.ViewportSlack\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAOA;AACA;AACA;;;AAZA;;;;;;AAcA,MAAM,oCAAsB,IAAA,uXAAa,EAAC;AAE1C,MAAM,iBAAiB,CAAC,OAAe;IACrC,MAAM,QAAQ,MAAM,KAAK,CAAC;IAC1B,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,MAAM,WAAW,KAAK,CAAC,EAAE;IAC/B,MAAM,OAAO,KAAK,CAAC,EAAE;IAErB,IAAI,SAAS,MAAM,OAAO;IAC1B,IAAI,SAAS,MAAM;QACjB,MAAM,WAAW,WAAW,iBAAiB,SAAS,QAAQ,KAAK;QACnE,OAAO,MAAM;IACf;IACA,IAAI,SAAS,OAAO;QAClB,MAAM,eACJ,WAAW,iBAAiB,SAAS,eAAe,EAAE,QAAQ,KAAK;QACrE,OAAO,MAAM;IACf;IACA,OAAO;AACT;AAoBO,MAAM,+BAA6D,CAAC,EACzE,QAAQ,EACR,qBAAqB,MAAM,EAC3B,kBAAkB,KAAK,EACxB;;IACC,MAAM,mBAAmB,IAAA,kKAAW;sEAElC,AADA,qFAAqF;QACrF,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,GAClB,QAAQ,MAAM,IACd,QAAQ,IAAI,KAAK,eACjB,QAAQ,KAAK,IAAI,KACjB,OAAO,QAAQ,CAAC,EAAE,CAAC,QAAQ,KAAK,GAAG,IAAI,SAAS;;IAEpD,MAAM,sBAAsB,IAAA,0MAAsB,EAAC;QAAE,UAAU;IAAK;IACpE,MAAM,WAAW,IAAA,oXAAU,EAAC;IAE5B,MAAM,WAAW,IAAA,qXAAW;8DAC1B,CAAC;YACC,IAAI,CAAC,uBAAuB,UAAU;YAEtC,MAAM;sFAAkB;oBACtB,MAAM,QAAQ,oBAAoB,QAAQ;oBAC1C,IAAI,MAAM,UAAU,KAAK,SAAS,kBAAkB;wBAClD,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,MAAM,MAAM;wBACrD,MAAM,YAAY,eAAe,oBAAoB;wBACrD,MAAM,SAAS,eAAe,iBAAiB;wBAC/C,MAAM,kBACJ,eAAe,YAAY,cAAc;wBAE3C,MAAM,YAAY,KAAK,GAAG,CAAC,GAAG,WAAW,QAAQ;wBACjD,GAAG,KAAK,CAAC,SAAS,GAAG,GAAG,UAAU,EAAE,CAAC;wBACrC,GAAG,KAAK,CAAC,UAAU,GAAG;wBACtB,GAAG,KAAK,CAAC,UAAU,GAAG;oBACxB,OAAO;wBACL,GAAG,KAAK,CAAC,SAAS,GAAG;wBACrB,GAAG,KAAK,CAAC,UAAU,GAAG;wBACtB,GAAG,KAAK,CAAC,UAAU,GAAG;oBACxB;gBACF;;YAEA;YACA,OAAO,oBAAoB,SAAS,CAAC;QACvC;6DACA;QACE;QACA;QACA;QACA;QACA;KACD;IAGH,MAAM,MAAM,IAAA,uLAAa,EAAc;IAEvC,qBACE,sYAAC,oBAAoB,QAAQ;QAAC,OAAO;kBACnC,cAAA,sYAAC,gTAAI;YAAC,KAAK;sBAAM;;;;;;;;;;;AAGvB;GA3Da;;QAKc,kKAAW;QAQR,0MAAsB;QAuCtC,uLAAa;;;KApDd;AA6Db,6BAA6B,WAAW,GAAG"}},
    {"offset": {"line": 4992, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message/message-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  useCallback,\n} from \"react\";\nimport { useAui, useAuiState } from \"@creatorem/ai-store\";\nimport { useManagedRef } from \"../../utils/hooks/use-managed-ref\";\nimport { useSizeHandle } from \"../../utils/hooks/use-size-handle\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useThreadViewport } from \"../../context/react/thread-viewport-context\";\nimport { ThreadPrimitiveViewportSlack } from \"../thread/thread-viewport-slack\";\n\nconst useIsHoveringRef = () => {\n  const aui = useAui();\n  const message = useAuiState(() => aui.message());\n\n  const callbackRef = useCallback(\n    (el: HTMLElement) => {\n      const handleMouseEnter = () => {\n        message.setIsHovering(true);\n      };\n      const handleMouseLeave = () => {\n        message.setIsHovering(false);\n      };\n\n      el.addEventListener(\"mouseenter\", handleMouseEnter);\n      el.addEventListener(\"mouseleave\", handleMouseLeave);\n\n      if (el.matches(\":hover\")) {\n        // TODO this is needed for SSR to work, figure out why\n        queueMicrotask(() => message.setIsHovering(true));\n      }\n\n      return () => {\n        el.removeEventListener(\"mouseenter\", handleMouseEnter);\n        el.removeEventListener(\"mouseleave\", handleMouseLeave);\n        message.setIsHovering(false);\n      };\n    },\n    [message],\n  );\n\n  return useManagedRef(callbackRef);\n};\n\n/**\n * Hook that registers the anchor user message as a content inset.\n * Only registers if: user message, at index messages.length-2, and last message is assistant.\n */\nconst useMessageViewportRef = () => {\n  const turnAnchor = useThreadViewport((s) => s.turnAnchor);\n  const registerUserHeight = useThreadViewport(\n    (s) => s.registerUserMessageHeight,\n  );\n\n  // inset rules:\n  // - the previous user message before the last assistant message registers its full height\n  const shouldRegisterAsInset = useAuiState(\n    ({ thread, message }) =>\n      turnAnchor === \"top\" &&\n      message.role === \"user\" &&\n      message.index === thread.messages.length - 2 &&\n      thread.messages.at(-1)?.role === \"assistant\",\n  );\n\n  const getHeight = useCallback((el: HTMLElement) => el.offsetHeight, []);\n\n  return useSizeHandle(\n    shouldRegisterAsInset ? registerUserHeight : null,\n    getHeight,\n  );\n};\n\nexport namespace MessagePrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  /**\n   * Props for the MessagePrimitive.Root component.\n   * Accepts all standard div element props.\n   */\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\n/**\n * The root container component for a message.\n *\n * This component provides the foundational wrapper for message content and handles\n * hover state management for the message. It automatically tracks when the user\n * is hovering over the message, which can be used by child components like action bars.\n *\n * When `turnAnchor=\"top\"` is set on the viewport, this component\n * registers itself as the scroll anchor if it's the last user message.\n *\n * @example\n * ```tsx\n * <MessagePrimitive.Root>\n *   <MessagePrimitive.Content />\n *   <ActionBarPrimitive.Root>\n *     <ActionBarPrimitive.Copy />\n *     <ActionBarPrimitive.Edit />\n *   </ActionBarPrimitive.Root>\n * </MessagePrimitive.Root>\n * ```\n */\nexport const MessagePrimitiveRoot = forwardRef<\n  MessagePrimitiveRoot.Element,\n  MessagePrimitiveRoot.Props\n>((props, forwardRef) => {\n  const isHoveringRef = useIsHoveringRef();\n  const anchorUserMessageRef = useMessageViewportRef();\n  const ref = useComposedRefs<HTMLDivElement>(\n    forwardRef,\n    isHoveringRef,\n    anchorUserMessageRef,\n  );\n\n  return (\n    <ThreadPrimitiveViewportSlack>\n      <Primitive.div {...props} ref={ref} />\n    </ThreadPrimitiveViewportSlack>\n  );\n});\n\nMessagePrimitiveRoot.displayName = \"MessagePrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAMA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAdA;;;;;;;;;AAgBA,MAAM,mBAAmB;;IACvB,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,UAAU,IAAA,kKAAW;iDAAC,IAAM,IAAI,OAAO;;IAE7C,MAAM,cAAc,IAAA,qXAAW;qDAC7B,CAAC;YACC,MAAM;8EAAmB;oBACvB,QAAQ,aAAa,CAAC;gBACxB;;YACA,MAAM;8EAAmB;oBACvB,QAAQ,aAAa,CAAC;gBACxB;;YAEA,GAAG,gBAAgB,CAAC,cAAc;YAClC,GAAG,gBAAgB,CAAC,cAAc;YAElC,IAAI,GAAG,OAAO,CAAC,WAAW;gBACxB,sDAAsD;gBACtD;iEAAe,IAAM,QAAQ,aAAa,CAAC;;YAC7C;YAEA;6DAAO;oBACL,GAAG,mBAAmB,CAAC,cAAc;oBACrC,GAAG,mBAAmB,CAAC,cAAc;oBACrC,QAAQ,aAAa,CAAC;gBACxB;;QACF;oDACA;QAAC;KAAQ;IAGX,OAAO,IAAA,uLAAa,EAAC;AACvB;GA/BM;;QACQ,oJAAM;QACF,kKAAW;QA4BpB,uLAAa;;;AAGtB;;;CAGC,GACD,MAAM,wBAAwB;;IAC5B,MAAM,aAAa,IAAA,qMAAiB;+DAAC,CAAC,IAAM,EAAE,UAAU;;IACxD,MAAM,qBAAqB,IAAA,qMAAiB;uEAC1C,CAAC,IAAM,EAAE,yBAAyB;;IAGpC,eAAe;IACf,0FAA0F;IAC1F,MAAM,wBAAwB,IAAA,kKAAW;oEACvC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,GAClB,eAAe,SACf,QAAQ,IAAI,KAAK,UACjB,QAAQ,KAAK,KAAK,OAAO,QAAQ,CAAC,MAAM,GAAG,KAC3C,OAAO,QAAQ,CAAC,EAAE,CAAC,CAAC,IAAI,SAAS;;IAGrC,MAAM,YAAY,IAAA,qXAAW;wDAAC,CAAC,KAAoB,GAAG,YAAY;uDAAE,EAAE;IAEtE,OAAO,IAAA,uLAAa,EAClB,wBAAwB,qBAAqB,MAC7C;AAEJ;IAtBM;;QACe,qMAAiB;QACT,qMAAiB;QAMd,kKAAW;QAUlC,uLAAa;;;AAoCf,MAAM,qCAAuB,IAAA,IAAA,oXAAU,WAG5C,CAAC,OAAO;;IACR,MAAM,gBAAgB;IACtB,MAAM,uBAAuB;IAC7B,MAAM,MAAM,IAAA,iVAAe,EACzB,YACA,eACA;IAGF,qBACE,sYAAC,mNAA4B;kBAC3B,cAAA,sYAAC,sYAAS,CAAC,GAAG;YAAE,GAAG,KAAK;YAAE,KAAK;;;;;;;;;;;AAGrC;;QAbwB;QACO;QACjB,iVAAe;;;;QAFL;QACO;QACjB,iVAAe;;;;AAa7B,qBAAqB,WAAW,GAAG"}},
    {"offset": {"line": 5136, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/providers/part-by-index-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@creatorem/ai-store\";\n\nexport const PartByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n  }>\n> = ({ index, children }) => {\n  const aui = useAui({\n    part: Derived({\n      source: \"message\",\n      query: { type: \"index\", index },\n      get: (aui) => aui.message().part({ index }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;;;AAHA;;AAKO,MAAM,sBAIT,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE;;IACtB,MAAM,MAAM,IAAA,oJAAM,EAAC;QACjB,MAAM,IAAA,iJAAO,EAAC;YACZ,QAAQ;YACR,OAAO;gBAAE,MAAM;gBAAS;YAAM;YAC9B,GAAG;mDAAE,CAAC,MAAQ,IAAI,OAAO,GAAG,IAAI,CAAC;wBAAE;oBAAM;;QAC3C;IACF;IAEA,qBAAO,sYAAC,qLAAW;QAAC,OAAO;kBAAM;;;;;;AACnC;GAda;;QAKC,oJAAM;;;KALP"}},
    {"offset": {"line": 5188, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/providers/text-message-part-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, type ClientOutput } from \"@creatorem/ai-store\";\nimport { PartState } from \"../../types/scopes\";\nimport { resource, tapMemo } from \"@creatorem/ai-tap\";\n\nconst TextMessagePartClient = resource(\n  ({\n    text,\n    isRunning,\n  }: {\n    text: string;\n    isRunning: boolean;\n  }): ClientOutput<\"part\"> => {\n    const state = tapMemo<PartState>(\n      () => ({\n        type: \"text\",\n        text,\n        status: isRunning ? { type: \"running\" } : { type: \"complete\" },\n      }),\n      [text, isRunning],\n    );\n\n    return {\n      state,\n      methods: {\n        getState: () => state,\n        addToolResult: () => {\n          throw new Error(\"Not supported\");\n        },\n        resumeToolCall: () => {\n          throw new Error(\"Not supported\");\n        },\n      },\n    };\n  },\n);\n\nexport const TextMessagePartProvider: FC<\n  PropsWithChildren<{\n    text: string;\n    isRunning?: boolean;\n  }>\n> = ({ text, isRunning = false, children }) => {\n  const aui = useAui({\n    part: TextMessagePartClient({ text, isRunning }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAEA;AAAA;;;AALA;;;AAOA,MAAM,wBAAwB,IAAA,yJAAQ,OACpC,CAAC,EACC,IAAI,EACJ,SAAS,EAIV;IACC,MAAM,QAAQ,IAAA,4JAAO,EACnB,IAAM,CAAC;YACL,MAAM;YACN;YACA,QAAQ,YAAY;gBAAE,MAAM;YAAU,IAAI;gBAAE,MAAM;YAAW;QAC/D,CAAC,GACD;QAAC;QAAM;KAAU;IAGnB,OAAO;QACL;QACA,SAAS;YACP,UAAU,IAAM;YAChB,eAAe;gBACb,MAAM,IAAI,MAAM;YAClB;YACA,gBAAgB;gBACd,MAAM,IAAI,MAAM;YAClB;QACF;IACF;AACF;;AAGK,MAAM,0BAKT,CAAC,EAAE,IAAI,EAAE,YAAY,KAAK,EAAE,QAAQ,EAAE;;IACxC,MAAM,MAAM,IAAA,oJAAM,EAAC;QACjB,MAAM,sBAAsB;YAAE;YAAM;QAAU;IAChD;IAEA,qBAAO,sYAAC,qLAAW;QAAC,OAAO;kBAAM;;;;;;AACnC;GAXa;;QAMC,oJAAM;;;MANP"}},
    {"offset": {"line": 5263, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message-part/use-message-part-text.tsx"],"sourcesContent":["\"use client\";\n\nimport { MessagePartState } from \"../../legacy-runtime/runtime/message-part-runtime\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport { TextMessagePart, ReasoningMessagePart } from \"../../types\";\n\nexport const useMessagePartText = () => {\n  const text = useAuiState(({ part }) => {\n    if (part.type !== \"text\" && part.type !== \"reasoning\")\n      throw new Error(\n        \"MessagePartText can only be used inside text or reasoning message parts.\",\n      );\n\n    return part as MessagePartState & (TextMessagePart | ReasoningMessagePart);\n  });\n\n  return text;\n};\n"],"names":[],"mappings":";;;;AAGA;;AAHA;;AAMO,MAAM,qBAAqB;;IAChC,MAAM,OAAO,IAAA,kKAAW;gDAAC,CAAC,EAAE,IAAI,EAAE;YAChC,IAAI,KAAK,IAAI,KAAK,UAAU,KAAK,IAAI,KAAK,aACxC,MAAM,IAAI,MACR;YAGJ,OAAO;QACT;;IAEA,OAAO;AACT;GAXa;;QACE,kKAAW"}},
    {"offset": {"line": 5293, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/utils/smooth/smooth-context.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ComponentType,\n  createContext,\n  FC,\n  forwardRef,\n  PropsWithChildren,\n  useContext,\n  useState,\n} from \"react\";\nimport { ReadonlyStore } from \"../../context/readonly-store\";\nimport { create, UseBoundStore } from \"zustand\";\nimport {\n  MessagePartStatus,\n  ToolCallMessagePartStatus,\n} from \"../../types/assistant-types\";\nimport { useAui } from \"@creatorem/ai-store\";\nimport { createContextStoreHook } from \"../../context/react/utils/create-context-store-hook\";\n\ntype SmoothContextValue = {\n  useSmoothStatus: UseBoundStore<\n    ReadonlyStore<MessagePartStatus | ToolCallMessagePartStatus>\n  >;\n};\n\nconst SmoothContext = createContext<SmoothContextValue | null>(null);\n\nconst makeSmoothContext = (\n  initialState: MessagePartStatus | ToolCallMessagePartStatus,\n) => {\n  const useSmoothStatus = create(() => initialState);\n  return { useSmoothStatus };\n};\n\nexport const SmoothContextProvider: FC<PropsWithChildren> = ({ children }) => {\n  const outer = useSmoothContext({ optional: true });\n  const aui = useAui();\n\n  const [context] = useState(() =>\n    makeSmoothContext(aui.part().getState().status),\n  );\n\n  // do not wrap if there is an outer SmoothContextProvider\n  if (outer) return children;\n\n  return (\n    <SmoothContext.Provider value={context}>{children}</SmoothContext.Provider>\n  );\n};\n\nexport const withSmoothContextProvider = <C extends ComponentType<any>>(\n  Component: C,\n): C => {\n  const Wrapped = forwardRef((props, ref) => {\n    return (\n      <SmoothContextProvider>\n        <Component {...(props as any)} ref={ref} />\n      </SmoothContextProvider>\n    );\n  });\n  Wrapped.displayName = Component.displayName;\n  return Wrapped as any;\n};\n\nfunction useSmoothContext(options?: {\n  optional?: false | undefined;\n}): SmoothContextValue;\nfunction useSmoothContext(options?: {\n  optional?: boolean | undefined;\n}): SmoothContextValue | null;\nfunction useSmoothContext(options?: { optional?: boolean | undefined }) {\n  const context = useContext(SmoothContext);\n  if (!options?.optional && !context)\n    throw new Error(\n      \"This component must be used within a SmoothContextProvider.\",\n    );\n  return context;\n}\n\nexport const { useSmoothStatus, useSmoothStatusStore } = createContextStoreHook(\n  useSmoothContext,\n  \"useSmoothStatus\",\n);\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AAUA;AAKA;AACA;;;AAlBA;;;;;AA0BA,MAAM,8BAAgB,IAAA,uXAAa,EAA4B;AAE/D,MAAM,oBAAoB,CACxB;IAEA,MAAM,kBAAkB,IAAA,iWAAM,EAAC,IAAM;IACrC,OAAO;QAAE;IAAgB;AAC3B;AAEO,MAAM,wBAA+C,CAAC,EAAE,QAAQ,EAAE;;IACvE,MAAM,QAAQ,iBAAiB;QAAE,UAAU;IAAK;IAChD,MAAM,MAAM,IAAA,oJAAM;IAElB,MAAM,CAAC,QAAQ,GAAG,IAAA,kXAAQ;0CAAC,IACzB,kBAAkB,IAAI,IAAI,GAAG,QAAQ,GAAG,MAAM;;IAGhD,yDAAyD;IACzD,IAAI,OAAO,OAAO;IAElB,qBACE,sYAAC,cAAc,QAAQ;QAAC,OAAO;kBAAU;;;;;;AAE7C;GAda;;QACG;QACF,oJAAM;;;KAFP;AAgBN,MAAM,4BAA4B,CACvC;IAEA,MAAM,wBAAU,IAAA,oXAAU,EAAC,CAAC,OAAO;QACjC,qBACE,sYAAC;sBACC,cAAA,sYAAC;gBAAW,GAAI,KAAK;gBAAU,KAAK;;;;;;;;;;;IAG1C;IACA,QAAQ,WAAW,GAAG,UAAU,WAAW;IAC3C,OAAO;AACT;AAQA,SAAS,iBAAiB,OAA4C;;IACpE,MAAM,UAAU,IAAA,oXAAU,EAAC;IAC3B,IAAI,CAAC,SAAS,YAAY,CAAC,SACzB,MAAM,IAAI,MACR;IAEJ,OAAO;AACT;IAPS;AASF,MAAM,EAAE,eAAe,EAAE,oBAAoB,EAAE,GAAG,IAAA,wNAAsB,EAC7E,kBACA"}},
    {"offset": {"line": 5386, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/utils/smooth/use-smooth.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport {\n  MessagePartStatus,\n  ReasoningMessagePart,\n  TextMessagePart,\n} from \"../../types/assistant-types\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useSmoothStatusStore } from \"./smooth-context\";\nimport { writableStore } from \"../../context/readonly-store\";\nimport { MessagePartState } from \"../../legacy-runtime/runtime/message-part-runtime\";\n\nclass TextStreamAnimator {\n  private animationFrameId: number | null = null;\n  private lastUpdateTime: number = Date.now();\n\n  public targetText: string = \"\";\n\n  constructor(\n    public currentText: string,\n    private setText: (newText: string) => void,\n  ) {}\n\n  start() {\n    if (this.animationFrameId !== null) return;\n    this.lastUpdateTime = Date.now();\n    this.animate();\n  }\n\n  stop() {\n    if (this.animationFrameId !== null) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n  }\n\n  private animate = () => {\n    const currentTime = Date.now();\n    const deltaTime = currentTime - this.lastUpdateTime;\n    let timeToConsume = deltaTime;\n\n    const remainingChars = this.targetText.length - this.currentText.length;\n    const baseTimePerChar = Math.min(5, 250 / remainingChars);\n\n    let charsToAdd = 0;\n    while (timeToConsume >= baseTimePerChar && charsToAdd < remainingChars) {\n      charsToAdd++;\n      timeToConsume -= baseTimePerChar;\n    }\n\n    if (charsToAdd !== remainingChars) {\n      this.animationFrameId = requestAnimationFrame(this.animate);\n    } else {\n      this.animationFrameId = null;\n    }\n    if (charsToAdd === 0) return;\n\n    this.currentText = this.targetText.slice(\n      0,\n      this.currentText.length + charsToAdd,\n    );\n    this.lastUpdateTime = currentTime - timeToConsume;\n    this.setText(this.currentText);\n  };\n}\n\nconst SMOOTH_STATUS: MessagePartStatus = Object.freeze({\n  type: \"running\",\n});\n\nexport const useSmooth = (\n  state: MessagePartState & (TextMessagePart | ReasoningMessagePart),\n  smooth: boolean = false,\n): MessagePartState & (TextMessagePart | ReasoningMessagePart) => {\n  const { text } = state;\n  const id = useAuiState(({ message }) => message.id);\n\n  const idRef = useRef(id);\n  const [displayedText, setDisplayedText] = useState(text);\n\n  const smoothStatusStore = useSmoothStatusStore({ optional: true });\n  const setText = useCallbackRef((text: string) => {\n    setDisplayedText(text);\n    if (smoothStatusStore) {\n      const target =\n        displayedText !== text || state.status.type === \"running\"\n          ? SMOOTH_STATUS\n          : state.status;\n      writableStore(smoothStatusStore).setState(target, true);\n    }\n  });\n\n  // TODO this is hacky\n  useEffect(() => {\n    if (smoothStatusStore) {\n      const target =\n        smooth && (displayedText !== text || state.status.type === \"running\")\n          ? SMOOTH_STATUS\n          : state.status;\n      writableStore(smoothStatusStore).setState(target, true);\n    }\n  }, [smoothStatusStore, smooth, text, displayedText, state.status]);\n\n  const [animatorRef] = useState<TextStreamAnimator>(\n    new TextStreamAnimator(text, setText),\n  );\n\n  useEffect(() => {\n    if (!smooth) {\n      animatorRef.stop();\n      return;\n    }\n\n    if (idRef.current !== id || !text.startsWith(animatorRef.targetText)) {\n      idRef.current = id;\n      setText(text);\n\n      animatorRef.currentText = text;\n      animatorRef.targetText = text;\n      animatorRef.stop();\n\n      return;\n    }\n\n    animatorRef.targetText = text;\n    animatorRef.start();\n  }, [setText, animatorRef, id, smooth, text]);\n\n  useEffect(() => {\n    return () => {\n      animatorRef.stop();\n    };\n  }, [animatorRef]);\n\n  return useMemo(\n    () =>\n      smooth\n        ? {\n            type: \"text\",\n            text: displayedText,\n            status: text === displayedText ? state.status : SMOOTH_STATUS,\n          }\n        : state,\n    [smooth, displayedText, state, text],\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5550, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message-part/message-part-text.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  ElementType,\n} from \"react\";\nimport { useMessagePartText } from \"./use-message-part-text\";\nimport { useSmooth } from \"../../utils/smooth/use-smooth\";\n\nexport namespace MessagePartPrimitiveText {\n  export type Element = ComponentRef<typeof Primitive.span>;\n  export type Props = Omit<\n    ComponentPropsWithoutRef<typeof Primitive.span>,\n    \"children\" | \"asChild\"\n  > & {\n    /**\n     * Whether to enable smooth text streaming animation.\n     * When enabled, text appears with a typing effect as it streams in.\n     * @default true\n     */\n    smooth?: boolean;\n    /**\n     * The HTML element or React component to render as.\n     * @default \"span\"\n     */\n    component?: ElementType;\n  };\n}\n\n/**\n * Renders the text content of a message part with optional smooth streaming.\n *\n * This component displays text content from the current message part context,\n * with support for smooth streaming animation that shows text appearing\n * character by character as it's generated.\n *\n * @example\n * ```tsx\n * <MessagePartPrimitive.Text\n *   smooth={true}\n *   component=\"p\"\n *   className=\"message-text\"\n * />\n * ```\n */\nexport const MessagePartPrimitiveText = forwardRef<\n  MessagePartPrimitiveText.Element,\n  MessagePartPrimitiveText.Props\n>(({ smooth = true, component: Component = \"span\", ...rest }, forwardedRef) => {\n  const { text, status } = useSmooth(useMessagePartText(), smooth);\n\n  return (\n    <Component data-status={status.type} {...rest} ref={forwardedRef}>\n      {text}\n    </Component>\n  );\n});\n\nMessagePartPrimitiveText.displayName = \"MessagePartPrimitive.Text\";\n"],"names":[],"mappings":";;;;;AAGA;AAMA;AACA;;;AAVA;;;;AAgDO,MAAM,yCAA2B,GAAA,IAAA,oXAAU,UAGhD,CAAC,EAAE,SAAS,IAAI,EAAE,WAAW,YAAY,MAAM,EAAE,GAAG,MAAM,EAAE;;IAC5D,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,6KAAS,EAAC,IAAA,qNAAkB,KAAI;IAEzD,qBACE,sYAAC;QAAU,eAAa,OAAO,IAAI;QAAG,GAAG,IAAI;QAAE,KAAK;kBACjD;;;;;;AAGP;;QAP2B,6KAAS;;;;QAAT,6KAAS;;;;AASpC,yBAAyB,WAAW,GAAG"}},
    {"offset": {"line": 5598, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message-part/use-message-part-image.tsx"],"sourcesContent":["\"use client\";\n\nimport { MessagePartState } from \"../../legacy-runtime/runtime/message-part-runtime\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport { ImageMessagePart } from \"../../types\";\n\nexport const useMessagePartImage = () => {\n  const image = useAuiState(({ part }) => {\n    if (part.type !== \"image\")\n      throw new Error(\n        \"MessagePartImage can only be used inside image message parts.\",\n      );\n\n    return part as MessagePartState & ImageMessagePart;\n  });\n\n  return image;\n};\n"],"names":[],"mappings":";;;;AAGA;;AAHA;;AAMO,MAAM,sBAAsB;;IACjC,MAAM,QAAQ,IAAA,kKAAW;kDAAC,CAAC,EAAE,IAAI,EAAE;YACjC,IAAI,KAAK,IAAI,KAAK,SAChB,MAAM,IAAI,MACR;YAGJ,OAAO;QACT;;IAEA,OAAO;AACT;GAXa;;QACG,kKAAW"}},
    {"offset": {"line": 5628, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message-part/message-part-image.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useMessagePartImage } from \"./use-message-part-image\";\n\nexport namespace MessagePartPrimitiveImage {\n  export type Element = ComponentRef<typeof Primitive.img>;\n  /**\n   * Props for the MessagePartPrimitive.Image component.\n   * Accepts all standard img element props.\n   */\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.img>;\n}\n\n/**\n * Renders an image from the current message part context.\n *\n * This component displays image content from the current message part,\n * automatically setting the src attribute from the message part's image data.\n *\n * @example\n * ```tsx\n * <MessagePartPrimitive.Image\n *   alt=\"Generated image\"\n *   className=\"message-image\"\n *   style={{ maxWidth: '100%' }}\n * />\n * ```\n */\nexport const MessagePartPrimitiveImage = forwardRef<\n  MessagePartPrimitiveImage.Element,\n  MessagePartPrimitiveImage.Props\n>((props, forwardedRef) => {\n  const { image } = useMessagePartImage();\n  return <Primitive.img src={image} {...props} ref={forwardedRef} />;\n});\n\nMessagePartPrimitiveImage.displayName = \"MessagePartPrimitive.Image\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AA8BO,MAAM,0CAA4B,GAAA,IAAA,oXAAU,UAGjD,CAAC,OAAO;;IACR,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,uNAAmB;IACrC,qBAAO,sYAAC,sYAAS,CAAC,GAAG;QAAC,KAAK;QAAQ,GAAG,KAAK;QAAE,KAAK;;;;;;AACpD;;QAFoB,uNAAmB;;;;QAAnB,uNAAmB;;;;AAIvC,0BAA0B,WAAW,GAAG"}},
    {"offset": {"line": 5675, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message-part/message-part-in-progress.tsx"],"sourcesContent":["\"use client\";\n\nimport { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nexport namespace MessagePartPrimitiveInProgress {\n  export type Props = PropsWithChildren;\n}\n\n// TODO should this be renamed to IsRunning?\nexport const MessagePartPrimitiveInProgress: FC<\n  MessagePartPrimitiveInProgress.Props\n> = ({ children }) => {\n  const isInProgress = useAuiState(\n    ({ part }) => part.status.type === \"running\",\n  );\n\n  return isInProgress ? children : null;\n};\n\nMessagePartPrimitiveInProgress.displayName = \"MessagePartPrimitive.InProgress\";\n"],"names":[],"mappings":";;;;AAGA;;AAHA;;AAUO,MAAM,iCAET,CAAC,EAAE,QAAQ,EAAE;;IACf,MAAM,eAAe,IAAA,kKAAW;oEAC9B,CAAC,EAAE,IAAI,EAAE,GAAK,KAAK,MAAM,CAAC,IAAI,KAAK;;IAGrC,OAAO,eAAe,WAAW;AACnC;GARa;;QAGU,kKAAW;;;KAHrB;AAUb,+BAA+B,WAAW,GAAG"}},
    {"offset": {"line": 5706, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message/message-parts.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  type ComponentType,\n  type FC,\n  memo,\n  PropsWithChildren,\n  useMemo,\n} from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\nimport {\n  PartByIndexProvider,\n  TextMessagePartProvider,\n} from \"../../context/providers\";\nimport { MessagePartPrimitiveText } from \"../message-part/message-part-text\";\nimport { MessagePartPrimitiveImage } from \"../message-part/message-part-image\";\nimport type {\n  Unstable_AudioMessagePartComponent,\n  EmptyMessagePartComponent,\n  TextMessagePartComponent,\n  ImageMessagePartComponent,\n  SourceMessagePartComponent,\n  ToolCallMessagePartComponent,\n  ToolCallMessagePartProps,\n  FileMessagePartComponent,\n  ReasoningMessagePartComponent,\n  ReasoningGroupComponent,\n} from \"../../types/message-part-component-types\";\nimport { MessagePartPrimitiveInProgress } from \"../message-part/message-part-in-progress\";\nimport { MessagePartStatus } from \"../../types/assistant-types\";\nimport { useShallow } from \"zustand/shallow\";\n\ntype MessagePartRange =\n  | { type: \"single\"; index: number }\n  | { type: \"toolGroup\"; startIndex: number; endIndex: number }\n  | { type: \"reasoningGroup\"; startIndex: number; endIndex: number };\n\n/**\n * Creates a group state manager for a specific part type.\n * Returns functions to start, end, and finalize groups.\n */\nconst createGroupState = <T extends \"toolGroup\" | \"reasoningGroup\">(\n  groupType: T,\n) => {\n  let start = -1;\n\n  return {\n    startGroup: (index: number) => {\n      if (start === -1) {\n        start = index;\n      }\n    },\n    endGroup: (endIndex: number, ranges: MessagePartRange[]) => {\n      if (start !== -1) {\n        ranges.push({\n          type: groupType,\n          startIndex: start,\n          endIndex,\n        } as MessagePartRange);\n        start = -1;\n      }\n    },\n    finalize: (endIndex: number, ranges: MessagePartRange[]) => {\n      if (start !== -1) {\n        ranges.push({\n          type: groupType,\n          startIndex: start,\n          endIndex,\n        } as MessagePartRange);\n      }\n    },\n  };\n};\n\n/**\n * Groups consecutive tool-call and reasoning message parts into ranges.\n * Always groups tool calls and reasoning parts, even if there's only one.\n */\nconst groupMessageParts = (\n  messageTypes: readonly string[],\n): MessagePartRange[] => {\n  const ranges: MessagePartRange[] = [];\n  const toolGroup = createGroupState(\"toolGroup\");\n  const reasoningGroup = createGroupState(\"reasoningGroup\");\n\n  for (let i = 0; i < messageTypes.length; i++) {\n    const type = messageTypes[i];\n\n    if (type === \"tool-call\") {\n      reasoningGroup.endGroup(i - 1, ranges);\n      toolGroup.startGroup(i);\n    } else if (type === \"reasoning\") {\n      toolGroup.endGroup(i - 1, ranges);\n      reasoningGroup.startGroup(i);\n    } else {\n      toolGroup.endGroup(i - 1, ranges);\n      reasoningGroup.endGroup(i - 1, ranges);\n      ranges.push({ type: \"single\", index: i });\n    }\n  }\n\n  toolGroup.finalize(messageTypes.length - 1, ranges);\n  reasoningGroup.finalize(messageTypes.length - 1, ranges);\n\n  return ranges;\n};\n\nconst useMessagePartsGroups = (): MessagePartRange[] => {\n  const messageTypes = useAuiState(\n    useShallow((s) => s.message.parts.map((c: any) => c.type)),\n  );\n\n  return useMemo(() => {\n    if (messageTypes.length === 0) {\n      return [];\n    }\n    return groupMessageParts(messageTypes);\n  }, [messageTypes]);\n};\n\nexport namespace MessagePrimitiveParts {\n  export type Props = {\n    /**\n     * Component configuration for rendering different types of message content.\n     *\n     * You can provide custom components for each content type (text, image, file, etc.)\n     * and configure tool rendering behavior. If not provided, default components will be used.\n     */\n    components?:\n      | {\n          /** Component for rendering empty messages */\n          Empty?: EmptyMessagePartComponent | undefined;\n          /** Component for rendering text content */\n          Text?: TextMessagePartComponent | undefined;\n          /** Component for rendering reasoning content (typically hidden) */\n          Reasoning?: ReasoningMessagePartComponent | undefined;\n          /** Component for rendering source content */\n          Source?: SourceMessagePartComponent | undefined;\n          /** Component for rendering image content */\n          Image?: ImageMessagePartComponent | undefined;\n          /** Component for rendering file content */\n          File?: FileMessagePartComponent | undefined;\n          /** Component for rendering audio content (experimental) */\n          Unstable_Audio?: Unstable_AudioMessagePartComponent | undefined;\n          /** Configuration for tool call rendering */\n          tools?:\n            | {\n                /** Map of tool names to their specific components */\n                by_name?:\n                  | Record<string, ToolCallMessagePartComponent | undefined>\n                  | undefined;\n                /** Fallback component for unregistered tools */\n                Fallback?: ComponentType<ToolCallMessagePartProps> | undefined;\n              }\n            | {\n                /** Override component that handles all tool calls */\n                Override: ComponentType<ToolCallMessagePartProps>;\n              }\n            | undefined;\n\n          /**\n           * Component for rendering grouped consecutive tool calls.\n           *\n           * When provided, this component will automatically wrap consecutive tool-call\n           * message parts, allowing you to create collapsible sections, custom styling,\n           * or other grouped presentations for multiple tool calls.\n           *\n           * The component receives:\n           * - `startIndex`: The index of the first tool call in the group\n           * - `endIndex`: The index of the last tool call in the group\n           * - `children`: The rendered tool call components\n           *\n           * @example\n           * ```tsx\n           * // Collapsible tool group\n           * ToolGroup: ({ startIndex, endIndex, children }) => (\n           *   <details className=\"tool-group\">\n           *     <summary>\n           *       {endIndex - startIndex + 1} tool calls\n           *     </summary>\n           *     <div className=\"tool-group-content\">\n           *       {children}\n           *     </div>\n           *   </details>\n           * )\n           * ```\n           *\n           * @example\n           * ```tsx\n           * // Custom styled tool group with header\n           * ToolGroup: ({ startIndex, endIndex, children }) => (\n           *   <div className=\"border rounded-lg p-4 my-2\">\n           *     <div className=\"text-sm text-gray-600 mb-2\">\n           *       Tool execution #{startIndex + 1}-{endIndex + 1}\n           *     </div>\n           *     <div className=\"space-y-2\">\n           *       {children}\n           *     </div>\n           *   </div>\n           * )\n           * ```\n           *\n           * @param startIndex - Index of the first tool call in the group\n           * @param endIndex - Index of the last tool call in the group\n           * @param children - Rendered tool call components to display within the group\n           *\n           * @deprecated This feature is still experimental and subject to change.\n           */\n          ToolGroup?: ComponentType<\n            PropsWithChildren<{ startIndex: number; endIndex: number }>\n          >;\n\n          /**\n           * Component for rendering grouped reasoning parts.\n           *\n           * When provided, this component will automatically wrap reasoning message parts\n           * (one or more consecutive) in a group container. Each reasoning part inside\n           * renders its own text independently - no text merging occurs.\n           *\n           * The component receives:\n           * - `startIndex`: The index of the first reasoning part in the group\n           * - `endIndex`: The index of the last reasoning part in the group\n           * - `children`: The rendered Reasoning components (one per part)\n           *\n           * @example\n           * ```tsx\n           * // Collapsible reasoning group\n           * ReasoningGroup: ({ children }) => (\n           *   <details className=\"reasoning-group\">\n           *     <summary>Reasoning</summary>\n           *     <div className=\"reasoning-content\">\n           *       {children}\n           *     </div>\n           *   </details>\n           * )\n           * ```\n           *\n           * @param startIndex - Index of the first reasoning part in the group\n           * @param endIndex - Index of the last reasoning part in the group\n           * @param children - Rendered reasoning part components\n           */\n          ReasoningGroup?: ReasoningGroupComponent;\n        }\n      | undefined;\n    /**\n     * When enabled, shows the Empty component if the last part in the message\n     * is anything other than Text or Reasoning.\n     *\n     * This can be useful to ensure there's always a visible element at the end\n     * of messages that end with non-text content like tool calls or images.\n     *\n     * @experimental This API is experimental and may change in future versions.\n     * @default true\n     */\n    unstable_showEmptyOnNonTextEnd?: boolean | undefined;\n  };\n}\n\nconst ToolUIDisplay = ({\n  Fallback,\n  ...props\n}: {\n  Fallback: ToolCallMessagePartComponent | undefined;\n} & ToolCallMessagePartProps) => {\n  const Render = useAuiState(({ tools }) => {\n    const Render = tools.tools[props.toolName] ?? Fallback;\n    if (Array.isArray(Render)) return Render[0] ?? Fallback;\n    return Render;\n  });\n  if (!Render) return null;\n  return <Render {...props} />;\n};\n\nconst defaultComponents = {\n  Text: () => (\n    <p style={{ whiteSpace: \"pre-line\" }}>\n      <MessagePartPrimitiveText />\n      <MessagePartPrimitiveInProgress>\n        <span style={{ fontFamily: \"revert\" }}>{\" \\u25CF\"}</span>\n      </MessagePartPrimitiveInProgress>\n    </p>\n  ),\n  Reasoning: () => null,\n  Source: () => null,\n  Image: () => <MessagePartPrimitiveImage />,\n  File: () => null,\n  Unstable_Audio: () => null,\n  ToolGroup: ({ children }) => children,\n  ReasoningGroup: ({ children }) => children,\n} satisfies MessagePrimitiveParts.Props[\"components\"];\n\ntype MessagePartComponentProps = {\n  components: MessagePrimitiveParts.Props[\"components\"];\n};\n\nconst MessagePartComponent: FC<MessagePartComponentProps> = ({\n  components: {\n    Text = defaultComponents.Text,\n    Reasoning = defaultComponents.Reasoning,\n    Image = defaultComponents.Image,\n    Source = defaultComponents.Source,\n    File = defaultComponents.File,\n    Unstable_Audio: Audio = defaultComponents.Unstable_Audio,\n    tools = {},\n  } = {},\n}) => {\n  const aui = useAui();\n  const part = useAuiState(({ part }) => part);\n\n  const type = part.type;\n  if (type === \"tool-call\") {\n    const addResult = aui.part().addToolResult;\n    const resume = aui.part().resumeToolCall;\n    if (\"Override\" in tools)\n      return <tools.Override {...part} addResult={addResult} resume={resume} />;\n    const Tool = tools.by_name?.[part.toolName] ?? tools.Fallback;\n    return (\n      <ToolUIDisplay\n        {...part}\n        Fallback={Tool}\n        addResult={addResult}\n        resume={resume}\n      />\n    );\n  }\n\n  if (part.status?.type === \"requires-action\")\n    throw new Error(\"Encountered unexpected requires-action status\");\n\n  switch (type) {\n    case \"text\":\n      return <Text {...part} />;\n\n    case \"reasoning\":\n      return <Reasoning {...part} />;\n\n    case \"source\":\n      return <Source {...part} />;\n\n    case \"image\":\n      return <Image {...part} />;\n\n    case \"file\":\n      return <File {...part} />;\n\n    case \"audio\":\n      return <Audio {...part} />;\n\n    case \"data\":\n      return null;\n\n    default:\n      const unhandledType: never = type;\n      throw new Error(`Unknown message part type: ${unhandledType}`);\n  }\n};\n\nexport namespace MessagePrimitivePartByIndex {\n  export type Props = {\n    index: number;\n    components: MessagePrimitiveParts.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single message part at the specified index.\n *\n * This component provides direct access to render a specific message part\n * within the current message context, using the provided component configuration.\n *\n * @example\n * ```tsx\n * <MessagePrimitive.PartByIndex\n *   index={0}\n *   components={{\n *     Text: MyTextComponent,\n *     Image: MyImageComponent\n *   }}\n * />\n * ```\n */\nexport const MessagePrimitivePartByIndex: FC<MessagePrimitivePartByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <PartByIndexProvider index={index}>\n          <MessagePartComponent components={components} />\n        </PartByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.components?.Text === next.components?.Text &&\n      prev.components?.Reasoning === next.components?.Reasoning &&\n      prev.components?.Source === next.components?.Source &&\n      prev.components?.Image === next.components?.Image &&\n      prev.components?.File === next.components?.File &&\n      prev.components?.Unstable_Audio === next.components?.Unstable_Audio &&\n      prev.components?.tools === next.components?.tools &&\n      prev.components?.ToolGroup === next.components?.ToolGroup &&\n      prev.components?.ReasoningGroup === next.components?.ReasoningGroup,\n  );\n\nMessagePrimitivePartByIndex.displayName = \"MessagePrimitive.PartByIndex\";\n\nconst EmptyPartFallback: FC<{\n  status: MessagePartStatus;\n  component: TextMessagePartComponent;\n}> = ({ status, component: Component }) => {\n  return (\n    <TextMessagePartProvider text=\"\" isRunning={status.type === \"running\"}>\n      <Component type=\"text\" text=\"\" status={status} />\n    </TextMessagePartProvider>\n  );\n};\n\nconst COMPLETE_STATUS: MessagePartStatus = Object.freeze({\n  type: \"complete\",\n});\n\nconst EmptyPartsImpl: FC<MessagePartComponentProps> = ({ components }) => {\n  const status = useAuiState(\n    (s) => (s.message.status ?? COMPLETE_STATUS) as MessagePartStatus,\n  );\n\n  if (components?.Empty) return <components.Empty status={status} />;\n\n  return (\n    <EmptyPartFallback\n      status={status}\n      component={components?.Text ?? defaultComponents.Text}\n    />\n  );\n};\n\nconst EmptyParts = memo(\n  EmptyPartsImpl,\n  (prev, next) =>\n    prev.components?.Empty === next.components?.Empty &&\n    prev.components?.Text === next.components?.Text,\n);\n\nconst ConditionalEmptyImpl: FC<{\n  components: MessagePrimitiveParts.Props[\"components\"];\n  enabled: boolean;\n}> = ({ components, enabled }) => {\n  const shouldShowEmpty = useAuiState(({ message }) => {\n    if (!enabled) return false;\n    if (message.parts.length === 0) return false;\n\n    const lastPart = message.parts[message.parts.length - 1];\n    return lastPart?.type !== \"text\" && lastPart?.type !== \"reasoning\";\n  });\n\n  if (!shouldShowEmpty) return null;\n  return <EmptyParts components={components} />;\n};\n\nconst ConditionalEmpty = memo(\n  ConditionalEmptyImpl,\n  (prev, next) =>\n    prev.enabled === next.enabled &&\n    prev.components?.Empty === next.components?.Empty &&\n    prev.components?.Text === next.components?.Text,\n);\n\n/**\n * Renders the parts of a message with support for multiple content types.\n *\n * This component automatically handles different types of message content including\n * text, images, files, tool calls, and more. It provides a flexible component\n * system for customizing how each content type is rendered.\n *\n * @example\n * ```tsx\n * <MessagePrimitive.Parts\n *   components={{\n *     Text: ({ text }) => <p className=\"message-text\">{text}</p>,\n *     Image: ({ image }) => <img src={image} alt=\"Message image\" />,\n *     tools: {\n *       by_name: {\n *         calculator: CalculatorTool,\n *         weather: WeatherTool,\n *       },\n *       Fallback: DefaultToolComponent\n *     }\n *   }}\n * />\n * ```\n */\nexport const MessagePrimitiveParts: FC<MessagePrimitiveParts.Props> = ({\n  components,\n  unstable_showEmptyOnNonTextEnd = true,\n}) => {\n  const contentLength = useAuiState(({ message }) => message.parts.length);\n  const messageRanges = useMessagePartsGroups();\n\n  const partsElements = useMemo(() => {\n    if (contentLength === 0) {\n      return <EmptyParts components={components} />;\n    }\n\n    return messageRanges.map((range) => {\n      if (range.type === \"single\") {\n        return (\n          <MessagePrimitivePartByIndex\n            key={range.index}\n            index={range.index}\n            components={components}\n          />\n        );\n      } else if (range.type === \"toolGroup\") {\n        const ToolGroupComponent =\n          components?.ToolGroup ?? defaultComponents.ToolGroup;\n        return (\n          <ToolGroupComponent\n            key={`tool-${range.startIndex}`}\n            startIndex={range.startIndex}\n            endIndex={range.endIndex}\n          >\n            {Array.from(\n              { length: range.endIndex - range.startIndex + 1 },\n              (_, i) => (\n                <MessagePrimitivePartByIndex\n                  key={i}\n                  index={range.startIndex + i}\n                  components={components}\n                />\n              ),\n            )}\n          </ToolGroupComponent>\n        );\n      } else {\n        // reasoningGroup\n        const ReasoningGroupComponent =\n          components?.ReasoningGroup ?? defaultComponents.ReasoningGroup;\n        return (\n          <ReasoningGroupComponent\n            key={`reasoning-${range.startIndex}`}\n            startIndex={range.startIndex}\n            endIndex={range.endIndex}\n          >\n            {Array.from(\n              { length: range.endIndex - range.startIndex + 1 },\n              (_, i) => (\n                <MessagePrimitivePartByIndex\n                  key={i}\n                  index={range.startIndex + i}\n                  components={components}\n                />\n              ),\n            )}\n          </ReasoningGroupComponent>\n        );\n      }\n    });\n  }, [messageRanges, components, contentLength]);\n\n  return (\n    <>\n      {partsElements}\n      <ConditionalEmpty\n        components={components}\n        enabled={unstable_showEmptyOnNonTextEnd}\n      />\n    </>\n  );\n};\n\nMessagePrimitiveParts.displayName = \"MessagePrimitive.Parts\";\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6197, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message/message-if.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport type { RequireAtLeastOne } from \"../../utils/require-at-least-one\";\n\ntype MessageIfFilters = {\n  user: boolean | undefined;\n  assistant: boolean | undefined;\n  system: boolean | undefined;\n  hasBranches: boolean | undefined;\n  copied: boolean | undefined;\n  lastOrHover: boolean | undefined;\n  last: boolean | undefined;\n  speaking: boolean | undefined;\n  hasAttachments: boolean | undefined;\n  hasContent: boolean | undefined;\n  submittedFeedback: \"positive\" | \"negative\" | null | undefined;\n};\ntype UseMessageIfProps = RequireAtLeastOne<MessageIfFilters>;\n\nconst useMessageIf = (props: UseMessageIfProps) => {\n  return useAuiState(({ message }) => {\n    const {\n      role,\n      attachments,\n      parts,\n      branchCount,\n      isLast,\n      speech,\n      isCopied,\n      isHovering,\n    } = message;\n\n    if (props.hasBranches === true && branchCount < 2) return false;\n\n    if (props.user && role !== \"user\") return false;\n    if (props.assistant && role !== \"assistant\") return false;\n    if (props.system && role !== \"system\") return false;\n\n    if (props.lastOrHover === true && !isHovering && !isLast) return false;\n    if (props.last !== undefined && props.last !== isLast) return false;\n\n    if (props.copied === true && !isCopied) return false;\n    if (props.copied === false && isCopied) return false;\n\n    if (props.speaking === true && speech == null) return false;\n    if (props.speaking === false && speech != null) return false;\n\n    if (\n      props.hasAttachments === true &&\n      (role !== \"user\" || !attachments?.length)\n    )\n      return false;\n    if (\n      props.hasAttachments === false &&\n      role === \"user\" &&\n      !!attachments?.length\n    )\n      return false;\n\n    if (props.hasContent === true && parts.length === 0) return false;\n    if (props.hasContent === false && parts.length > 0) return false;\n\n    if (\n      props.submittedFeedback !== undefined &&\n      (message.metadata.submittedFeedback?.type ?? null) !==\n        props.submittedFeedback\n    )\n      return false;\n\n    return true;\n  });\n};\n\nexport namespace MessagePrimitiveIf {\n  export type Props = PropsWithChildren<UseMessageIfProps>;\n}\n\n/**\n * @deprecated Use `<AuiIf condition={({ message }) => ...} />` instead.\n */\nexport const MessagePrimitiveIf: FC<MessagePrimitiveIf.Props> = ({\n  children,\n  ...query\n}) => {\n  const result = useMessageIf(query);\n  return result ? children : null;\n};\n\nMessagePrimitiveIf.displayName = \"MessagePrimitive.If\";\n"],"names":[],"mappings":";;;;AAGA;;AAHA;;AAqBA,MAAM,eAAe,CAAC;;IACpB,OAAO,IAAA,kKAAW;oCAAC,CAAC,EAAE,OAAO,EAAE;YAC7B,MAAM,EACJ,IAAI,EACJ,WAAW,EACX,KAAK,EACL,WAAW,EACX,MAAM,EACN,MAAM,EACN,QAAQ,EACR,UAAU,EACX,GAAG;YAEJ,IAAI,MAAM,WAAW,KAAK,QAAQ,cAAc,GAAG,OAAO;YAE1D,IAAI,MAAM,IAAI,IAAI,SAAS,QAAQ,OAAO;YAC1C,IAAI,MAAM,SAAS,IAAI,SAAS,aAAa,OAAO;YACpD,IAAI,MAAM,MAAM,IAAI,SAAS,UAAU,OAAO;YAE9C,IAAI,MAAM,WAAW,KAAK,QAAQ,CAAC,cAAc,CAAC,QAAQ,OAAO;YACjE,IAAI,MAAM,IAAI,KAAK,aAAa,MAAM,IAAI,KAAK,QAAQ,OAAO;YAE9D,IAAI,MAAM,MAAM,KAAK,QAAQ,CAAC,UAAU,OAAO;YAC/C,IAAI,MAAM,MAAM,KAAK,SAAS,UAAU,OAAO;YAE/C,IAAI,MAAM,QAAQ,KAAK,QAAQ,UAAU,MAAM,OAAO;YACtD,IAAI,MAAM,QAAQ,KAAK,SAAS,UAAU,MAAM,OAAO;YAEvD,IACE,MAAM,cAAc,KAAK,QACzB,CAAC,SAAS,UAAU,CAAC,aAAa,MAAM,GAExC,OAAO;YACT,IACE,MAAM,cAAc,KAAK,SACzB,SAAS,UACT,CAAC,CAAC,aAAa,QAEf,OAAO;YAET,IAAI,MAAM,UAAU,KAAK,QAAQ,MAAM,MAAM,KAAK,GAAG,OAAO;YAC5D,IAAI,MAAM,UAAU,KAAK,SAAS,MAAM,MAAM,GAAG,GAAG,OAAO;YAE3D,IACE,MAAM,iBAAiB,KAAK,aAC5B,CAAC,QAAQ,QAAQ,CAAC,iBAAiB,EAAE,QAAQ,IAAI,MAC/C,MAAM,iBAAiB,EAEzB,OAAO;YAET,OAAO;QACT;;AACF;GApDM;;QACG,kKAAW;;;AA4Db,MAAM,qBAAmD,CAAC,EAC/D,QAAQ,EACR,GAAG,OACJ;;IACC,MAAM,SAAS,aAAa;IAC5B,OAAO,SAAS,WAAW;AAC7B;IANa;;QAII;;;KAJJ;AAQb,mBAAmB,WAAW,GAAG"}},
    {"offset": {"line": 6255, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message/message-attachments.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentType, type FC, memo, useMemo } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport { MessageAttachmentByIndexProvider } from \"../../context/providers\";\nimport { CompleteAttachment } from \"../../types\";\n\nexport namespace MessagePrimitiveAttachments {\n  export type Props = {\n    components:\n      | {\n          Image?: ComponentType | undefined;\n          Document?: ComponentType | undefined;\n          File?: ComponentType | undefined;\n          Attachment?: ComponentType | undefined;\n        }\n      | undefined;\n  };\n}\n\nconst getComponent = (\n  components: MessagePrimitiveAttachments.Props[\"components\"],\n  attachment: CompleteAttachment,\n) => {\n  const type = attachment.type;\n  switch (type) {\n    case \"image\":\n      return components?.Image ?? components?.Attachment;\n    case \"document\":\n      return components?.Document ?? components?.Attachment;\n    case \"file\":\n      return components?.File ?? components?.Attachment;\n    default:\n      const _exhaustiveCheck: never = type;\n      throw new Error(`Unknown attachment type: ${_exhaustiveCheck}`);\n  }\n};\n\nconst AttachmentComponent: FC<{\n  components: MessagePrimitiveAttachments.Props[\"components\"];\n}> = ({ components }) => {\n  const attachment = useAuiState(({ attachment }) => attachment);\n  if (!attachment) return null;\n\n  const Component = getComponent(components, attachment as CompleteAttachment);\n  if (!Component) return null;\n  return <Component />;\n};\n\nexport namespace MessagePrimitiveAttachmentByIndex {\n  export type Props = {\n    index: number;\n    components?: MessagePrimitiveAttachments.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single attachment at the specified index within the current message.\n *\n * This component provides direct access to render a specific attachment\n * from the message's attachment list using the provided component configuration.\n *\n * @example\n * ```tsx\n * <MessagePrimitive.AttachmentByIndex\n *   index={0}\n *   components={{\n *     Image: MyImageAttachment,\n *     Document: MyDocumentAttachment\n *   }}\n * />\n * ```\n */\nexport const MessagePrimitiveAttachmentByIndex: FC<MessagePrimitiveAttachmentByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <MessageAttachmentByIndexProvider index={index}>\n          <AttachmentComponent components={components} />\n        </MessageAttachmentByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.components?.Image === next.components?.Image &&\n      prev.components?.Document === next.components?.Document &&\n      prev.components?.File === next.components?.File &&\n      prev.components?.Attachment === next.components?.Attachment,\n  );\n\nMessagePrimitiveAttachmentByIndex.displayName =\n  \"MessagePrimitive.AttachmentByIndex\";\n\nexport const MessagePrimitiveAttachments: FC<\n  MessagePrimitiveAttachments.Props\n> = ({ components }) => {\n  const attachmentsCount = useAuiState(({ message }) => {\n    if (message.role !== \"user\") return 0;\n    return message.attachments.length;\n  });\n\n  const attachmentElements = useMemo(() => {\n    return Array.from({ length: attachmentsCount }, (_, index) => (\n      <MessagePrimitiveAttachmentByIndex\n        key={index}\n        index={index}\n        components={components}\n      />\n    ));\n  }, [attachmentsCount, components]);\n\n  return attachmentElements;\n};\n\nMessagePrimitiveAttachments.displayName = \"MessagePrimitive.Attachments\";\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAoBA,MAAM,eAAe,CACnB,YACA;IAEA,MAAM,OAAO,WAAW,IAAI;IAC5B,OAAQ;QACN,KAAK;YACH,OAAO,YAAY,SAAS,YAAY;QAC1C,KAAK;YACH,OAAO,YAAY,YAAY,YAAY;QAC7C,KAAK;YACH,OAAO,YAAY,QAAQ,YAAY;QACzC;YACE,MAAM,mBAA0B;YAChC,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,kBAAkB;IAClE;AACF;AAEA,MAAM,sBAED,CAAC,EAAE,UAAU,EAAE;;IAClB,MAAM,aAAa,IAAA,kKAAW;uDAAC,CAAC,EAAE,UAAU,EAAE,GAAK;;IACnD,IAAI,CAAC,YAAY,OAAO;IAExB,MAAM,YAAY,aAAa,YAAY;IAC3C,IAAI,CAAC,WAAW,OAAO;IACvB,qBAAO,sYAAC;;;;;AACV;GATM;;QAGe,kKAAW;;;KAH1B;AAmCC,MAAM,kDACX,IAAA,8WAAI,EACF,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE;IACpB,qBACE,sYAAC,iOAAgC;QAAC,OAAO;kBACvC,cAAA,sYAAC;YAAoB,YAAY;;;;;;;;;;;AAGvC,GACA,CAAC,MAAM,OACL,KAAK,KAAK,KAAK,KAAK,KAAK,IACzB,KAAK,UAAU,EAAE,UAAU,KAAK,UAAU,EAAE,SAC5C,KAAK,UAAU,EAAE,aAAa,KAAK,UAAU,EAAE,YAC/C,KAAK,UAAU,EAAE,SAAS,KAAK,UAAU,EAAE,QAC3C,KAAK,UAAU,EAAE,eAAe,KAAK,UAAU,EAAE;MAd1C;AAiBb,kCAAkC,WAAW,GAC3C;AAEK,MAAM,8BAET,CAAC,EAAE,UAAU,EAAE;;IACjB,MAAM,mBAAmB,IAAA,kKAAW;qEAAC,CAAC,EAAE,OAAO,EAAE;YAC/C,IAAI,QAAQ,IAAI,KAAK,QAAQ,OAAO;YACpC,OAAO,QAAQ,WAAW,CAAC,MAAM;QACnC;;IAEA,MAAM,qBAAqB,IAAA,iXAAO;mEAAC;YACjC,OAAO,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAiB;2EAAG,CAAC,GAAG,sBAClD,sYAAC;wBAEC,OAAO;wBACP,YAAY;uBAFP;;;;;;QAKX;kEAAG;QAAC;QAAkB;KAAW;IAEjC,OAAO;AACT;IAnBa;;QAGc,kKAAW;;;MAHzB;AAqBb,4BAA4B,WAAW,GAAG"}},
    {"offset": {"line": 6370, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message/message-error.tsx"],"sourcesContent":["\"use client\";\n\nimport { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nexport const MessagePrimitiveError: FC<PropsWithChildren> = ({ children }) => {\n  const hasError = useAuiState(\n    ({ message }) =>\n      message.status?.type === \"incomplete\" &&\n      message.status.reason === \"error\",\n  );\n  return hasError ? children : null;\n};\n\nMessagePrimitiveError.displayName = \"MessagePrimitive.Error\";\n"],"names":[],"mappings":";;;;AAGA;;AAHA;;AAKO,MAAM,wBAA+C,CAAC,EAAE,QAAQ,EAAE;;IACvE,MAAM,WAAW,IAAA,kKAAW;uDAC1B,CAAC,EAAE,OAAO,EAAE,GACV,QAAQ,MAAM,EAAE,SAAS,gBACzB,QAAQ,MAAM,CAAC,MAAM,KAAK;;IAE9B,OAAO,WAAW,WAAW;AAC/B;GAPa;;QACM,kKAAW;;;KADjB;AASb,sBAAsB,WAAW,GAAG"}},
    {"offset": {"line": 6401, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/message/message-parts-grouped.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  type ComponentType,\n  type FC,\n  memo,\n  PropsWithChildren,\n  useMemo,\n} from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\nimport {\n  PartByIndexProvider,\n  TextMessagePartProvider,\n} from \"../../context/providers\";\nimport { MessagePartPrimitiveText } from \"../message-part/message-part-text\";\nimport { MessagePartPrimitiveImage } from \"../message-part/message-part-image\";\nimport type {\n  Unstable_AudioMessagePartComponent,\n  EmptyMessagePartComponent,\n  TextMessagePartComponent,\n  ImageMessagePartComponent,\n  SourceMessagePartComponent,\n  ToolCallMessagePartComponent,\n  ToolCallMessagePartProps,\n  FileMessagePartComponent,\n  ReasoningMessagePartComponent,\n} from \"../../types/message-part-component-types\";\nimport { MessagePartPrimitiveInProgress } from \"../message-part/message-part-in-progress\";\nimport { MessagePartStatus } from \"../../types/assistant-types\";\n\ntype MessagePartGroup = {\n  groupKey: string | undefined;\n  indices: number[];\n};\n\nexport type GroupingFunction = (parts: readonly any[]) => MessagePartGroup[];\n\n/**\n * Groups message parts by their parent ID.\n * Parts without a parent ID appear in their chronological position as individual groups.\n * Parts with the same parent ID are grouped together at the position of their first occurrence.\n */\nconst groupMessagePartsByParentId: GroupingFunction = (\n  parts: readonly any[],\n): MessagePartGroup[] => {\n  // Map maintains insertion order, so groups appear in order of first occurrence\n  const groupMap = new Map<string, number[]>();\n\n  // Process each part in order\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n    const parentId = part?.parentId as string | undefined;\n\n    // For parts without parentId, assign a unique group ID to maintain their position\n    const groupId = parentId ?? `__ungrouped_${i}`;\n\n    // Get or create the indices array for this group\n    const indices = groupMap.get(groupId) ?? [];\n    indices.push(i);\n    groupMap.set(groupId, indices);\n  }\n\n  // Convert map to array of groups\n  const groups: MessagePartGroup[] = [];\n  for (const [groupId, indices] of groupMap) {\n    // Extract parentId (undefined for ungrouped parts)\n    const groupKey = groupId.startsWith(\"__ungrouped_\") ? undefined : groupId;\n    groups.push({ groupKey, indices });\n  }\n\n  return groups;\n};\n\nconst useMessagePartsGrouped = (\n  groupingFunction: GroupingFunction,\n): MessagePartGroup[] => {\n  const parts = useAuiState(({ message }) => message.parts);\n\n  return useMemo(() => {\n    if (parts.length === 0) {\n      return [];\n    }\n    return groupingFunction(parts);\n  }, [parts, groupingFunction]);\n};\n\nexport namespace MessagePrimitiveUnstable_PartsGrouped {\n  export type Props = {\n    /**\n     * Function that takes an array of message parts and returns an array of groups.\n     * Each group contains a key (for identification) and an array of indices.\n     *\n     * @example\n     * ```tsx\n     * // Group by parent ID (default behavior)\n     * groupingFunction={(parts) => {\n     *   const groups = new Map<string, number[]>();\n     *   parts.forEach((part, i) => {\n     *     const key = part.parentId ?? `__ungrouped_${i}`;\n     *     const indices = groups.get(key) ?? [];\n     *     indices.push(i);\n     *     groups.set(key, indices);\n     *   });\n     *   return Array.from(groups.entries()).map(([key, indices]) => ({\n     *     key: key.startsWith(\"__ungrouped_\") ? undefined : key,\n     *     indices\n     *   }));\n     * }}\n     * ```\n     *\n     * @example\n     * ```tsx\n     * // Group by tool name\n     * import { groupMessagePartsByToolName } from \"@creatorem/ai-react\";\n     *\n     * <MessagePrimitive.Unstable_PartsGrouped\n     *   groupingFunction={groupMessagePartsByToolName}\n     *   components={{\n     *     Group: ({ key, indices, children }) => {\n     *       if (!key) return <>{children}</>;\n     *       return (\n     *         <div className=\"tool-group\">\n     *           <h4>Tool: {key}</h4>\n     *           {children}\n     *         </div>\n     *       );\n     *     }\n     *   }}\n     * />\n     * ```\n     */\n    groupingFunction: GroupingFunction;\n\n    /**\n     * Component configuration for rendering different types of message content.\n     *\n     * You can provide custom components for each content type (text, image, file, etc.)\n     * and configure tool rendering behavior. If not provided, default components will be used.\n     */\n    components:\n      | {\n          /** Component for rendering empty messages */\n          Empty?: EmptyMessagePartComponent | undefined;\n          /** Component for rendering text content */\n          Text?: TextMessagePartComponent | undefined;\n          /** Component for rendering reasoning content (typically hidden) */\n          Reasoning?: ReasoningMessagePartComponent | undefined;\n          /** Component for rendering source content */\n          Source?: SourceMessagePartComponent | undefined;\n          /** Component for rendering image content */\n          Image?: ImageMessagePartComponent | undefined;\n          /** Component for rendering file content */\n          File?: FileMessagePartComponent | undefined;\n          /** Component for rendering audio content (experimental) */\n          Unstable_Audio?: Unstable_AudioMessagePartComponent | undefined;\n          /** Configuration for tool call rendering */\n          tools?:\n            | {\n                /** Map of tool names to their specific components */\n                by_name?:\n                  | Record<string, ToolCallMessagePartComponent | undefined>\n                  | undefined;\n                /** Fallback component for unregistered tools */\n                Fallback?: ComponentType<ToolCallMessagePartProps> | undefined;\n              }\n            | {\n                /** Override component that handles all tool calls */\n                Override: ComponentType<ToolCallMessagePartProps>;\n              }\n            | undefined;\n\n          /**\n           * Component for rendering grouped message parts.\n           *\n           * When provided, this component will automatically wrap message parts that share\n           * the same group key as determined by the groupingFunction.\n           *\n           * The component receives:\n           * - `groupKey`: The group key (or undefined for ungrouped parts)\n           * - `indices`: Array of indices for the parts in this group\n           * - `children`: The rendered message part components\n           *\n           * @example\n           * ```tsx\n           * // Collapsible group\n           * Group: ({ groupKey, indices, children }) => {\n           *   if (!groupKey) return <>{children}</>;\n           *   return (\n           *     <details className=\"message-group\">\n           *       <summary>\n           *         Group {groupKey} ({indices.length} parts)\n           *       </summary>\n           *       <div className=\"group-content\">\n           *         {children}\n           *       </div>\n           *     </details>\n           *   );\n           * }\n           * ```\n           *\n           * @param groupKey - The group key (undefined for ungrouped parts)\n           * @param indices - Array of indices for the parts in this group\n           * @param children - Rendered message part components to display within the group\n           */\n          Group?: ComponentType<\n            PropsWithChildren<{\n              groupKey: string | undefined;\n              indices: number[];\n            }>\n          >;\n        }\n      | undefined;\n  };\n}\n\nconst ToolUIDisplay = ({\n  Fallback,\n  ...props\n}: {\n  Fallback: ToolCallMessagePartComponent | undefined;\n} & ToolCallMessagePartProps) => {\n  const Render = useAuiState(({ tools }) => {\n    const Render = tools.tools[props.toolName] ?? Fallback;\n    if (Array.isArray(Render)) return Render[0] ?? Fallback;\n    return Render;\n  });\n  if (!Render) return null;\n  return <Render {...props} />;\n};\n\nconst defaultComponents = {\n  Text: () => (\n    <p style={{ whiteSpace: \"pre-line\" }}>\n      <MessagePartPrimitiveText />\n      <MessagePartPrimitiveInProgress>\n        <span style={{ fontFamily: \"revert\" }}>{\" \\u25CF\"}</span>\n      </MessagePartPrimitiveInProgress>\n    </p>\n  ),\n  Reasoning: () => null,\n  Source: () => null,\n  Image: () => <MessagePartPrimitiveImage />,\n  File: () => null,\n  Unstable_Audio: () => null,\n  Group: ({ children }) => children,\n} satisfies MessagePrimitiveUnstable_PartsGrouped.Props[\"components\"];\n\ntype MessagePartComponentProps = {\n  components: MessagePrimitiveUnstable_PartsGrouped.Props[\"components\"];\n};\n\nconst MessagePartComponent: FC<MessagePartComponentProps> = ({\n  components: {\n    Text = defaultComponents.Text,\n    Reasoning = defaultComponents.Reasoning,\n    Image = defaultComponents.Image,\n    Source = defaultComponents.Source,\n    File = defaultComponents.File,\n    Unstable_Audio: Audio = defaultComponents.Unstable_Audio,\n    tools = {},\n  } = {},\n}) => {\n  const aui = useAui();\n  const part = useAuiState(({ part }) => part);\n\n  const type = part.type;\n  if (type === \"tool-call\") {\n    const addResult = aui.part().addToolResult;\n    const resume = aui.part().resumeToolCall;\n    if (\"Override\" in tools)\n      return <tools.Override {...part} addResult={addResult} resume={resume} />;\n    const Tool = tools.by_name?.[part.toolName] ?? tools.Fallback;\n    return (\n      <ToolUIDisplay\n        {...part}\n        Fallback={Tool}\n        addResult={addResult}\n        resume={resume}\n      />\n    );\n  }\n\n  if (part.status?.type === \"requires-action\")\n    throw new Error(\"Encountered unexpected requires-action status\");\n\n  switch (type) {\n    case \"text\":\n      return <Text {...part} />;\n\n    case \"reasoning\":\n      return <Reasoning {...part} />;\n\n    case \"source\":\n      return <Source {...part} />;\n\n    case \"image\":\n      return <Image {...part} />;\n\n    case \"file\":\n      return <File {...part} />;\n\n    case \"audio\":\n      return <Audio {...part} />;\n\n    case \"data\":\n      return null;\n\n    default:\n      const unhandledType: never = type;\n      throw new Error(`Unknown message part type: ${unhandledType}`);\n  }\n};\n\ntype MessagePartProps = {\n  partIndex: number;\n  components: MessagePrimitiveUnstable_PartsGrouped.Props[\"components\"];\n};\n\nconst MessagePartImpl: FC<MessagePartProps> = ({ partIndex, components }) => {\n  return (\n    <PartByIndexProvider index={partIndex}>\n      <MessagePartComponent components={components} />\n    </PartByIndexProvider>\n  );\n};\n\nconst MessagePart = memo(\n  MessagePartImpl,\n  (prev, next) =>\n    prev.partIndex === next.partIndex &&\n    prev.components?.Text === next.components?.Text &&\n    prev.components?.Reasoning === next.components?.Reasoning &&\n    prev.components?.Source === next.components?.Source &&\n    prev.components?.Image === next.components?.Image &&\n    prev.components?.File === next.components?.File &&\n    prev.components?.Unstable_Audio === next.components?.Unstable_Audio &&\n    prev.components?.tools === next.components?.tools &&\n    prev.components?.Group === next.components?.Group,\n);\n\nconst EmptyPartFallback: FC<{\n  status: MessagePartStatus;\n  component: TextMessagePartComponent;\n}> = ({ status, component: Component }) => {\n  return (\n    <TextMessagePartProvider text=\"\" isRunning={status.type === \"running\"}>\n      <Component type=\"text\" text=\"\" status={status} />\n    </TextMessagePartProvider>\n  );\n};\n\nconst COMPLETE_STATUS: MessagePartStatus = Object.freeze({\n  type: \"complete\",\n});\n\nconst EmptyPartsImpl: FC<MessagePartComponentProps> = ({ components }) => {\n  const status = useAuiState(\n    (s) => (s.message.status ?? COMPLETE_STATUS) as MessagePartStatus,\n  );\n\n  if (components?.Empty) return <components.Empty status={status} />;\n\n  return (\n    <EmptyPartFallback\n      status={status}\n      component={components?.Text ?? defaultComponents.Text}\n    />\n  );\n};\n\nconst EmptyParts = memo(\n  EmptyPartsImpl,\n  (prev, next) =>\n    prev.components?.Empty === next.components?.Empty &&\n    prev.components?.Text === next.components?.Text,\n);\n\n/**\n * Renders the parts of a message grouped by a custom grouping function.\n *\n * This component allows you to group message parts based on any criteria you define.\n * The grouping function receives all message parts and returns an array of groups,\n * where each group has a key and an array of part indices.\n *\n * @example\n * ```tsx\n * // Group by parent ID (default behavior)\n * <MessagePrimitive.Unstable_PartsGrouped\n *   components={{\n *     Text: ({ text }) => <p className=\"message-text\">{text}</p>,\n *     Image: ({ image }) => <img src={image} alt=\"Message image\" />,\n *     Group: ({ groupKey, indices, children }) => {\n *       if (!groupKey) return <>{children}</>;\n *       return (\n *         <div className=\"parent-group border rounded p-4\">\n *           <h4>Parent ID: {groupKey}</h4>\n *           {children}\n *         </div>\n *       );\n *     }\n *   }}\n * />\n * ```\n *\n * @example\n * ```tsx\n * // Group by tool name\n * import { groupMessagePartsByToolName } from \"@creatorem/ai-react\";\n *\n * <MessagePrimitive.Unstable_PartsGrouped\n *   groupingFunction={groupMessagePartsByToolName}\n *   components={{\n *     Group: ({ groupKey, indices, children }) => {\n *       if (!groupKey) return <>{children}</>;\n *       return (\n *         <div className=\"tool-group\">\n *           <h4>Tool: {groupKey}</h4>\n *           {children}\n *         </div>\n *       );\n *     }\n *   }}\n * />\n * ```\n */\nexport const MessagePrimitiveUnstable_PartsGrouped: FC<\n  MessagePrimitiveUnstable_PartsGrouped.Props\n> = ({ groupingFunction, components }) => {\n  const contentLength = useAuiState(({ message }) => message.parts.length);\n  const messageGroups = useMessagePartsGrouped(groupingFunction);\n\n  const partsElements = useMemo(() => {\n    if (contentLength === 0) {\n      return <EmptyParts components={components} />;\n    }\n\n    return messageGroups.map((group, groupIndex) => {\n      const GroupComponent = components?.Group ?? defaultComponents.Group;\n\n      return (\n        <GroupComponent\n          key={`group-${groupIndex}-${group.groupKey ?? \"ungrouped\"}`}\n          groupKey={group.groupKey}\n          indices={group.indices}\n        >\n          {group.indices.map((partIndex) => (\n            <MessagePart\n              key={partIndex}\n              partIndex={partIndex}\n              components={components}\n            />\n          ))}\n        </GroupComponent>\n      );\n    });\n  }, [messageGroups, components, contentLength]);\n\n  return <>{partsElements}</>;\n};\n\nMessagePrimitiveUnstable_PartsGrouped.displayName =\n  \"MessagePrimitive.Unstable_PartsGrouped\";\n\n/**\n * Renders the parts of a message grouped by their parent ID.\n * This is a convenience wrapper around Unstable_PartsGrouped with parent ID grouping.\n *\n * @deprecated Use MessagePrimitive.Unstable_PartsGrouped instead for more flexibility\n */\nexport const MessagePrimitiveUnstable_PartsGroupedByParentId: FC<\n  Omit<MessagePrimitiveUnstable_PartsGrouped.Props, \"groupingFunction\">\n> = ({ components, ...props }) => {\n  return (\n    <MessagePrimitiveUnstable_PartsGrouped\n      {...props}\n      components={components}\n      groupingFunction={groupMessagePartsByParentId}\n    />\n  );\n};\n\nMessagePrimitiveUnstable_PartsGroupedByParentId.displayName =\n  \"MessagePrimitive.Unstable_PartsGroupedByParentId\";\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6859, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/reasoning/use-scroll-lock.tsx"],"sourcesContent":["\"use client\";\n\nimport { type RefObject, useCallback, useEffect, useRef } from \"react\";\n\n/**\n * Locks scroll position during collapsible/height animations and hides scrollbar.\n *\n * This utility prevents page jumps when content height changes during animations,\n * providing a smooth user experience. It finds the nearest scrollable ancestor and\n * temporarily locks its scroll position while the animation completes.\n *\n * - Prevents forced reflows: no layout reads, mutations scoped to scrollable parent only\n * - Reactive: only intercepts scroll events when browser actually adjusts\n * - Cleans up automatically after animation duration\n *\n * @param animatedElementRef - Ref to the animated element\n * @param animationDuration - Lock duration in milliseconds\n * @returns Function to activate the scroll lock\n *\n * @example\n * ```tsx\n * const collapsibleRef = useRef<HTMLDivElement>(null);\n * const lockScroll = useScrollLock(collapsibleRef, 200);\n *\n * const handleCollapse = () => {\n *   lockScroll(); // Lock scroll before collapsing\n *   setIsOpen(false);\n * };\n * ```\n */\nexport const useScrollLock = <T extends HTMLElement = HTMLElement>(\n  animatedElementRef: RefObject<T | null>,\n  animationDuration: number,\n) => {\n  const scrollContainerRef = useRef<HTMLElement | null>(null);\n  const cleanupRef = useRef<(() => void) | null>(null);\n\n  useEffect(() => {\n    return () => {\n      cleanupRef.current?.();\n    };\n  }, []);\n\n  const lockScroll = useCallback(() => {\n    cleanupRef.current?.();\n\n    (function findScrollableAncestor() {\n      if (scrollContainerRef.current || !animatedElementRef.current) return;\n\n      let el: HTMLElement | null = animatedElementRef.current;\n      while (el) {\n        const { overflowY } = getComputedStyle(el);\n        if (overflowY === \"scroll\" || overflowY === \"auto\") {\n          scrollContainerRef.current = el;\n          break;\n        }\n        el = el.parentElement;\n      }\n    })();\n\n    const scrollContainer = scrollContainerRef.current;\n    if (!scrollContainer) return;\n\n    const scrollPosition = scrollContainer.scrollTop;\n    const scrollbarWidth = scrollContainer.style.scrollbarWidth;\n\n    scrollContainer.style.scrollbarWidth = \"none\";\n\n    const resetPosition = () => (scrollContainer.scrollTop = scrollPosition);\n    scrollContainer.addEventListener(\"scroll\", resetPosition);\n\n    const timeoutId = setTimeout(() => {\n      scrollContainer.removeEventListener(\"scroll\", resetPosition);\n      scrollContainer.style.scrollbarWidth = scrollbarWidth;\n      cleanupRef.current = null;\n    }, animationDuration);\n\n    cleanupRef.current = () => {\n      clearTimeout(timeoutId);\n      scrollContainer.removeEventListener(\"scroll\", resetPosition);\n      scrollContainer.style.scrollbarWidth = scrollbarWidth;\n    };\n  }, [animationDuration, animatedElementRef]);\n\n  return lockScroll;\n};\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AA8BO,MAAM,gBAAgB,CAC3B,oBACA;;IAEA,MAAM,qBAAqB,IAAA,gXAAM,EAAqB;IACtD,MAAM,aAAa,IAAA,gXAAM,EAAsB;IAE/C,IAAA,mXAAS;mCAAC;YACR;2CAAO;oBACL,WAAW,OAAO;gBACpB;;QACF;kCAAG,EAAE;IAEL,MAAM,aAAa,IAAA,qXAAW;iDAAC;YAC7B,WAAW,OAAO;YAElB,CAAC,SAAS;gBACR,IAAI,mBAAmB,OAAO,IAAI,CAAC,mBAAmB,OAAO,EAAE;gBAE/D,IAAI,KAAyB,mBAAmB,OAAO;gBACvD,MAAO,GAAI;oBACT,MAAM,EAAE,SAAS,EAAE,GAAG,iBAAiB;oBACvC,IAAI,cAAc,YAAY,cAAc,QAAQ;wBAClD,mBAAmB,OAAO,GAAG;wBAC7B;oBACF;oBACA,KAAK,GAAG,aAAa;gBACvB;YACF,CAAC;YAED,MAAM,kBAAkB,mBAAmB,OAAO;YAClD,IAAI,CAAC,iBAAiB;YAEtB,MAAM,iBAAiB,gBAAgB,SAAS;YAChD,MAAM,iBAAiB,gBAAgB,KAAK,CAAC,cAAc;YAE3D,gBAAgB,KAAK,CAAC,cAAc,GAAG;YAEvC,MAAM;uEAAgB,IAAO,gBAAgB,SAAS,GAAG;;YACzD,gBAAgB,gBAAgB,CAAC,UAAU;YAE3C,MAAM,YAAY;mEAAW;oBAC3B,gBAAgB,mBAAmB,CAAC,UAAU;oBAC9C,gBAAgB,KAAK,CAAC,cAAc,GAAG;oBACvC,WAAW,OAAO,GAAG;gBACvB;kEAAG;YAEH,WAAW,OAAO;yDAAG;oBACnB,aAAa;oBACb,gBAAgB,mBAAmB,CAAC,UAAU;oBAC9C,gBAAgB,KAAK,CAAC,cAAc,GAAG;gBACzC;;QACF;gDAAG;QAAC;QAAmB;KAAmB;IAE1C,OAAO;AACT;GAvDa"}},
    {"offset": {"line": 6933, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 6946, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar-more/scope.tsx"],"sourcesContent":["import * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport type { Scope } from \"@radix-ui/react-context\";\n\nexport const useDropdownMenuScope: ReturnType<\n  typeof DropdownMenuPrimitive.createDropdownMenuScope\n> = DropdownMenuPrimitive.createDropdownMenuScope();\n\nexport type ScopedProps<P> = P & { __scopeActionBarMore?: Scope };\n"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,uBAET,2ZAA6C"}},
    {"offset": {"line": 6960, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar-more/action-bar-more-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { FC } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveRoot {\n  export type Props = DropdownMenuPrimitive.DropdownMenuProps;\n}\n\nexport const ActionBarMorePrimitiveRoot: FC<\n  ActionBarMorePrimitiveRoot.Props\n> = ({\n  __scopeActionBarMore,\n  ...rest\n}: ScopedProps<ActionBarMorePrimitiveRoot.Props>) => {\n  const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n  return <DropdownMenuPrimitive.Root {...scope} {...rest} />;\n};\n\nActionBarMorePrimitiveRoot.displayName = \"ActionBarMorePrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;AAJA;;;AAUO,MAAM,6BAET,CAAC,EACH,oBAAoB,EACpB,GAAG,MAC2C;;IAC9C,MAAM,QAAQ,IAAA,oMAAoB,EAAC;IAEnC,qBAAO,sYAAC,wYAA0B;QAAE,GAAG,KAAK;QAAG,GAAG,IAAI;;;;;;AACxD;GATa;;QAMG,oMAAoB;;;KANvB;AAWb,2BAA2B,WAAW,GAAG"}},
    {"offset": {"line": 7000, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar-more/action-bar-more-trigger.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveTrigger {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Trigger>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Trigger\n  >;\n}\n\nexport const ActionBarMorePrimitiveTrigger = forwardRef<\n  ActionBarMorePrimitiveTrigger.Element,\n  ActionBarMorePrimitiveTrigger.Props\n>(\n  (\n    {\n      __scopeActionBarMore,\n      ...rest\n    }: ScopedProps<ActionBarMorePrimitiveTrigger.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n    return <DropdownMenuPrimitive.Trigger {...scope} {...rest} ref={ref} />;\n  },\n);\n\nActionBarMorePrimitiveTrigger.displayName = \"ActionBarMorePrimitive.Trigger\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,MAAM,8CAAgC,GAAA,IAAA,oXAAU,UAIrD,CACE,EACE,oBAAoB,EACpB,GAAG,MAC8C,EACnD;;IAEA,MAAM,QAAQ,IAAA,oMAAoB,EAAC;IAEnC,qBAAO,sYAAC,2YAA6B;QAAE,GAAG,KAAK;QAAG,GAAG,IAAI;QAAE,KAAK;;;;;;AAClE;;QAHgB,oMAAoB;;;;QAApB,oMAAoB;;;;AAMtC,8BAA8B,WAAW,GAAG"}},
    {"offset": {"line": 7047, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar-more/action-bar-more-content.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveContent {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Content>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Content\n  > & {\n    portalProps?:\n      | ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Portal>\n      | undefined;\n  };\n}\n\nexport const ActionBarMorePrimitiveContent = forwardRef<\n  ActionBarMorePrimitiveContent.Element,\n  ActionBarMorePrimitiveContent.Props\n>(\n  (\n    {\n      __scopeActionBarMore,\n      portalProps,\n      sideOffset = 4,\n      ...props\n    }: ScopedProps<ActionBarMorePrimitiveContent.Props>,\n    forwardedRef,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n    return (\n      <DropdownMenuPrimitive.Portal {...scope} {...portalProps}>\n        <DropdownMenuPrimitive.Content\n          {...scope}\n          {...props}\n          ref={forwardedRef}\n          sideOffset={sideOffset}\n        />\n      </DropdownMenuPrimitive.Portal>\n    );\n  },\n);\n\nActionBarMorePrimitiveContent.displayName = \"ActionBarMorePrimitive.Content\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBO,MAAM,8CAAgC,GAAA,IAAA,oXAAU,UAIrD,CACE,EACE,oBAAoB,EACpB,WAAW,EACX,aAAa,CAAC,EACd,GAAG,OAC8C,EACnD;;IAEA,MAAM,QAAQ,IAAA,oMAAoB,EAAC;IAEnC,qBACE,sYAAC,0YAA4B;QAAE,GAAG,KAAK;QAAG,GAAG,WAAW;kBACtD,cAAA,sYAAC,2YAA6B;YAC3B,GAAG,KAAK;YACR,GAAG,KAAK;YACT,KAAK;YACL,YAAY;;;;;;;;;;;AAIpB;;QAZgB,oMAAoB;;;;QAApB,oMAAoB;;;;AAetC,8BAA8B,WAAW,GAAG"}},
    {"offset": {"line": 7103, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar-more/action-bar-more-item.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveItem {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Item>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Item\n  >;\n}\n\nexport const ActionBarMorePrimitiveItem = forwardRef<\n  ActionBarMorePrimitiveItem.Element,\n  ActionBarMorePrimitiveItem.Props\n>(\n  (\n    {\n      __scopeActionBarMore,\n      ...rest\n    }: ScopedProps<ActionBarMorePrimitiveItem.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n    return <DropdownMenuPrimitive.Item {...scope} {...rest} ref={ref} />;\n  },\n);\n\nActionBarMorePrimitiveItem.displayName = \"ActionBarMorePrimitive.Item\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,MAAM,2CAA6B,GAAA,IAAA,oXAAU,UAIlD,CACE,EACE,oBAAoB,EACpB,GAAG,MAC2C,EAChD;;IAEA,MAAM,QAAQ,IAAA,oMAAoB,EAAC;IAEnC,qBAAO,sYAAC,wYAA0B;QAAE,GAAG,KAAK;QAAG,GAAG,IAAI;QAAE,KAAK;;;;;;AAC/D;;QAHgB,oMAAoB;;;;QAApB,oMAAoB;;;;AAMtC,2BAA2B,WAAW,GAAG"}},
    {"offset": {"line": 7150, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar-more/action-bar-more-separator.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ActionBarMorePrimitiveSeparator {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Separator>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Separator\n  >;\n}\n\nexport const ActionBarMorePrimitiveSeparator = forwardRef<\n  ActionBarMorePrimitiveSeparator.Element,\n  ActionBarMorePrimitiveSeparator.Props\n>(\n  (\n    {\n      __scopeActionBarMore,\n      ...rest\n    }: ScopedProps<ActionBarMorePrimitiveSeparator.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeActionBarMore);\n\n    return <DropdownMenuPrimitive.Separator {...scope} {...rest} ref={ref} />;\n  },\n);\n\nActionBarMorePrimitiveSeparator.displayName =\n  \"ActionBarMorePrimitive.Separator\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,MAAM,gDAAkC,GAAA,IAAA,oXAAU,UAIvD,CACE,EACE,oBAAoB,EACpB,GAAG,MACgD,EACrD;;IAEA,MAAM,QAAQ,IAAA,oMAAoB,EAAC;IAEnC,qBAAO,sYAAC,6YAA+B;QAAE,GAAG,KAAK;QAAG,GAAG,IAAI;QAAE,KAAK;;;;;;AACpE;;QAHgB,oMAAoB;;;;QAApB,oMAAoB;;;;AAMtC,gCAAgC,WAAW,GACzC"}},
    {"offset": {"line": 7228, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 7245, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/use-action-bar-float-status.tsx"],"sourcesContent":["\"use client\";\n\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nexport enum HideAndFloatStatus {\n  Hidden = \"hidden\",\n  Floating = \"floating\",\n  Normal = \"normal\",\n}\n\nexport type UseActionBarFloatStatusProps = {\n  hideWhenRunning?: boolean | undefined;\n  autohide?: \"always\" | \"not-last\" | \"never\" | undefined;\n  autohideFloat?: \"always\" | \"single-branch\" | \"never\" | undefined;\n};\n\nexport const useActionBarFloatStatus = ({\n  hideWhenRunning,\n  autohide,\n  autohideFloat,\n}: UseActionBarFloatStatusProps) => {\n  return useAuiState(({ thread, message }) => {\n    if (hideWhenRunning && thread.isRunning) return HideAndFloatStatus.Hidden;\n\n    const autohideEnabled =\n      autohide === \"always\" || (autohide === \"not-last\" && !message.isLast);\n\n    // normal status\n    if (!autohideEnabled) return HideAndFloatStatus.Normal;\n\n    // hidden status\n    if (!message.isHovering) return HideAndFloatStatus.Hidden;\n\n    // floating status\n    if (\n      autohideFloat === \"always\" ||\n      (autohideFloat === \"single-branch\" && message.branchCount <= 1)\n    )\n      return HideAndFloatStatus.Floating;\n\n    return HideAndFloatStatus.Normal;\n  });\n};\n"],"names":[],"mappings":";;;;;;AAEA;;AAFA;;AAIO,IAAA,AAAK,4CAAA;;;;WAAA;;AAYL,MAAM,0BAA0B,CAAC,EACtC,eAAe,EACf,QAAQ,EACR,aAAa,EACgB;;IAC7B,OAAO,IAAA,kKAAW;+CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;YACrC,IAAI,mBAAmB,OAAO,SAAS,EAAE;YAEzC,MAAM,kBACJ,aAAa,YAAa,aAAa,cAAc,CAAC,QAAQ,MAAM;YAEtE,gBAAgB;YAChB,IAAI,CAAC,iBAAiB;YAEtB,gBAAgB;YAChB,IAAI,CAAC,QAAQ,UAAU,EAAE;YAEzB,kBAAkB;YAClB,IACE,kBAAkB,YACjB,kBAAkB,mBAAmB,QAAQ,WAAW,IAAI,GAE7D;YAEF;QACF;;AACF;GA1Ba;;QAKJ,kKAAW"}},
    {"offset": {"line": 7289, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/action-bar-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport {\n  useActionBarFloatStatus,\n  HideAndFloatStatus,\n} from \"./use-action-bar-float-status\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ActionBarPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps & {\n    /**\n     * Whether to hide the action bar when the thread is running.\n     * @default false\n     */\n    hideWhenRunning?: boolean | undefined;\n    /**\n     * Controls when the action bar should automatically hide.\n     * - \"always\": Always hide unless hovered\n     * - \"not-last\": Hide unless this is the last message\n     * - \"never\": Never auto-hide\n     * @default \"never\"\n     */\n    autohide?: \"always\" | \"not-last\" | \"never\" | undefined;\n    /**\n     * Controls floating behavior when auto-hidden.\n     * - \"always\": Always float when hidden\n     * - \"single-branch\": Float only for single-branch messages\n     * - \"never\": Never float\n     * @default \"never\"\n     */\n    autohideFloat?: \"always\" | \"single-branch\" | \"never\" | undefined;\n  };\n}\n\n/**\n * The root container for action bar components.\n *\n * This component provides intelligent visibility and floating behavior for action bars,\n * automatically hiding and showing based on message state, hover status, and configuration.\n * It supports floating mode for better UX when space is limited.\n *\n * @example\n * ```tsx\n * <ActionBarPrimitive.Root\n *   hideWhenRunning={true}\n *   autohide=\"not-last\"\n *   autohideFloat=\"single-branch\"\n * >\n *   <ActionBarPrimitive.Copy />\n *   <ActionBarPrimitive.Edit />\n *   <ActionBarPrimitive.Reload />\n * </ActionBarPrimitive.Root>\n * ```\n */\nexport const ActionBarPrimitiveRoot = forwardRef<\n  ActionBarPrimitiveRoot.Element,\n  ActionBarPrimitiveRoot.Props\n>(({ hideWhenRunning, autohide, autohideFloat, ...rest }, ref) => {\n  const hideAndfloatStatus = useActionBarFloatStatus({\n    hideWhenRunning,\n    autohide,\n    autohideFloat,\n  });\n\n  if (hideAndfloatStatus === HideAndFloatStatus.Hidden) return null;\n\n  return (\n    <Primitive.div\n      {...(hideAndfloatStatus === HideAndFloatStatus.Floating\n        ? { \"data-floating\": \"true\" }\n        : null)}\n      {...rest}\n      ref={ref}\n    />\n  );\n});\n\nActionBarPrimitiveRoot.displayName = \"ActionBarPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AA0DO,MAAM,uCAAyB,GAAA,IAAA,oXAAU,UAG9C,CAAC,EAAE,eAAe,EAAE,QAAQ,EAAE,aAAa,EAAE,GAAG,MAAM,EAAE;;IACxD,MAAM,qBAAqB,IAAA,iOAAuB,EAAC;QACjD;QACA;QACA;IACF;IAEA,IAAI,uBAAuB,4NAAkB,CAAC,MAAM,EAAE,OAAO;IAE7D,qBACE,sYAAC,sYAAS,CAAC,GAAG;QACX,GAAI,uBAAuB,4NAAkB,CAAC,QAAQ,GACnD;YAAE,iBAAiB;QAAO,IAC1B,IAAI;QACP,GAAG,IAAI;QACR,KAAK;;;;;;AAGX;;QAjB6B,iOAAuB;;;;QAAvB,iOAAuB;;;;AAmBpD,uBAAuB,WAAW,GAAG"}},
    {"offset": {"line": 7343, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/action-bar-copy.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { ActionButtonProps } from \"../../utils/create-action-button\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\n/**\n * Hook that provides copy functionality for action bar buttons.\n *\n * This hook returns a callback function that copies message content to the clipboard,\n * or null if copying is not available. It handles both regular message content and\n * composer text when in editing mode.\n *\n * @param options Configuration options\n * @param options.copiedDuration Duration in milliseconds to show the copied state\n * @returns A copy callback function, or null if copying is disabled\n *\n * @example\n * ```tsx\n * function CustomCopyButton() {\n *   const copy = useActionBarPrimitiveCopy({ copiedDuration: 2000 });\n *\n *   return (\n *     <button onClick={copy} disabled={!copy}>\n *       {copy ? \"Copy\" : \"Cannot Copy\"}\n *     </button>\n *   );\n * }\n * ```\n */\nconst useActionBarPrimitiveCopy = ({\n  copiedDuration = 3000,\n}: {\n  copiedDuration?: number | undefined;\n} = {}) => {\n  const aui = useAui();\n  const hasCopyableContent = useAuiState(({ message }) => {\n    return (\n      (message.role !== \"assistant\" || message.status?.type !== \"running\") &&\n      message.parts.some((c) => c.type === \"text\" && c.text.length > 0)\n    );\n  });\n\n  const isEditing = useAuiState(({ composer }) => composer.isEditing);\n  const composerValue = useAuiState(({ composer }) => composer.text);\n\n  const callback = useCallback(() => {\n    const valueToCopy = isEditing ? composerValue : aui.message().getCopyText();\n\n    if (!valueToCopy) return;\n\n    navigator.clipboard.writeText(valueToCopy).then(() => {\n      aui.message().setIsCopied(true);\n      setTimeout(() => aui.message().setIsCopied(false), copiedDuration);\n    });\n  }, [aui, isEditing, composerValue, copiedDuration]);\n\n  if (!hasCopyableContent) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveCopy {\n  export type Element = HTMLButtonElement;\n  /**\n   * Props for the ActionBarPrimitive.Copy component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useActionBarPrimitiveCopy>;\n}\n\n/**\n * A button component that copies message content to the clipboard.\n *\n * This component automatically handles copying message text to the clipboard\n * and provides visual feedback through the data-copied attribute. It's disabled\n * when there's no copyable content available.\n *\n * @example\n * ```tsx\n * <ActionBarPrimitive.Copy copiedDuration={2000}>\n *   Copy Message\n * </ActionBarPrimitive.Copy>\n * ```\n */\nexport const ActionBarPrimitiveCopy = forwardRef<\n  ActionBarPrimitiveCopy.Element,\n  ActionBarPrimitiveCopy.Props\n>(({ copiedDuration, onClick, disabled, ...props }, forwardedRef) => {\n  const isCopied = useAuiState(({ message }) => message.isCopied);\n  const callback = useActionBarPrimitiveCopy({ copiedDuration });\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isCopied ? { \"data-copied\": \"true\" } : {})}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveCopy.displayName = \"ActionBarPrimitive.Copy\";\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAEA;AAAA;;;AAPA;;;;;;AASA;;;;;;;;;;;;;;;;;;;;;;;CAuBC,GACD,MAAM,4BAA4B,CAAC,EACjC,iBAAiB,IAAI,EAGtB,GAAG,CAAC,CAAC;;IACJ,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,qBAAqB,IAAA,kKAAW;qEAAC,CAAC,EAAE,OAAO,EAAE;YACjD,OACE,CAAC,QAAQ,IAAI,KAAK,eAAe,QAAQ,MAAM,EAAE,SAAS,SAAS,KACnE,QAAQ,KAAK,CAAC,IAAI;6EAAC,CAAC,IAAM,EAAE,IAAI,KAAK,UAAU,EAAE,IAAI,CAAC,MAAM,GAAG;;QAEnE;;IAEA,MAAM,YAAY,IAAA,kKAAW;4DAAC,CAAC,EAAE,QAAQ,EAAE,GAAK,SAAS,SAAS;;IAClE,MAAM,gBAAgB,IAAA,kKAAW;gEAAC,CAAC,EAAE,QAAQ,EAAE,GAAK,SAAS,IAAI;;IAEjE,MAAM,WAAW,IAAA,qXAAW;2DAAC;YAC3B,MAAM,cAAc,YAAY,gBAAgB,IAAI,OAAO,GAAG,WAAW;YAEzE,IAAI,CAAC,aAAa;YAElB,UAAU,SAAS,CAAC,SAAS,CAAC,aAAa,IAAI;mEAAC;oBAC9C,IAAI,OAAO,GAAG,WAAW,CAAC;oBAC1B;2EAAW,IAAM,IAAI,OAAO,GAAG,WAAW,CAAC;0EAAQ;gBACrD;;QACF;0DAAG;QAAC;QAAK;QAAW;QAAe;KAAe;IAElD,IAAI,CAAC,oBAAoB,OAAO;IAChC,OAAO;AACT;GA7BM;;QAKQ,oJAAM;QACS,kKAAW;QAOpB,kKAAW;QACP,kKAAW;;;AAwC5B,MAAM,uCAAyB,IAAA,IAAA,oXAAU,WAG9C,CAAC,EAAE,cAAc,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IAClD,MAAM,WAAW,IAAA,kKAAW;wDAAC,CAAC,EAAE,OAAO,EAAE,GAAK,QAAQ,QAAQ;;IAC9D,MAAM,WAAW,0BAA0B;QAAE;IAAe;IAC5D,qBACE,sYAAC,sYAAS,CAAC,MAAM;QACf,MAAK;QACJ,GAAI,WAAW;YAAE,eAAe;QAAO,IAAI,CAAC,CAAC;QAC7C,GAAG,KAAK;QACT,KAAK;QACL,UAAU,YAAY,CAAC;QACvB,SAAS,IAAA,8PAAoB,EAAC,SAAS;YACrC;QACF;;;;;;AAGN;;QAdmB,kKAAW;QACX;;;;QADA,kKAAW;QACX;;;;AAenB,uBAAuB,WAAW,GAAG"}},
    {"offset": {"line": 7477, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/action-bar-reload.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\n/**\n * Hook that provides reload functionality for action bar buttons.\n *\n * This hook returns a callback function that reloads/regenerates the current assistant message,\n * or null if reloading is not available (e.g., thread is running, disabled, or message is not from assistant).\n *\n * @returns A reload callback function, or null if reloading is disabled\n *\n * @example\n * ```tsx\n * function CustomReloadButton() {\n *   const reload = useActionBarReload();\n *\n *   return (\n *     <button onClick={reload} disabled={!reload}>\n *       {reload ? \"Reload Message\" : \"Cannot Reload\"}\n *     </button>\n *   );\n * }\n * ```\n */\nconst useActionBarReload = () => {\n  const aui = useAui();\n\n  const disabled = useAuiState(\n    (s) =>\n      s.thread.isRunning ||\n      s.thread.isDisabled ||\n      s.message.role !== \"assistant\",\n  );\n\n  const callback = useCallback(() => {\n    aui.message().reload();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveReload {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the ActionBarPrimitive.Reload component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useActionBarReload>;\n}\n\n/**\n * A button component that reloads/regenerates the current assistant message.\n *\n * This component automatically handles reloading the current assistant message\n * and is disabled when reloading is not available (e.g., thread is running,\n * disabled, or message is not from assistant).\n *\n * @example\n * ```tsx\n * <ActionBarPrimitive.Reload>\n *   Reload Message\n * </ActionBarPrimitive.Reload>\n * ```\n */\nexport const ActionBarPrimitiveReload = createActionButton(\n  \"ActionBarPrimitive.Reload\",\n  useActionBarReload,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;AAAA;;AARA;;;;AAUA;;;;;;;;;;;;;;;;;;;;CAoBC,GACD,MAAM,qBAAqB;;IACzB,MAAM,MAAM,IAAA,oJAAM;IAElB,MAAM,WAAW,IAAA,kKAAW;oDAC1B,CAAC,IACC,EAAE,MAAM,CAAC,SAAS,IAClB,EAAE,MAAM,CAAC,UAAU,IACnB,EAAE,OAAO,CAAC,IAAI,KAAK;;IAGvB,MAAM,WAAW,IAAA,qXAAW;oDAAC;YAC3B,IAAI,OAAO,GAAG,MAAM;QACtB;mDAAG;QAAC;KAAI;IAER,IAAI,UAAU,OAAO;IACrB,OAAO;AACT;GAhBM;;QACQ,oJAAM;QAED,kKAAW;;;AAsCvB,MAAM,2BAA2B,IAAA,yLAAkB,EACxD,6BACA"}},
    {"offset": {"line": 7540, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/action-bar-edit.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\n/**\n * Hook that provides edit functionality for action bar buttons.\n *\n * This hook returns a callback function that starts editing the current message,\n * or null if editing is not available (e.g., already in editing mode).\n *\n * @returns An edit callback function, or null if editing is disabled\n *\n * @example\n * ```tsx\n * function CustomEditButton() {\n *   const edit = useActionBarEdit();\n *\n *   return (\n *     <button onClick={edit} disabled={!edit}>\n *       {edit ? \"Edit Message\" : \"Cannot Edit\"}\n *     </button>\n *   );\n * }\n * ```\n */\nconst useActionBarEdit = () => {\n  const aui = useAui();\n  const disabled = useAuiState(({ composer }) => composer.isEditing);\n\n  const callback = useCallback(() => {\n    aui.composer().beginEdit();\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveEdit {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the ActionBarPrimitive.Edit component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useActionBarEdit>;\n}\n\n/**\n * A button component that starts editing the current message.\n *\n * This component automatically handles starting the edit mode for the current message\n * and is disabled when editing is not available (e.g., already in editing mode).\n *\n * @example\n * ```tsx\n * <ActionBarPrimitive.Edit>\n *   Edit Message\n * </ActionBarPrimitive.Edit>\n * ```\n */\nexport const ActionBarPrimitiveEdit = createActionButton(\n  \"ActionBarPrimitive.Edit\",\n  useActionBarEdit,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;AAAA;;AARA;;;;AAUA;;;;;;;;;;;;;;;;;;;;CAoBC,GACD,MAAM,mBAAmB;;IACvB,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,WAAW,IAAA,kKAAW;kDAAC,CAAC,EAAE,QAAQ,EAAE,GAAK,SAAS,SAAS;;IAEjE,MAAM,WAAW,IAAA,qXAAW;kDAAC;YAC3B,IAAI,QAAQ,GAAG,SAAS;QAC1B;iDAAG;QAAC;KAAI;IAER,IAAI,UAAU,OAAO;IACrB,OAAO;AACT;GAVM;;QACQ,oJAAM;QACD,kKAAW;;;AAgCvB,MAAM,yBAAyB,IAAA,yLAAkB,EACtD,2BACA"}},
    {"offset": {"line": 7603, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/action-bar-speak.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\n\nconst useActionBarSpeak = () => {\n  const aui = useAui();\n  const callback = useCallback(async () => {\n    aui.message().speak();\n  }, [aui]);\n\n  const hasSpeakableContent = useAuiState(({ message }) => {\n    return (\n      (message.role !== \"assistant\" || message.status?.type !== \"running\") &&\n      message.parts.some((c) => c.type === \"text\" && c.text.length > 0)\n    );\n  });\n\n  if (!hasSpeakableContent) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveSpeak {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarSpeak>;\n}\n\nexport const ActionBarPrimitiveSpeak = createActionButton(\n  \"ActionBarPrimitive.Speak\",\n  useActionBarSpeak,\n);\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;;AAJA;;;;AAUA,MAAM,oBAAoB;;IACxB,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,WAAW,IAAA,qXAAW;mDAAC;YAC3B,IAAI,OAAO,GAAG,KAAK;QACrB;kDAAG;QAAC;KAAI;IAER,MAAM,sBAAsB,IAAA,kKAAW;8DAAC,CAAC,EAAE,OAAO,EAAE;YAClD,OACE,CAAC,QAAQ,IAAI,KAAK,eAAe,QAAQ,MAAM,EAAE,SAAS,SAAS,KACnE,QAAQ,KAAK,CAAC,IAAI;sEAAC,CAAC,IAAM,EAAE,IAAI,KAAK,UAAU,EAAE,IAAI,CAAC,MAAM,GAAG;;QAEnE;;IAEA,IAAI,CAAC,qBAAqB,OAAO;IACjC,OAAO;AACT;GAfM;;QACQ,oJAAM;QAKU,kKAAW;;;AAgBlC,MAAM,0BAA0B,IAAA,yLAAkB,EACvD,4BACA"}},
    {"offset": {"line": 7650, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/action-bar-stop-speaking.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { ActionButtonProps } from \"../../utils/create-action-button\";\nimport { useEscapeKeydown } from \"@radix-ui/react-use-escape-keydown\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\nconst useActionBarStopSpeaking = () => {\n  const aui = useAui();\n  const isSpeaking = useAuiState(({ message }) => message.speech != null);\n\n  const callback = useCallback(() => {\n    aui.message().stopSpeaking();\n  }, [aui]);\n\n  if (!isSpeaking) return null;\n\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveStopSpeaking {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarStopSpeaking>;\n}\n\nexport const ActionBarPrimitiveStopSpeaking = forwardRef<\n  ActionBarPrimitiveStopSpeaking.Element,\n  ActionBarPrimitiveStopSpeaking.Props\n>((props, ref) => {\n  const callback = useActionBarStopSpeaking();\n\n  // TODO this stops working if the user is not hovering over an older message\n  useEscapeKeydown((e) => {\n    if (callback) {\n      e.preventDefault();\n      callback();\n    }\n  });\n\n  return (\n    <Primitive.button\n      type=\"button\"\n      disabled={!callback}\n      {...props}\n      ref={ref}\n      onClick={composeEventHandlers(props.onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveStopSpeaking.displayName = \"ActionBarPrimitive.StopSpeaking\";\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AAEA;AAAA;;;AARA;;;;;;;AAUA,MAAM,2BAA2B;;IAC/B,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,aAAa,IAAA,kKAAW;4DAAC,CAAC,EAAE,OAAO,EAAE,GAAK,QAAQ,MAAM,IAAI;;IAElE,MAAM,WAAW,IAAA,qXAAW;0DAAC;YAC3B,IAAI,OAAO,GAAG,YAAY;QAC5B;yDAAG;QAAC;KAAI;IAER,IAAI,CAAC,YAAY,OAAO;IAExB,OAAO;AACT;GAXM;;QACQ,oJAAM;QACC,kKAAW;;;AAgBzB,MAAM,+CAAiC,IAAA,IAAA,oXAAU,WAGtD,CAAC,OAAO;;IACR,MAAM,WAAW;IAEjB,4EAA4E;IAC5E,IAAA,oWAAgB;2DAAC,CAAC;YAChB,IAAI,UAAU;gBACZ,EAAE,cAAc;gBAChB;YACF;QACF;;IAEA,qBACE,sYAAC,sYAAS,CAAC,MAAM;QACf,MAAK;QACL,UAAU,CAAC;QACV,GAAG,KAAK;QACT,KAAK;QACL,SAAS,IAAA,8PAAoB,EAAC,MAAM,OAAO,EAAE;YAC3C;QACF;;;;;;AAGN;;QArBmB;QAGjB,oWAAgB;;;;QAHC;QAGjB,oWAAgB;;;;AAoBlB,+BAA+B,WAAW,GAAG"}},
    {"offset": {"line": 7740, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/action-bar-feedback-positive.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef, useCallback } from \"react\";\nimport { ActionButtonProps } from \"../../utils/create-action-button\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\n\nconst useActionBarFeedbackPositive = () => {\n  const aui = useAui();\n\n  const callback = useCallback(() => {\n    aui.message().submitFeedback({ type: \"positive\" });\n  }, [aui]);\n\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveFeedbackPositive {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarFeedbackPositive>;\n}\n\nexport const ActionBarPrimitiveFeedbackPositive = forwardRef<\n  ActionBarPrimitiveFeedbackPositive.Element,\n  ActionBarPrimitiveFeedbackPositive.Props\n>(({ onClick, disabled, ...props }, forwardedRef) => {\n  const isSubmitted = useAuiState(\n    (s) => s.message.metadata.submittedFeedback?.type === \"positive\",\n  );\n  const callback = useActionBarFeedbackPositive();\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isSubmitted ? { \"data-submitted\": \"true\" } : {})}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveFeedbackPositive.displayName =\n  \"ActionBarPrimitive.FeedbackPositive\";\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAAA;AACA;;;AANA;;;;;AAQA,MAAM,+BAA+B;;IACnC,MAAM,MAAM,IAAA,oJAAM;IAElB,MAAM,WAAW,IAAA,qXAAW;8DAAC;YAC3B,IAAI,OAAO,GAAG,cAAc,CAAC;gBAAE,MAAM;YAAW;QAClD;6DAAG;QAAC;KAAI;IAER,OAAO;AACT;GARM;;QACQ,oJAAM;;;AAcb,MAAM,mDAAqC,IAAA,IAAA,oXAAU,WAG1D,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IAClC,MAAM,cAAc,IAAA,kKAAW;uEAC7B,CAAC,IAAM,EAAE,OAAO,CAAC,QAAQ,CAAC,iBAAiB,EAAE,SAAS;;IAExD,MAAM,WAAW;IACjB,qBACE,sYAAC,sYAAS,CAAC,MAAM;QACf,MAAK;QACJ,GAAI,cAAc;YAAE,kBAAkB;QAAO,IAAI,CAAC,CAAC;QACnD,GAAG,KAAK;QACT,KAAK;QACL,UAAU,YAAY,CAAC;QACvB,SAAS,IAAA,8PAAoB,EAAC,SAAS;YACrC;QACF;;;;;;AAGN;;QAhBsB,kKAAW;QAGd;;;;QAHG,kKAAW;QAGd;;;;AAenB,mCAAmC,WAAW,GAC5C"}},
    {"offset": {"line": 7821, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/action-bar-feedback-negative.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef } from \"react\";\nimport { ActionButtonProps } from \"../../utils/create-action-button\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\nconst useActionBarFeedbackNegative = () => {\n  const aui = useAui();\n\n  const callback = useCallback(() => {\n    aui.message().submitFeedback({ type: \"negative\" });\n  }, [aui]);\n\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveFeedbackNegative {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarFeedbackNegative>;\n}\n\nexport const ActionBarPrimitiveFeedbackNegative = forwardRef<\n  ActionBarPrimitiveFeedbackNegative.Element,\n  ActionBarPrimitiveFeedbackNegative.Props\n>(({ onClick, disabled, ...props }, forwardedRef) => {\n  const isSubmitted = useAuiState(\n    (s) => s.message.metadata.submittedFeedback?.type === \"negative\",\n  );\n  const callback = useActionBarFeedbackNegative();\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isSubmitted ? { \"data-submitted\": \"true\" } : {})}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveFeedbackNegative.displayName =\n  \"ActionBarPrimitive.FeedbackNegative\";\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAEA;AAAA;;;AAPA;;;;;;AASA,MAAM,+BAA+B;;IACnC,MAAM,MAAM,IAAA,oJAAM;IAElB,MAAM,WAAW,IAAA,qXAAW;8DAAC;YAC3B,IAAI,OAAO,GAAG,cAAc,CAAC;gBAAE,MAAM;YAAW;QAClD;6DAAG;QAAC;KAAI;IAER,OAAO;AACT;GARM;;QACQ,oJAAM;;;AAcb,MAAM,mDAAqC,IAAA,IAAA,oXAAU,WAG1D,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IAClC,MAAM,cAAc,IAAA,kKAAW;uEAC7B,CAAC,IAAM,EAAE,OAAO,CAAC,QAAQ,CAAC,iBAAiB,EAAE,SAAS;;IAExD,MAAM,WAAW;IACjB,qBACE,sYAAC,sYAAS,CAAC,MAAM;QACf,MAAK;QACJ,GAAI,cAAc;YAAE,kBAAkB;QAAO,IAAI,CAAC,CAAC;QACnD,GAAG,KAAK;QACT,KAAK;QACL,UAAU,YAAY,CAAC;QACvB,SAAS,IAAA,8PAAoB,EAAC,SAAS;YACrC;QACF;;;;;;AAGN;;QAhBsB,kKAAW;QAGd;;;;QAHG,kKAAW;QAGd;;;;AAenB,mCAAmC,WAAW,GAC5C"}},
    {"offset": {"line": 7903, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/action-bar/action-bar-export-markdown.tsx"],"sourcesContent":["\"use client\";\n\nimport { forwardRef, useCallback } from \"react\";\nimport { ActionButtonProps } from \"../../utils/create-action-button\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\nconst useActionBarExportMarkdown = ({\n  filename,\n  onExport,\n}: {\n  filename?: string | undefined;\n  onExport?: ((content: string) => void | Promise<void>) | undefined;\n} = {}) => {\n  const aui = useAui();\n  const hasExportableContent = useAuiState(({ message }) => {\n    return (\n      (message.role !== \"assistant\" || message.status?.type !== \"running\") &&\n      message.parts.some((c) => c.type === \"text\" && c.text.length > 0)\n    );\n  });\n\n  const callback = useCallback(async () => {\n    const content = aui.message().getCopyText();\n    if (!content) return;\n\n    if (onExport) {\n      await onExport(content);\n      return;\n    }\n\n    const blob = new Blob([content], { type: \"text/markdown\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = filename ?? `message-${Date.now()}.md`;\n    a.click();\n    URL.revokeObjectURL(url);\n  }, [aui, filename, onExport]);\n\n  if (!hasExportableContent) return null;\n  return callback;\n};\n\nexport namespace ActionBarPrimitiveExportMarkdown {\n  export type Element = HTMLButtonElement;\n  export type Props = ActionButtonProps<typeof useActionBarExportMarkdown>;\n}\n\nexport const ActionBarPrimitiveExportMarkdown = forwardRef<\n  ActionBarPrimitiveExportMarkdown.Element,\n  ActionBarPrimitiveExportMarkdown.Props\n>(({ filename, onExport, onClick, disabled, ...props }, forwardedRef) => {\n  const callback = useActionBarExportMarkdown({ filename, onExport });\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled || !callback}\n      onClick={composeEventHandlers(onClick, () => {\n        callback?.();\n      })}\n    />\n  );\n});\n\nActionBarPrimitiveExportMarkdown.displayName =\n  \"ActionBarPrimitive.ExportMarkdown\";\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AAAA;;;AANA;;;;;AAQA,MAAM,6BAA6B,CAAC,EAClC,QAAQ,EACR,QAAQ,EAIT,GAAG,CAAC,CAAC;;IACJ,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,uBAAuB,IAAA,kKAAW;wEAAC,CAAC,EAAE,OAAO,EAAE;YACnD,OACE,CAAC,QAAQ,IAAI,KAAK,eAAe,QAAQ,MAAM,EAAE,SAAS,SAAS,KACnE,QAAQ,KAAK,CAAC,IAAI;gFAAC,CAAC,IAAM,EAAE,IAAI,KAAK,UAAU,EAAE,IAAI,CAAC,MAAM,GAAG;;QAEnE;;IAEA,MAAM,WAAW,IAAA,qXAAW;4DAAC;YAC3B,MAAM,UAAU,IAAI,OAAO,GAAG,WAAW;YACzC,IAAI,CAAC,SAAS;YAEd,IAAI,UAAU;gBACZ,MAAM,SAAS;gBACf;YACF;YAEA,MAAM,OAAO,IAAI,KAAK;gBAAC;aAAQ,EAAE;gBAAE,MAAM;YAAgB;YACzD,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,MAAM,IAAI,SAAS,aAAa,CAAC;YACjC,EAAE,IAAI,GAAG;YACT,EAAE,QAAQ,GAAG,YAAY,CAAC,QAAQ,EAAE,KAAK,GAAG,GAAG,GAAG,CAAC;YACnD,EAAE,KAAK;YACP,IAAI,eAAe,CAAC;QACtB;2DAAG;QAAC;QAAK;QAAU;KAAS;IAE5B,IAAI,CAAC,sBAAsB,OAAO;IAClC,OAAO;AACT;GAnCM;;QAOQ,oJAAM;QACW,kKAAW;;;AAkCnC,MAAM,iDAAmC,IAAA,IAAA,oXAAU,WAGxD,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IACtD,MAAM,WAAW,2BAA2B;QAAE;QAAU;IAAS;IACjE,qBACE,sYAAC,sYAAS,CAAC,MAAM;QACf,MAAK;QACJ,GAAG,KAAK;QACT,KAAK;QACL,UAAU,YAAY,CAAC;QACvB,SAAS,IAAA,8PAAoB,EAAC,SAAS;YACrC;QACF;;;;;;AAGN;;QAZmB;;;;QAAA;;;;AAcnB,iCAAiC,WAAW,GAC1C"}},
    {"offset": {"line": 8047, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/aui-if.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"./use-aui-state\";\nimport type { AssistantState } from \"./types/client\";\n\nexport namespace AuiIf {\n  export type Props = PropsWithChildren<{ condition: AuiIf.Condition }>;\n  export type Condition = (state: AssistantState) => boolean;\n}\n\nexport const AuiIf: FC<AuiIf.Props> = ({ children, condition }) => {\n  const result = useAuiState(condition);\n  return result ? children : null;\n};\n\nAuiIf.displayName = \"AuiIf\";\n"],"names":[],"mappings":";;;;AAGA;;AAHA;;AAWO,MAAM,QAAyB,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE;;IAC5D,MAAM,SAAS,IAAA,kKAAW,EAAC;IAC3B,OAAO,SAAS,WAAW;AAC7B;GAHa;;QACI,kKAAW;;;KADf;AAKb,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 8085, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 8098, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/branch-picker/branch-picker-next.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\nconst useBranchPickerNext = () => {\n  const aui = useAui();\n  const disabled = useAuiState(({ thread, message }) => {\n    // Disabled if no next branch\n    if (message.branchNumber >= message.branchCount) return true;\n\n    // Disabled if running and capability not supported\n    if (thread.isRunning && !thread.capabilities.switchBranchDuringRun) {\n      return true;\n    }\n\n    return false;\n  });\n\n  const callback = useCallback(() => {\n    aui.message().switchToBranch({ position: \"next\" });\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace BranchPickerPrimitiveNext {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the BranchPickerPrimitive.Next component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useBranchPickerNext>;\n}\n\n/**\n * A button component that navigates to the next branch in the message tree.\n *\n * This component automatically handles switching to the next available branch\n * and is disabled when there are no more branches to navigate to.\n *\n * @example\n * ```tsx\n * <BranchPickerPrimitive.Next>\n *   Next \n * </BranchPickerPrimitive.Next>\n * ```\n */\nexport const BranchPickerPrimitiveNext = createActionButton(\n  \"BranchPickerPrimitive.Next\",\n  useBranchPickerNext,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;AAAA;;AARA;;;;AAUA,MAAM,sBAAsB;;IAC1B,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,WAAW,IAAA,kKAAW;qDAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;YAC/C,6BAA6B;YAC7B,IAAI,QAAQ,YAAY,IAAI,QAAQ,WAAW,EAAE,OAAO;YAExD,mDAAmD;YACnD,IAAI,OAAO,SAAS,IAAI,CAAC,OAAO,YAAY,CAAC,qBAAqB,EAAE;gBAClE,OAAO;YACT;YAEA,OAAO;QACT;;IAEA,MAAM,WAAW,IAAA,qXAAW;qDAAC;YAC3B,IAAI,OAAO,GAAG,cAAc,CAAC;gBAAE,UAAU;YAAO;QAClD;oDAAG;QAAC;KAAI;IAER,IAAI,UAAU,OAAO;IACrB,OAAO;AACT;GApBM;;QACQ,oJAAM;QACD,kKAAW;;;AA0CvB,MAAM,4BAA4B,IAAA,yLAAkB,EACzD,8BACA"}},
    {"offset": {"line": 8151, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/branch-picker/branch-picker-previous.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\n/**\n * Hook that provides navigation to the previous branch functionality.\n *\n * This hook returns a callback function that switches to the previous branch\n * in the message branch tree, or null if there is no previous branch available.\n *\n * @returns A previous branch callback function, or null if navigation is disabled\n *\n * @example\n * ```tsx\n * function CustomPreviousButton() {\n *   const previous = useBranchPickerPrevious();\n *\n *   return (\n *     <button onClick={previous} disabled={!previous}>\n *       {previous ? \"Previous Branch\" : \"No Previous Branch\"}\n *     </button>\n *   );\n * }\n * ```\n */\nconst useBranchPickerPrevious = () => {\n  const aui = useAui();\n  const disabled = useAuiState(({ thread, message }) => {\n    // Disabled if no previous branch\n    if (message.branchNumber <= 1) return true;\n\n    // Disabled if running and capability not supported\n    if (thread.isRunning && !thread.capabilities.switchBranchDuringRun) {\n      return true;\n    }\n\n    return false;\n  });\n\n  const callback = useCallback(() => {\n    aui.message().switchToBranch({ position: \"previous\" });\n  }, [aui]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace BranchPickerPrimitivePrevious {\n  export type Element = ActionButtonElement;\n  /**\n   * Props for the BranchPickerPrimitive.Previous component.\n   * Inherits all button element props and action button functionality.\n   */\n  export type Props = ActionButtonProps<typeof useBranchPickerPrevious>;\n}\n\n/**\n * A button component that navigates to the previous branch in the message tree.\n *\n * This component automatically handles switching to the previous available branch\n * and is disabled when there are no previous branches to navigate to.\n *\n * @example\n * ```tsx\n * <BranchPickerPrimitive.Previous>\n *    Previous\n * </BranchPickerPrimitive.Previous>\n * ```\n */\nexport const BranchPickerPrimitivePrevious = createActionButton(\n  \"BranchPickerPrimitive.Previous\",\n  useBranchPickerPrevious,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;AAAA;;AARA;;;;AAUA;;;;;;;;;;;;;;;;;;;;CAoBC,GACD,MAAM,0BAA0B;;IAC9B,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,WAAW,IAAA,kKAAW;yDAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;YAC/C,iCAAiC;YACjC,IAAI,QAAQ,YAAY,IAAI,GAAG,OAAO;YAEtC,mDAAmD;YACnD,IAAI,OAAO,SAAS,IAAI,CAAC,OAAO,YAAY,CAAC,qBAAqB,EAAE;gBAClE,OAAO;YACT;YAEA,OAAO;QACT;;IAEA,MAAM,WAAW,IAAA,qXAAW;yDAAC;YAC3B,IAAI,OAAO,GAAG,cAAc,CAAC;gBAAE,UAAU;YAAW;QACtD;wDAAG;QAAC;KAAI;IAER,IAAI,UAAU,OAAO;IACrB,OAAO;AACT;GApBM;;QACQ,oJAAM;QACD,kKAAW;;;AA0CvB,MAAM,gCAAgC,IAAA,yLAAkB,EAC7D,kCACA"}},
    {"offset": {"line": 8224, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/branch-picker/branch-picker-count.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nconst useBranchPickerCount = () => {\n  const branchCount = useAuiState(({ message }) => message.branchCount);\n  return branchCount;\n};\n\nexport namespace BranchPickerPrimitiveCount {\n  /**\n   * Props for the BranchPickerPrimitive.Count component.\n   * This component takes no props.\n   */\n  export type Props = Record<string, never>;\n}\n\n/**\n * A component that displays the total number of branches for the current message.\n *\n * This component renders the branch count as plain text, useful for showing\n * users how many alternative responses are available.\n *\n * @example\n * ```tsx\n * <div>\n *   Branch <BranchPickerPrimitive.Count /> of {totalBranches}\n * </div>\n * ```\n */\nexport const BranchPickerPrimitiveCount: FC<\n  BranchPickerPrimitiveCount.Props\n> = () => {\n  const branchCount = useBranchPickerCount();\n  return <>{branchCount}</>;\n};\n\nBranchPickerPrimitiveCount.displayName = \"BranchPickerPrimitive.Count\";\n"],"names":[],"mappings":";;;;;AAGA;;;AAHA;;AAKA,MAAM,uBAAuB;;IAC3B,MAAM,cAAc,IAAA,kKAAW;yDAAC,CAAC,EAAE,OAAO,EAAE,GAAK,QAAQ,WAAW;;IACpE,OAAO;AACT;GAHM;;QACgB,kKAAW;;;AAyB1B,MAAM,6BAET;;IACF,MAAM,cAAc;IACpB,qBAAO;kBAAG;;AACZ;IALa;;QAGS;;;KAHT;AAOb,2BAA2B,WAAW,GAAG"}},
    {"offset": {"line": 8269, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/branch-picker/branch-picker-number.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nconst useBranchPickerNumber = () => {\n  const branchNumber = useAuiState(({ message }) => message.branchNumber);\n  return branchNumber;\n};\n\nexport namespace BranchPickerPrimitiveNumber {\n  export type Props = Record<string, never>;\n}\n\nexport const BranchPickerPrimitiveNumber: FC<\n  BranchPickerPrimitiveNumber.Props\n> = () => {\n  const branchNumber = useBranchPickerNumber();\n  return <>{branchNumber}</>;\n};\n\nBranchPickerPrimitiveNumber.displayName = \"BranchPickerPrimitive.Number\";\n"],"names":[],"mappings":";;;;;AAGA;;;AAHA;;AAKA,MAAM,wBAAwB;;IAC5B,MAAM,eAAe,IAAA,kKAAW;2DAAC,CAAC,EAAE,OAAO,EAAE,GAAK,QAAQ,YAAY;;IACtE,OAAO;AACT;GAHM;;QACiB,kKAAW;;;AAQ3B,MAAM,8BAET;;IACF,MAAM,eAAe;IACrB,qBAAO;kBAAG;;AACZ;IALa;;QAGU;;;KAHV;AAOb,4BAA4B,WAAW,GAAG"}},
    {"offset": {"line": 8323, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/branch-picker/branch-picker-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { If } from \"../message\";\n\nexport namespace BranchPickerPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div> & {\n    /**\n     * Whether to hide the branch picker when there's only one branch available.\n     * When true, the component will only render when multiple branches exist.\n     * @default false\n     */\n    hideWhenSingleBranch?: boolean | undefined;\n  };\n}\n\n/**\n * The root container for branch picker components.\n *\n * This component provides a container for branch navigation controls,\n * with optional conditional rendering based on the number of available branches.\n * It integrates with the message branching system to allow users to navigate\n * between different response variations.\n *\n * @example\n * ```tsx\n * <BranchPickerPrimitive.Root hideWhenSingleBranch={true}>\n *   <BranchPickerPrimitive.Previous />\n *   <BranchPickerPrimitive.Count />\n *   <BranchPickerPrimitive.Next />\n * </BranchPickerPrimitive.Root>\n * ```\n */\nexport const BranchPickerPrimitiveRoot = forwardRef<\n  BranchPickerPrimitiveRoot.Element,\n  BranchPickerPrimitiveRoot.Props\n>(({ hideWhenSingleBranch, ...rest }, ref) => {\n  return (\n    <If hasBranches={hideWhenSingleBranch ? true : undefined}>\n      <Primitive.div {...rest} ref={ref} />\n    </If>\n  );\n});\n\nBranchPickerPrimitiveRoot.displayName = \"BranchPickerPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAmCO,MAAM,0CAA4B,IAAA,oXAAU,OAGjD,CAAC,EAAE,oBAAoB,EAAE,GAAG,MAAM,EAAE;IACpC,qBACE,sYAAC,wNAAE;QAAC,aAAa,uBAAuB,OAAO;kBAC7C,cAAA,sYAAC,sYAAS,CAAC,GAAG;YAAE,GAAG,IAAI;YAAE,KAAK;;;;;;;;;;;AAGpC;;AAEA,0BAA0B,WAAW,GAAG"}},
    {"offset": {"line": 8396, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 8406, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/error/error-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\n\nexport namespace ErrorPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\nexport const ErrorPrimitiveRoot = forwardRef<\n  ErrorPrimitiveRoot.Element,\n  ErrorPrimitiveRoot.Props\n>((props, forwardRef) => {\n  return <Primitive.div role=\"alert\" {...props} ref={forwardRef} />;\n});\n\nErrorPrimitiveRoot.displayName = \"ErrorPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUO,MAAM,mCAAqB,IAAA,oXAAU,OAG1C,CAAC,OAAO;IACR,qBAAO,sYAAC,sYAAS,CAAC,GAAG;QAAC,MAAK;QAAS,GAAG,KAAK;QAAE,KAAK;;;;;;AACrD;;AAEA,mBAAmB,WAAW,GAAG"}},
    {"offset": {"line": 8440, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/error/error-message.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nexport namespace ErrorPrimitiveMessage {\n  export type Element = ComponentRef<typeof Primitive.span>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.span>;\n}\n\nexport const ErrorPrimitiveMessage = forwardRef<\n  ErrorPrimitiveMessage.Element,\n  ErrorPrimitiveMessage.Props\n>(({ children, ...props }, forwardRef) => {\n  const error = useAuiState(({ message }) => {\n    return message.status?.type === \"incomplete\" &&\n      message.status.reason === \"error\"\n      ? message.status.error\n      : undefined;\n  });\n\n  if (error === undefined) return null;\n\n  return (\n    <Primitive.span {...props} ref={forwardRef}>\n      {children ?? String(error)}\n    </Primitive.span>\n  );\n});\n\nErrorPrimitiveMessage.displayName = \"ErrorPrimitive.Message\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAWO,MAAM,sCAAwB,GAAA,IAAA,oXAAU,UAG7C,CAAC,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IACzB,MAAM,QAAQ,IAAA,kKAAW;oDAAC,CAAC,EAAE,OAAO,EAAE;YACpC,OAAO,QAAQ,MAAM,EAAE,SAAS,gBAC9B,QAAQ,MAAM,CAAC,MAAM,KAAK,UACxB,QAAQ,MAAM,CAAC,KAAK,GACpB;QACN;;IAEA,IAAI,UAAU,WAAW,OAAO;IAEhC,qBACE,sYAAC,sYAAS,CAAC,IAAI;QAAE,GAAG,KAAK;QAAE,KAAK;kBAC7B,YAAY,OAAO;;;;;;AAG1B;;QAdgB,kKAAW;;;;QAAX,kKAAW;;;;AAgB3B,sBAAsB,WAAW,GAAG"}},
    {"offset": {"line": 8514, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 8534, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\n\nexport namespace ThreadPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  /**\n   * Props for the ThreadPrimitive.Root component.\n   * Accepts all standard div element props.\n   */\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\n/**\n * The root container component for a thread.\n *\n * This component serves as the foundational wrapper for all thread-related components.\n * It provides the basic structure and context needed for thread functionality.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Root>\n *   <ThreadPrimitive.Viewport>\n *     <ThreadPrimitive.Messages components={{ Message: MyMessage }} />\n *   </ThreadPrimitive.Viewport>\n * </ThreadPrimitive.Root>\n * ```\n */\nexport const ThreadPrimitiveRoot = forwardRef<\n  ThreadPrimitiveRoot.Element,\n  ThreadPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nThreadPrimitiveRoot.displayName = \"ThreadPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AA6BO,MAAM,oCAAsB,IAAA,oXAAU,OAG3C,CAAC,OAAO;IACR,qBAAO,sYAAC,sYAAS,CAAC,GAAG;QAAE,GAAG,KAAK;QAAE,KAAK;;;;;;AACxC;;AAEA,oBAAoB,WAAW,GAAG"}},
    {"offset": {"line": 8567, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-empty.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nexport namespace ThreadPrimitiveEmpty {\n  export type Props = PropsWithChildren;\n}\n\nexport const ThreadPrimitiveEmpty: FC<ThreadPrimitiveEmpty.Props> = ({\n  children,\n}) => {\n  const empty = useAuiState(\n    ({ thread }) => thread.messages.length === 0 && !thread.isLoading,\n  );\n  return empty ? children : null;\n};\n\nThreadPrimitiveEmpty.displayName = \"ThreadPrimitive.Empty\";\n"],"names":[],"mappings":";;;;AAGA;;AAHA;;AASO,MAAM,uBAAuD,CAAC,EACnE,QAAQ,EACT;;IACC,MAAM,QAAQ,IAAA,kKAAW;mDACvB,CAAC,EAAE,MAAM,EAAE,GAAK,OAAO,QAAQ,CAAC,MAAM,KAAK,KAAK,CAAC,OAAO,SAAS;;IAEnE,OAAO,QAAQ,WAAW;AAC5B;GAPa;;QAGG,kKAAW;;;KAHd;AASb,qBAAqB,WAAW,GAAG"}},
    {"offset": {"line": 8598, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-if.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, PropsWithChildren } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport type { RequireAtLeastOne } from \"../../utils/require-at-least-one\";\n\ntype ThreadIfFilters = {\n  empty: boolean | undefined;\n  running: boolean | undefined;\n  disabled: boolean | undefined;\n};\n\ntype UseThreadIfProps = RequireAtLeastOne<ThreadIfFilters>;\n\nconst useThreadIf = (props: UseThreadIfProps) => {\n  return useAuiState(({ thread }) => {\n    if (props.empty === true && !thread.isEmpty) return false;\n    if (props.empty === false && thread.isEmpty) return false;\n\n    if (props.running === true && !thread.isRunning) return false;\n    if (props.running === false && thread.isRunning) return false;\n    if (props.disabled === true && !thread.isDisabled) return false;\n    if (props.disabled === false && thread.isDisabled) return false;\n\n    return true;\n  });\n};\n\nexport namespace ThreadPrimitiveIf {\n  export type Props = PropsWithChildren<UseThreadIfProps>;\n}\n\n/**\n * @deprecated Use `<AuiIf condition={({ thread }) => ...} />` instead.\n */\nexport const ThreadPrimitiveIf: FC<ThreadPrimitiveIf.Props> = ({\n  children,\n  ...query\n}) => {\n  const result = useThreadIf(query);\n  return result ? children : null;\n};\n\nThreadPrimitiveIf.displayName = \"ThreadPrimitive.If\";\n"],"names":[],"mappings":";;;;AAGA;;AAHA;;AAcA,MAAM,cAAc,CAAC;;IACnB,OAAO,IAAA,kKAAW;mCAAC,CAAC,EAAE,MAAM,EAAE;YAC5B,IAAI,MAAM,KAAK,KAAK,QAAQ,CAAC,OAAO,OAAO,EAAE,OAAO;YACpD,IAAI,MAAM,KAAK,KAAK,SAAS,OAAO,OAAO,EAAE,OAAO;YAEpD,IAAI,MAAM,OAAO,KAAK,QAAQ,CAAC,OAAO,SAAS,EAAE,OAAO;YACxD,IAAI,MAAM,OAAO,KAAK,SAAS,OAAO,SAAS,EAAE,OAAO;YACxD,IAAI,MAAM,QAAQ,KAAK,QAAQ,CAAC,OAAO,UAAU,EAAE,OAAO;YAC1D,IAAI,MAAM,QAAQ,KAAK,SAAS,OAAO,UAAU,EAAE,OAAO;YAE1D,OAAO;QACT;;AACF;GAZM;;QACG,kKAAW;;;AAoBb,MAAM,oBAAiD,CAAC,EAC7D,QAAQ,EACR,GAAG,OACJ;;IACC,MAAM,SAAS,YAAY;IAC3B,OAAO,SAAS,WAAW;AAC7B;IANa;;QAII;;;KAJJ;AAQb,kBAAkB,WAAW,GAAG"}},
    {"offset": {"line": 8646, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/store/src/use-aui-event.ts"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useEffectEvent } from \"use-effect-event\";\nimport { useAui } from \"./use-aui\";\nimport type {\n  AssistantEventName,\n  AssistantEventCallback,\n  AssistantEventSelector,\n} from \"./types/events\";\nimport { normalizeEventSelector } from \"./types/events\";\n\nexport const useAuiEvent = <TEvent extends AssistantEventName>(\n  selector: AssistantEventSelector<TEvent>,\n  callback: AssistantEventCallback<TEvent>,\n) => {\n  const aui = useAui();\n  const callbackRef = useEffectEvent(callback);\n\n  const { scope, event } = normalizeEventSelector(selector);\n  useEffect(\n    () => aui.on({ scope, event }, callbackRef),\n    [aui, scope, event, callbackRef],\n  );\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAMA;;;;;;AAEO,MAAM,cAAc,CACzB,UACA;;IAEA,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,cAAc,IAAA,qQAAc,EAAC;IAEnC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,IAAA,wKAAsB,EAAC;IAChD,IAAA,mXAAS;iCACP,IAAM,IAAI,EAAE,CAAC;gBAAE;gBAAO;YAAM,GAAG;gCAC/B;QAAC;QAAK;QAAO;QAAO;KAAY;AAEpC;GAZa;;QAIC,oJAAM;QACE,qQAAc"}},
    {"offset": {"line": 8689, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/utils/hooks/use-on-resize-content.tsx"],"sourcesContent":["import { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useCallback } from \"react\";\nimport { useManagedRef } from \"./use-managed-ref\";\n\nexport const useOnResizeContent = (callback: () => void) => {\n  const callbackRef = useCallbackRef(callback);\n\n  const refCallback = useCallback(\n    (el: HTMLElement) => {\n      const resizeObserver = new ResizeObserver(() => {\n        callbackRef();\n      });\n\n      const mutationObserver = new MutationObserver((mutations) => {\n        // Filter out style-only attribute mutations to prevent feedback loops\n        // with components like ThreadViewportSlack that write styles in response\n        // to viewport changes\n        const hasRelevantMutation = mutations.some(\n          (m) => m.type !== \"attributes\" || m.attributeName !== \"style\",\n        );\n        if (hasRelevantMutation) {\n          callbackRef();\n        }\n      });\n\n      resizeObserver.observe(el);\n      mutationObserver.observe(el, {\n        childList: true,\n        subtree: true,\n        attributes: true,\n        characterData: true,\n      });\n\n      return () => {\n        resizeObserver.disconnect();\n        mutationObserver.disconnect();\n      };\n    },\n    [callbackRef],\n  );\n\n  return useManagedRef(refCallback);\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,qBAAqB,CAAC;;IACjC,MAAM,cAAc,IAAA,8VAAc,EAAC;IAEnC,MAAM,cAAc,IAAA,qXAAW;uDAC7B,CAAC;YACC,MAAM,iBAAiB,IAAI;+DAAe;oBACxC;gBACF;;YAEA,MAAM,mBAAmB,IAAI;+DAAiB,CAAC;oBAC7C,sEAAsE;oBACtE,yEAAyE;oBACzE,sBAAsB;oBACtB,MAAM,sBAAsB,UAAU,IAAI;2FACxC,CAAC,IAAM,EAAE,IAAI,KAAK,gBAAgB,EAAE,aAAa,KAAK;;oBAExD,IAAI,qBAAqB;wBACvB;oBACF;gBACF;;YAEA,eAAe,OAAO,CAAC;YACvB,iBAAiB,OAAO,CAAC,IAAI;gBAC3B,WAAW;gBACX,SAAS;gBACT,YAAY;gBACZ,eAAe;YACjB;YAEA;+DAAO;oBACL,eAAe,UAAU;oBACzB,iBAAiB,UAAU;gBAC7B;;QACF;sDACA;QAAC;KAAY;IAGf,OAAO,IAAA,uLAAa,EAAC;AACvB;GAtCa;;QACS,8VAAc;QAoC3B,uLAAa"}},
    {"offset": {"line": 8755, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/use-thread-viewport-auto-scroll.tsx"],"sourcesContent":["\"use client\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useCallback, useRef, type RefCallback } from \"react\";\nimport { useAuiEvent } from \"@creatorem/ai-store\";\nimport { useOnResizeContent } from \"../../utils/hooks/use-on-resize-content\";\nimport { useOnScrollToBottom } from \"../../utils/hooks/use-on-scroll-to-bottom\";\nimport { useManagedRef } from \"../../utils/hooks/use-managed-ref\";\nimport { writableStore } from \"../../context/readonly-store\";\nimport { useThreadViewportStore } from \"../../context/react/thread-viewport-context\";\n\nexport namespace useThreadViewportAutoScroll {\n  export type Options = {\n    /**\n     * Whether to automatically scroll to the bottom when new messages are added.\n     * When enabled, the viewport will automatically scroll to show the latest content.\n     *\n     * Default false if `turnAnchor` is \"top\", otherwise defaults to true.\n     */\n    autoScroll?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when a new run starts.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnRunStart?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when thread history is first loaded.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnInitialize?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when switching to a different thread.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnThreadSwitch?: boolean | undefined;\n  };\n}\n\nexport const useThreadViewportAutoScroll = <TElement extends HTMLElement>({\n  autoScroll,\n  scrollToBottomOnRunStart = true,\n  scrollToBottomOnInitialize = true,\n  scrollToBottomOnThreadSwitch = true,\n}: useThreadViewportAutoScroll.Options): RefCallback<TElement> => {\n  const divRef = useRef<TElement>(null);\n\n  const threadViewportStore = useThreadViewportStore();\n  if (autoScroll === undefined) {\n    autoScroll = threadViewportStore.getState().turnAnchor !== \"top\";\n  }\n\n  const lastScrollTop = useRef<number>(0);\n\n  // bug: when ScrollToBottom's button changes its disabled state, the scroll stops\n  // fix: delay the state change until the scroll is done\n  // stores the scroll behavior to reuse during content resize, or null if not scrolling\n  const scrollingToBottomBehaviorRef = useRef<ScrollBehavior | null>(null);\n\n  const scrollToBottom = useCallback((behavior: ScrollBehavior) => {\n    const div = divRef.current;\n    if (!div) return;\n\n    scrollingToBottomBehaviorRef.current = behavior;\n    div.scrollTo({ top: div.scrollHeight, behavior });\n  }, []);\n\n  const handleScroll = () => {\n    const div = divRef.current;\n    if (!div) return;\n\n    const isAtBottom = threadViewportStore.getState().isAtBottom;\n    const newIsAtBottom =\n      Math.abs(div.scrollHeight - div.scrollTop - div.clientHeight) < 1 ||\n      div.scrollHeight <= div.clientHeight;\n\n    if (!newIsAtBottom && lastScrollTop.current < div.scrollTop) {\n      // ignore scroll down\n    } else {\n      if (newIsAtBottom) {\n        scrollingToBottomBehaviorRef.current = null;\n      }\n\n      const shouldUpdate =\n        newIsAtBottom || scrollingToBottomBehaviorRef.current === null;\n\n      if (shouldUpdate && newIsAtBottom !== isAtBottom) {\n        writableStore(threadViewportStore).setState({\n          isAtBottom: newIsAtBottom,\n        });\n      }\n    }\n\n    lastScrollTop.current = div.scrollTop;\n  };\n\n  const resizeRef = useOnResizeContent(() => {\n    const scrollBehavior = scrollingToBottomBehaviorRef.current;\n    if (scrollBehavior) {\n      scrollToBottom(scrollBehavior);\n    } else if (autoScroll && threadViewportStore.getState().isAtBottom) {\n      scrollToBottom(\"instant\");\n    }\n\n    handleScroll();\n  });\n\n  const scrollRef = useManagedRef<HTMLElement>((el) => {\n    el.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      el.removeEventListener(\"scroll\", handleScroll);\n    };\n  });\n\n  useOnScrollToBottom(({ behavior }) => {\n    scrollToBottom(behavior);\n  });\n\n  // autoscroll on run start\n  useAuiEvent(\"thread.runStart\", () => {\n    if (!scrollToBottomOnRunStart) return;\n    scrollingToBottomBehaviorRef.current = \"auto\";\n    requestAnimationFrame(() => {\n      scrollToBottom(\"auto\");\n    });\n  });\n\n  // scroll to bottom instantly when thread history is first loaded\n  useAuiEvent(\"thread.initialize\", () => {\n    if (!scrollToBottomOnInitialize) return;\n    scrollingToBottomBehaviorRef.current = \"instant\";\n    requestAnimationFrame(() => {\n      scrollToBottom(\"instant\");\n    });\n  });\n\n  // scroll to bottom instantly when switching threads\n  useAuiEvent(\"threadListItem.switchedTo\", () => {\n    if (!scrollToBottomOnThreadSwitch) return;\n    scrollingToBottomBehaviorRef.current = \"instant\";\n    requestAnimationFrame(() => {\n      scrollToBottom(\"instant\");\n    });\n  });\n\n  const autoScrollRef = useComposedRefs<TElement>(resizeRef, scrollRef, divRef);\n  return autoScrollRef as RefCallback<TElement>;\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AATA;;;;;;;;;AA4CO,MAAM,8BAA8B,CAA+B,EACxE,UAAU,EACV,2BAA2B,IAAI,EAC/B,6BAA6B,IAAI,EACjC,+BAA+B,IAAI,EACC;;IACpC,MAAM,SAAS,IAAA,gXAAM,EAAW;IAEhC,MAAM,sBAAsB,IAAA,0MAAsB;IAClD,IAAI,eAAe,WAAW;QAC5B,aAAa,oBAAoB,QAAQ,GAAG,UAAU,KAAK;IAC7D;IAEA,MAAM,gBAAgB,IAAA,gXAAM,EAAS;IAErC,iFAAiF;IACjF,uDAAuD;IACvD,sFAAsF;IACtF,MAAM,+BAA+B,IAAA,gXAAM,EAAwB;IAEnE,MAAM,iBAAiB,IAAA,qXAAW;mEAAC,CAAC;YAClC,MAAM,MAAM,OAAO,OAAO;YAC1B,IAAI,CAAC,KAAK;YAEV,6BAA6B,OAAO,GAAG;YACvC,IAAI,QAAQ,CAAC;gBAAE,KAAK,IAAI,YAAY;gBAAE;YAAS;QACjD;kEAAG,EAAE;IAEL,MAAM,eAAe;QACnB,MAAM,MAAM,OAAO,OAAO;QAC1B,IAAI,CAAC,KAAK;QAEV,MAAM,aAAa,oBAAoB,QAAQ,GAAG,UAAU;QAC5D,MAAM,gBACJ,KAAK,GAAG,CAAC,IAAI,YAAY,GAAG,IAAI,SAAS,GAAG,IAAI,YAAY,IAAI,KAChE,IAAI,YAAY,IAAI,IAAI,YAAY;QAEtC,IAAI,CAAC,iBAAiB,cAAc,OAAO,GAAG,IAAI,SAAS,EAAE;QAC3D,qBAAqB;QACvB,OAAO;YACL,IAAI,eAAe;gBACjB,6BAA6B,OAAO,GAAG;YACzC;YAEA,MAAM,eACJ,iBAAiB,6BAA6B,OAAO,KAAK;YAE5D,IAAI,gBAAgB,kBAAkB,YAAY;gBAChD,IAAA,4KAAa,EAAC,qBAAqB,QAAQ,CAAC;oBAC1C,YAAY;gBACd;YACF;QACF;QAEA,cAAc,OAAO,GAAG,IAAI,SAAS;IACvC;IAEA,MAAM,YAAY,IAAA,sMAAkB;qEAAC;YACnC,MAAM,iBAAiB,6BAA6B,OAAO;YAC3D,IAAI,gBAAgB;gBAClB,eAAe;YACjB,OAAO,IAAI,cAAc,oBAAoB,QAAQ,GAAG,UAAU,EAAE;gBAClE,eAAe;YACjB;YAEA;QACF;;IAEA,MAAM,YAAY,IAAA,uLAAa;gEAAc,CAAC;YAC5C,GAAG,gBAAgB,CAAC,UAAU;YAC9B;wEAAO;oBACL,GAAG,mBAAmB,CAAC,UAAU;gBACnC;;QACF;;IAEA,IAAA,4MAAmB;2DAAC,CAAC,EAAE,QAAQ,EAAE;YAC/B,eAAe;QACjB;;IAEA,0BAA0B;IAC1B,IAAA,iKAAW,EAAC;mDAAmB;YAC7B,IAAI,CAAC,0BAA0B;YAC/B,6BAA6B,OAAO,GAAG;YACvC;2DAAsB;oBACpB,eAAe;gBACjB;;QACF;;IAEA,iEAAiE;IACjE,IAAA,iKAAW,EAAC;mDAAqB;YAC/B,IAAI,CAAC,4BAA4B;YACjC,6BAA6B,OAAO,GAAG;YACvC;2DAAsB;oBACpB,eAAe;gBACjB;;QACF;;IAEA,oDAAoD;IACpD,IAAA,iKAAW,EAAC;mDAA6B;YACvC,IAAI,CAAC,8BAA8B;YACnC,6BAA6B,OAAO,GAAG;YACvC;2DAAsB;oBACpB,eAAe;gBACjB;;QACF;;IAEA,MAAM,gBAAgB,IAAA,iVAAe,EAAW,WAAW,WAAW;IACtE,OAAO;AACT;GA5Ga;;QAQiB,0MAAsB;QAiDhC,sMAAkB;QAWlB,uLAAa;QAO/B,4MAAmB;QAKnB,iKAAW;QASX,iKAAW;QASX,iKAAW;QAQW,iVAAe"}},
    {"offset": {"line": 8904, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-viewport.tsx"],"sourcesContent":["\"use client\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  useCallback,\n} from \"react\";\nimport { useThreadViewportAutoScroll } from \"./use-thread-viewport-auto-scroll\";\nimport { ThreadPrimitiveViewportProvider } from \"../../context/providers/thread-viewport-provider\";\nimport { useSizeHandle } from \"../../utils/hooks/use-size-handle\";\nimport { useThreadViewport } from \"../../context/react/thread-viewport-context\";\n\nexport namespace ThreadPrimitiveViewport {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div> & {\n    /**\n     * Whether to automatically scroll to the bottom when new messages are added.\n     * When enabled, the viewport will automatically scroll to show the latest content.\n     *\n     * Default false if `turnAnchor` is \"top\", otherwise defaults to true.\n     */\n    autoScroll?: boolean | undefined;\n\n    /**\n     * Controls scroll anchoring behavior for new messages.\n     * - \"bottom\" (default): Messages anchor at the bottom, classic chat behavior.\n     * - \"top\": New user messages anchor at the top of the viewport for a focused reading experience.\n     */\n    turnAnchor?: \"top\" | \"bottom\" | undefined;\n\n    /**\n     * Whether to scroll to bottom when a new run starts.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnRunStart?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when thread history is first loaded.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnInitialize?: boolean | undefined;\n\n    /**\n     * Whether to scroll to bottom when switching to a different thread.\n     *\n     * Defaults to true.\n     */\n    scrollToBottomOnThreadSwitch?: boolean | undefined;\n  };\n}\n\nconst useViewportSizeRef = () => {\n  const register = useThreadViewport((s) => s.registerViewport);\n  const getHeight = useCallback((el: HTMLElement) => el.clientHeight, []);\n  return useSizeHandle(register, getHeight);\n};\n\nconst ThreadPrimitiveViewportScrollable = forwardRef<\n  ThreadPrimitiveViewport.Element,\n  ThreadPrimitiveViewport.Props\n>(\n  (\n    {\n      autoScroll,\n      scrollToBottomOnRunStart,\n      scrollToBottomOnInitialize,\n      scrollToBottomOnThreadSwitch,\n      children,\n      ...rest\n    },\n    forwardedRef,\n  ) => {\n    const autoScrollRef = useThreadViewportAutoScroll<HTMLDivElement>({\n      autoScroll,\n      scrollToBottomOnRunStart,\n      scrollToBottomOnInitialize,\n      scrollToBottomOnThreadSwitch,\n    });\n    const viewportSizeRef = useViewportSizeRef();\n    const ref = useComposedRefs(forwardedRef, autoScrollRef, viewportSizeRef);\n\n    return (\n      <Primitive.div {...rest} ref={ref}>\n        {children}\n      </Primitive.div>\n    );\n  },\n);\n\nThreadPrimitiveViewportScrollable.displayName =\n  \"ThreadPrimitive.ViewportScrollable\";\n\n/**\n * A scrollable viewport container for thread messages.\n *\n * This component provides a scrollable area for displaying thread messages with\n * automatic scrolling capabilities. It manages the viewport state and provides\n * context for child components to access viewport-related functionality.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Viewport turnAnchor=\"top\">\n *   <ThreadPrimitive.Messages components={{ Message: MyMessage }} />\n * </ThreadPrimitive.Viewport>\n * ```\n */\nexport const ThreadPrimitiveViewport = forwardRef<\n  ThreadPrimitiveViewport.Element,\n  ThreadPrimitiveViewport.Props\n>(({ turnAnchor, ...props }, ref) => {\n  return (\n    <ThreadPrimitiveViewportProvider options={{ turnAnchor }}>\n      <ThreadPrimitiveViewportScrollable {...props} ref={ref} />\n    </ThreadPrimitiveViewportProvider>\n  );\n});\n\nThreadPrimitiveViewport.displayName = \"ThreadPrimitive.Viewport\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAMA;AACA;AACA;AACA;;;AAbA;;;;;;;;AAwDA,MAAM,qBAAqB;;IACzB,MAAM,WAAW,IAAA,qMAAiB;0DAAC,CAAC,IAAM,EAAE,gBAAgB;;IAC5D,MAAM,YAAY,IAAA,qXAAW;qDAAC,CAAC,KAAoB,GAAG,YAAY;oDAAE,EAAE;IACtE,OAAO,IAAA,uLAAa,EAAC,UAAU;AACjC;GAJM;;QACa,qMAAiB;QAE3B,uLAAa;;;AAGtB,MAAM,kDAAoC,IAAA,oXAAU,MAIlD,CACE,EACE,UAAU,EACV,wBAAwB,EACxB,0BAA0B,EAC1B,4BAA4B,EAC5B,QAAQ,EACR,GAAG,MACJ,EACD;;IAEA,MAAM,gBAAgB,IAAA,kOAA2B,EAAiB;QAChE;QACA;QACA;QACA;IACF;IACA,MAAM,kBAAkB;IACxB,MAAM,MAAM,IAAA,iVAAe,EAAC,cAAc,eAAe;IAEzD,qBACE,sYAAC,sYAAS,CAAC,GAAG;QAAE,GAAG,IAAI;QAAE,KAAK;kBAC3B;;;;;;AAGP;;QAdwB,kOAA2B;QAMzB;QACZ,iVAAe;;;KAtBzB;AAgCN,kCAAkC,WAAW,GAC3C;AAgBK,MAAM,wCAA0B,IAAA,oXAAU,QAG/C,CAAC,EAAE,UAAU,EAAE,GAAG,OAAO,EAAE;IAC3B,qBACE,sYAAC,yNAA+B;QAAC,SAAS;YAAE;QAAW;kBACrD,cAAA,sYAAC;YAAmC,GAAG,KAAK;YAAE,KAAK;;;;;;;;;;;AAGzD;;AAEA,wBAAwB,WAAW,GAAG"}},
    {"offset": {"line": 9002, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-viewport-footer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport {\n  type ComponentRef,\n  forwardRef,\n  ComponentPropsWithoutRef,\n  useCallback,\n} from \"react\";\nimport { useSizeHandle } from \"../../utils/hooks/use-size-handle\";\nimport { useThreadViewport } from \"../../context/react/thread-viewport-context\";\n\nexport namespace ThreadPrimitiveViewportFooter {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = ComponentPropsWithoutRef<typeof Primitive.div>;\n}\n\n/**\n * A footer container that measures its height for scroll calculations.\n *\n * This component measures its height and provides it to the viewport context\n * for use in scroll calculations (e.g., ViewportSlack min-height).\n *\n * Multiple ViewportFooter components can be used - their heights are summed.\n *\n * Typically used with `className=\"sticky bottom-0\"` to keep the footer\n * visible at the bottom of the viewport while scrolling.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Viewport>\n *   <ThreadPrimitive.Messages components={{ ... }} />\n *   <ThreadPrimitive.ViewportFooter className=\"sticky bottom-0\">\n *     <Composer />\n *   </ThreadPrimitive.ViewportFooter>\n * </ThreadPrimitive.Viewport>\n * ```\n */\nexport const ThreadPrimitiveViewportFooter = forwardRef<\n  ThreadPrimitiveViewportFooter.Element,\n  ThreadPrimitiveViewportFooter.Props\n>((props, forwardedRef) => {\n  const register = useThreadViewport((s) => s.registerContentInset);\n  const getHeight = useCallback((el: HTMLElement) => {\n    const marginTop = parseFloat(getComputedStyle(el).marginTop) || 0;\n    return el.offsetHeight + marginTop;\n  }, []);\n\n  const resizeRef = useSizeHandle(register, getHeight);\n\n  const ref = useComposedRefs(forwardedRef, resizeRef);\n\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nThreadPrimitiveViewportFooter.displayName = \"ThreadPrimitive.ViewportFooter\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAMA;AACA;;;AAXA;;;;;;AAuCO,MAAM,8CAAgC,GAAA,IAAA,oXAAU,UAGrD,CAAC,OAAO;;IACR,MAAM,WAAW,IAAA,qMAAiB;qEAAC,CAAC,IAAM,EAAE,oBAAoB;;IAChE,MAAM,YAAY,IAAA,qXAAW;gEAAC,CAAC;YAC7B,MAAM,YAAY,WAAW,iBAAiB,IAAI,SAAS,KAAK;YAChE,OAAO,GAAG,YAAY,GAAG;QAC3B;+DAAG,EAAE;IAEL,MAAM,YAAY,IAAA,uLAAa,EAAC,UAAU;IAE1C,MAAM,MAAM,IAAA,iVAAe,EAAC,cAAc;IAE1C,qBAAO,sYAAC,sYAAS,CAAC,GAAG;QAAE,GAAG,KAAK;QAAE,KAAK;;;;;;AACxC;;QAXmB,qMAAiB;QAMhB,uLAAa;QAEnB,iVAAe;;;;QARV,qMAAiB;QAMhB,uLAAa;QAEnB,iVAAe;;;;AAK7B,8BAA8B,WAAW,GAAG"}},
    {"offset": {"line": 9066, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/providers/message-by-index-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@creatorem/ai-store\";\n\nexport const MessageByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n  }>\n> = ({ index, children }) => {\n  const aui = useAui({\n    message: Derived({\n      source: \"thread\",\n      query: { type: \"index\", index },\n      get: (aui) => aui.thread().message({ index }),\n    }),\n    composer: Derived({\n      source: \"message\",\n      query: {},\n      get: (aui) => aui.thread().message({ index }).composer,\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;;;AAHA;;AAKO,MAAM,yBAIT,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE;;IACtB,MAAM,MAAM,IAAA,oJAAM,EAAC;QACjB,SAAS,IAAA,iJAAO,EAAC;YACf,QAAQ;YACR,OAAO;gBAAE,MAAM;gBAAS;YAAM;YAC9B,GAAG;sDAAE,CAAC,MAAQ,IAAI,MAAM,GAAG,OAAO,CAAC;wBAAE;oBAAM;;QAC7C;QACA,UAAU,IAAA,iJAAO,EAAC;YAChB,QAAQ;YACR,OAAO,CAAC;YACR,GAAG;sDAAE,CAAC,MAAQ,IAAI,MAAM,GAAG,OAAO,CAAC;wBAAE;oBAAM,GAAG,QAAQ;;QACxD;IACF;IAEA,qBAAO,sYAAC,qLAAW;QAAC,OAAO;kBAAM;;;;;;AACnC;GAnBa;;QAKC,oJAAM;;;KALP"}},
    {"offset": {"line": 9127, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-messages.tsx"],"sourcesContent":["\"use client\";\n\nimport { type ComponentType, type FC, memo, useMemo } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport { MessageByIndexProvider } from \"../../context/providers\";\nimport { ThreadMessage as ThreadMessageType } from \"../../types\";\n\nexport namespace ThreadPrimitiveMessages {\n  export type Props = {\n    /**\n     * Component configuration for rendering different types of messages and composers.\n     *\n     * You can provide either:\n     * 1. A single `Message` component that handles all message types\n     * 2. Specific components for `UserMessage` and `AssistantMessage` (with optional `SystemMessage`)\n     *\n     * Optional edit composer components can be provided to customize the editing experience\n     * for different message types when users edit their messages.\n     */\n    components:\n      | {\n          /** Component used to render all message types */\n          Message: ComponentType;\n          /** Component used when editing any message type */\n          EditComposer?: ComponentType | undefined;\n          /** Component used when editing user messages specifically */\n          UserEditComposer?: ComponentType | undefined;\n          /** Component used when editing assistant messages specifically */\n          AssistantEditComposer?: ComponentType | undefined;\n          /** Component used when editing system messages specifically */\n          SystemEditComposer?: ComponentType | undefined;\n          /** Component used to render user messages specifically */\n          UserMessage?: ComponentType | undefined;\n          /** Component used to render assistant messages specifically */\n          AssistantMessage?: ComponentType | undefined;\n          /** Component used to render system messages specifically */\n          SystemMessage?: ComponentType | undefined;\n        }\n      | {\n          /** Component used to render all message types (fallback) */\n          Message?: ComponentType | undefined;\n          /** Component used when editing any message type */\n          EditComposer?: ComponentType | undefined;\n          /** Component used when editing user messages specifically */\n          UserEditComposer?: ComponentType | undefined;\n          /** Component used when editing assistant messages specifically */\n          AssistantEditComposer?: ComponentType | undefined;\n          /** Component used when editing system messages specifically */\n          SystemEditComposer?: ComponentType | undefined;\n          /** Component used to render user messages */\n          UserMessage: ComponentType;\n          /** Component used to render assistant messages */\n          AssistantMessage: ComponentType;\n          /** Component used to render system messages */\n          SystemMessage?: ComponentType | undefined;\n        };\n  };\n}\n\nconst isComponentsSame = (\n  prev: ThreadPrimitiveMessages.Props[\"components\"],\n  next: ThreadPrimitiveMessages.Props[\"components\"],\n) => {\n  return (\n    prev.Message === next.Message &&\n    prev.EditComposer === next.EditComposer &&\n    prev.UserEditComposer === next.UserEditComposer &&\n    prev.AssistantEditComposer === next.AssistantEditComposer &&\n    prev.SystemEditComposer === next.SystemEditComposer &&\n    prev.UserMessage === next.UserMessage &&\n    prev.AssistantMessage === next.AssistantMessage &&\n    prev.SystemMessage === next.SystemMessage\n  );\n};\n\nconst DEFAULT_SYSTEM_MESSAGE = () => null;\n\nconst getComponent = (\n  components: ThreadPrimitiveMessages.Props[\"components\"],\n  role: ThreadMessageType[\"role\"],\n  isEditing: boolean,\n) => {\n  switch (role) {\n    case \"user\":\n      if (isEditing) {\n        return (\n          components.UserEditComposer ??\n          components.EditComposer ??\n          components.UserMessage ??\n          (components.Message as ComponentType)\n        );\n      } else {\n        return components.UserMessage ?? (components.Message as ComponentType);\n      }\n    case \"assistant\":\n      if (isEditing) {\n        return (\n          components.AssistantEditComposer ??\n          components.EditComposer ??\n          components.AssistantMessage ??\n          (components.Message as ComponentType)\n        );\n      } else {\n        return (\n          components.AssistantMessage ?? (components.Message as ComponentType)\n        );\n      }\n    case \"system\":\n      if (isEditing) {\n        return (\n          components.SystemEditComposer ??\n          components.EditComposer ??\n          components.SystemMessage ??\n          (components.Message as ComponentType)\n        );\n      } else {\n        return components.SystemMessage ?? DEFAULT_SYSTEM_MESSAGE;\n      }\n    default:\n      const _exhaustiveCheck: never = role;\n      throw new Error(`Unknown message role: ${_exhaustiveCheck}`);\n  }\n};\n\ntype ThreadMessageComponentProps = {\n  components: ThreadPrimitiveMessages.Props[\"components\"];\n};\n\nconst ThreadMessageComponent: FC<ThreadMessageComponentProps> = ({\n  components,\n}) => {\n  const role = useAuiState(({ message }) => message.role);\n  const isEditing = useAuiState(({ message }) => message.composer.isEditing);\n  const Component = getComponent(components, role, isEditing);\n\n  return <Component />;\n};\nexport namespace ThreadPrimitiveMessageByIndex {\n  export type Props = {\n    index: number;\n    components: ThreadPrimitiveMessages.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single message at the specified index in the current thread.\n *\n * This component provides message context for a specific message in the thread\n * and renders it using the provided component configuration.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.MessageByIndex\n *   index={0}\n *   components={{\n *     UserMessage: MyUserMessage,\n *     AssistantMessage: MyAssistantMessage\n *   }}\n * />\n * ```\n */\nexport const ThreadPrimitiveMessageByIndex: FC<ThreadPrimitiveMessageByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <MessageByIndexProvider index={index}>\n          <ThreadMessageComponent components={components} />\n        </MessageByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      isComponentsSame(prev.components, next.components),\n  );\n\nThreadPrimitiveMessageByIndex.displayName = \"ThreadPrimitive.MessageByIndex\";\n\n/**\n * Renders all messages in the current thread using the provided component configuration.\n *\n * This component automatically renders all messages in the thread, providing the appropriate\n * message context for each message. It handles different message types (user, assistant, system)\n * and supports editing mode through the provided edit composer components.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Messages\n *   components={{\n *     UserMessage: MyUserMessage,\n *     AssistantMessage: MyAssistantMessage,\n *     EditComposer: MyEditComposer\n *   }}\n * />\n * ```\n */\nexport const ThreadPrimitiveMessagesImpl: FC<ThreadPrimitiveMessages.Props> = ({\n  components,\n}) => {\n  const messagesLength = useAuiState(({ thread }) => thread.messages.length);\n\n  const messageElements = useMemo(() => {\n    if (messagesLength === 0) return null;\n    return Array.from({ length: messagesLength }, (_, index) => (\n      <ThreadPrimitiveMessageByIndex\n        key={index}\n        index={index}\n        components={components}\n      />\n    ));\n  }, [messagesLength, components]);\n\n  return messageElements;\n};\n\nThreadPrimitiveMessagesImpl.displayName = \"ThreadPrimitive.Messages\";\n\nexport const ThreadPrimitiveMessages = memo(\n  ThreadPrimitiveMessagesImpl,\n  (prev, next) => isComponentsSame(prev.components, next.components),\n);\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AA2DA,MAAM,mBAAmB,CACvB,MACA;IAEA,OACE,KAAK,OAAO,KAAK,KAAK,OAAO,IAC7B,KAAK,YAAY,KAAK,KAAK,YAAY,IACvC,KAAK,gBAAgB,KAAK,KAAK,gBAAgB,IAC/C,KAAK,qBAAqB,KAAK,KAAK,qBAAqB,IACzD,KAAK,kBAAkB,KAAK,KAAK,kBAAkB,IACnD,KAAK,WAAW,KAAK,KAAK,WAAW,IACrC,KAAK,gBAAgB,KAAK,KAAK,gBAAgB,IAC/C,KAAK,aAAa,KAAK,KAAK,aAAa;AAE7C;AAEA,MAAM,yBAAyB,IAAM;KAA/B;AAEN,MAAM,eAAe,CACnB,YACA,MACA;IAEA,OAAQ;QACN,KAAK;YACH,IAAI,WAAW;gBACb,OACE,WAAW,gBAAgB,IAC3B,WAAW,YAAY,IACvB,WAAW,WAAW,IACrB,WAAW,OAAO;YAEvB,OAAO;gBACL,OAAO,WAAW,WAAW,IAAK,WAAW,OAAO;YACtD;QACF,KAAK;YACH,IAAI,WAAW;gBACb,OACE,WAAW,qBAAqB,IAChC,WAAW,YAAY,IACvB,WAAW,gBAAgB,IAC1B,WAAW,OAAO;YAEvB,OAAO;gBACL,OACE,WAAW,gBAAgB,IAAK,WAAW,OAAO;YAEtD;QACF,KAAK;YACH,IAAI,WAAW;gBACb,OACE,WAAW,kBAAkB,IAC7B,WAAW,YAAY,IACvB,WAAW,aAAa,IACvB,WAAW,OAAO;YAEvB,OAAO;gBACL,OAAO,WAAW,aAAa,IAAI;YACrC;QACF;YACE,MAAM,mBAA0B;YAChC,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,kBAAkB;IAC/D;AACF;AAMA,MAAM,yBAA0D,CAAC,EAC/D,UAAU,EACX;;IACC,MAAM,OAAO,IAAA,kKAAW;oDAAC,CAAC,EAAE,OAAO,EAAE,GAAK,QAAQ,IAAI;;IACtD,MAAM,YAAY,IAAA,kKAAW;yDAAC,CAAC,EAAE,OAAO,EAAE,GAAK,QAAQ,QAAQ,CAAC,SAAS;;IACzE,MAAM,YAAY,aAAa,YAAY,MAAM;IAEjD,qBAAO,sYAAC;;;;;AACV;GARM;;QAGS,kKAAW;QACN,kKAAW;;;MAJzB;AAiCC,MAAM,8CACX,IAAA,8WAAI,EACF,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE;IACpB,qBACE,sYAAC,oNAAsB;QAAC,OAAO;kBAC7B,cAAA,sYAAC;YAAuB,YAAY;;;;;;;;;;;AAG1C,GACA,CAAC,MAAM,OACL,KAAK,KAAK,KAAK,KAAK,KAAK,IACzB,iBAAiB,KAAK,UAAU,EAAE,KAAK,UAAU;MAX1C;AAcb,8BAA8B,WAAW,GAAG;AAoBrC,MAAM,8BAAiE,CAAC,EAC7E,UAAU,EACX;;IACC,MAAM,iBAAiB,IAAA,kKAAW;mEAAC,CAAC,EAAE,MAAM,EAAE,GAAK,OAAO,QAAQ,CAAC,MAAM;;IAEzE,MAAM,kBAAkB,IAAA,iXAAO;gEAAC;YAC9B,IAAI,mBAAmB,GAAG,OAAO;YACjC,OAAO,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAe;wEAAG,CAAC,GAAG,sBAChD,sYAAC;wBAEC,OAAO;wBACP,YAAY;uBAFP;;;;;;QAKX;+DAAG;QAAC;QAAgB;KAAW;IAE/B,OAAO;AACT;IAjBa;;QAGY,kKAAW;;;MAHvB;AAmBb,4BAA4B,WAAW,GAAG;AAEnC,MAAM,wCAA0B,IAAA,8WAAI,EACzC,6BACA,CAAC,MAAM,OAAS,iBAAiB,KAAK,UAAU,EAAE,KAAK,UAAU"}},
    {"offset": {"line": 9264, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-scroll-to-bottom.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport {\n  useThreadViewport,\n  useThreadViewportStore,\n} from \"../../context/react/thread-viewport-context\";\n\nexport namespace useThreadScrollToBottom {\n  export type Options = {\n    behavior?: ScrollBehavior | undefined;\n  };\n}\n\nconst useThreadScrollToBottom = ({\n  behavior,\n}: useThreadScrollToBottom.Options = {}) => {\n  const isAtBottom = useThreadViewport((s) => s.isAtBottom);\n\n  const threadViewportStore = useThreadViewportStore();\n\n  const handleScrollToBottom = useCallback(() => {\n    threadViewportStore.getState().scrollToBottom({ behavior });\n  }, [threadViewportStore, behavior]);\n\n  if (isAtBottom) return null;\n  return handleScrollToBottom;\n};\n\nexport namespace ThreadPrimitiveScrollToBottom {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadScrollToBottom>;\n}\n\nexport const ThreadPrimitiveScrollToBottom = createActionButton(\n  \"ThreadPrimitive.ScrollToBottom\",\n  useThreadScrollToBottom,\n  [\"behavior\"],\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;;AARA;;;;AAmBA,MAAM,0BAA0B,CAAC,EAC/B,QAAQ,EACwB,GAAG,CAAC,CAAC;;IACrC,MAAM,aAAa,IAAA,qMAAiB;iEAAC,CAAC,IAAM,EAAE,UAAU;;IAExD,MAAM,sBAAsB,IAAA,0MAAsB;IAElD,MAAM,uBAAuB,IAAA,qXAAW;qEAAC;YACvC,oBAAoB,QAAQ,GAAG,cAAc,CAAC;gBAAE;YAAS;QAC3D;oEAAG;QAAC;QAAqB;KAAS;IAElC,IAAI,YAAY,OAAO;IACvB,OAAO;AACT;GAbM;;QAGe,qMAAiB;QAER,0MAAsB;;;AAe7C,MAAM,gCAAgC,IAAA,yLAAkB,EAC7D,kCACA,yBACA;IAAC;CAAW"}},
    {"offset": {"line": 9311, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-suggestion.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useCallback } from \"react\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\nconst useThreadSuggestion = ({\n  prompt,\n  send,\n  clearComposer = true,\n  autoSend,\n  method: _method,\n}: {\n  /** The suggestion prompt. */\n  prompt: string;\n\n  /**\n   * When true, automatically sends the message.\n   * When false, replaces or appends the composer text with the suggestion - depending on the value of `clearComposer`.\n   */\n  send?: boolean | undefined;\n\n  /**\n   * Whether to clear the composer after sending.\n   * When send is set to false, determines if composer text is replaced with suggestion (true, default),\n   * or if it's appended to the composer text (false).\n   *\n   * @default true\n   */\n  clearComposer?: boolean | undefined;\n\n  /** @deprecated Use `send` instead. */\n  autoSend?: boolean | undefined;\n\n  /** @deprecated Use `clearComposer` instead. */\n  method?: \"replace\";\n}) => {\n  const aui = useAui();\n  const disabled = useAuiState(({ thread }) => thread.isDisabled);\n\n  // ========== Deprecation Mapping ==========\n  const resolvedSend = send ?? autoSend ?? false;\n  // ==========================================\n\n  const callback = useCallback(() => {\n    const isRunning = aui.thread().getState().isRunning;\n\n    if (resolvedSend && !isRunning) {\n      aui.thread().append(prompt);\n      if (clearComposer) {\n        aui.composer().setText(\"\");\n      }\n    } else {\n      if (clearComposer) {\n        aui.composer().setText(prompt);\n      } else {\n        const currentText = aui.composer().getState().text;\n        aui\n          .composer()\n          .setText(currentText.trim() ? `${currentText} ${prompt}` : prompt);\n      }\n    }\n  }, [aui, resolvedSend, clearComposer, prompt]);\n\n  if (disabled) return null;\n  return callback;\n};\n\nexport namespace ThreadPrimitiveSuggestion {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadSuggestion>;\n}\n\nexport const ThreadPrimitiveSuggestion = createActionButton(\n  \"ThreadPrimitive.Suggestion\",\n  useThreadSuggestion,\n  [\"prompt\", \"send\", \"clearComposer\", \"autoSend\", \"method\"],\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;AAAA;;AARA;;;;AAUA,MAAM,sBAAsB,CAAC,EAC3B,MAAM,EACN,IAAI,EACJ,gBAAgB,IAAI,EACpB,QAAQ,EACR,QAAQ,OAAO,EAyBhB;;IACC,MAAM,MAAM,IAAA,oJAAM;IAClB,MAAM,WAAW,IAAA,kKAAW;qDAAC,CAAC,EAAE,MAAM,EAAE,GAAK,OAAO,UAAU;;IAE9D,4CAA4C;IAC5C,MAAM,eAAe,QAAQ,YAAY;IACzC,6CAA6C;IAE7C,MAAM,WAAW,IAAA,qXAAW;qDAAC;YAC3B,MAAM,YAAY,IAAI,MAAM,GAAG,QAAQ,GAAG,SAAS;YAEnD,IAAI,gBAAgB,CAAC,WAAW;gBAC9B,IAAI,MAAM,GAAG,MAAM,CAAC;gBACpB,IAAI,eAAe;oBACjB,IAAI,QAAQ,GAAG,OAAO,CAAC;gBACzB;YACF,OAAO;gBACL,IAAI,eAAe;oBACjB,IAAI,QAAQ,GAAG,OAAO,CAAC;gBACzB,OAAO;oBACL,MAAM,cAAc,IAAI,QAAQ,GAAG,QAAQ,GAAG,IAAI;oBAClD,IACG,QAAQ,GACR,OAAO,CAAC,YAAY,IAAI,KAAK,GAAG,YAAY,CAAC,EAAE,QAAQ,GAAG;gBAC/D;YACF;QACF;oDAAG;QAAC;QAAK;QAAc;QAAe;KAAO;IAE7C,IAAI,UAAU,OAAO;IACrB,OAAO;AACT;GA5DM;;QA+BQ,oJAAM;QACD,kKAAW;;;AAmCvB,MAAM,4BAA4B,IAAA,yLAAkB,EACzD,8BACA,qBACA;IAAC;IAAU;IAAQ;IAAiB;IAAY;CAAS"}},
    {"offset": {"line": 9379, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/providers/suggestion-by-index-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { AuiProvider, Derived, useAui } from \"@creatorem/ai-store\";\n\nexport type SuggestionByIndexProviderProps = PropsWithChildren<{\n  index: number;\n}>;\n\nexport const SuggestionByIndexProvider: FC<SuggestionByIndexProviderProps> = ({\n  index,\n  children,\n}) => {\n  const aui = useAui({\n    suggestion: Derived({\n      source: \"suggestions\",\n      query: { index },\n      get: (aui) => aui.suggestions().suggestion({ index }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AAAA;;;AAHA;;AASO,MAAM,4BAAgE,CAAC,EAC5E,KAAK,EACL,QAAQ,EACT;;IACC,MAAM,MAAM,IAAA,oJAAM,EAAC;QACjB,YAAY,IAAA,iJAAO,EAAC;YAClB,QAAQ;YACR,OAAO;gBAAE;YAAM;YACf,GAAG;yDAAE,CAAC,MAAQ,IAAI,WAAW,GAAG,UAAU,CAAC;wBAAE;oBAAM;;QACrD;IACF;IAEA,qBAAO,sYAAC,qLAAW;QAAC,OAAO;kBAAM;;;;;;AACnC;GAba;;QAIC,oJAAM;;;KAJP"}},
    {"offset": {"line": 9430, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread/thread-suggestions.tsx"],"sourcesContent":["\"use client\";\n\nimport { type ComponentType, type FC, memo, useMemo } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport { SuggestionByIndexProvider } from \"../../context/providers\";\n\nexport namespace ThreadPrimitiveSuggestions {\n  export type Props = {\n    /**\n     * Component to render for each suggestion.\n     */\n    components: {\n      /** Component used to render each suggestion */\n      Suggestion: ComponentType;\n    };\n  };\n}\n\ntype SuggestionComponentProps = {\n  components: ThreadPrimitiveSuggestions.Props[\"components\"];\n};\n\nconst SuggestionComponent: FC<SuggestionComponentProps> = ({ components }) => {\n  const Component = components.Suggestion;\n  return <Component />;\n};\n\nexport namespace ThreadPrimitiveSuggestionByIndex {\n  export type Props = {\n    index: number;\n    components: ThreadPrimitiveSuggestions.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single suggestion at the specified index.\n *\n * This component provides suggestion context for a specific suggestion\n * and renders it using the provided component configuration.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.SuggestionByIndex\n *   index={0}\n *   components={{\n *     Suggestion: MySuggestion\n *   }}\n * />\n * ```\n */\nexport const ThreadPrimitiveSuggestionByIndex: FC<ThreadPrimitiveSuggestionByIndex.Props> =\n  memo(\n    ({ index, components }) => {\n      return (\n        <SuggestionByIndexProvider index={index}>\n          <SuggestionComponent components={components} />\n        </SuggestionByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.components.Suggestion === next.components.Suggestion,\n  );\n\nThreadPrimitiveSuggestionByIndex.displayName =\n  \"ThreadPrimitive.SuggestionByIndex\";\n\n/**\n * Renders all suggestions using the provided component configuration.\n *\n * This component automatically renders all suggestions from the suggestions scope,\n * providing the appropriate suggestion context for each one.\n *\n * @example\n * ```tsx\n * <ThreadPrimitive.Suggestions\n *   components={{\n *     Suggestion: MySuggestion\n *   }}\n * />\n * ```\n */\nexport const ThreadPrimitiveSuggestionsImpl: FC<\n  ThreadPrimitiveSuggestions.Props\n> = ({ components }) => {\n  const suggestionsLength = useAuiState(\n    ({ suggestions }) => suggestions.suggestions.length,\n  );\n\n  const suggestionElements = useMemo(() => {\n    if (suggestionsLength === 0) return null;\n    return Array.from({ length: suggestionsLength }, (_, index) => (\n      <ThreadPrimitiveSuggestionByIndex\n        key={index}\n        index={index}\n        components={components}\n      />\n    ));\n  }, [suggestionsLength, components]);\n\n  return suggestionElements;\n};\n\nThreadPrimitiveSuggestionsImpl.displayName = \"ThreadPrimitive.Suggestions\";\n\nexport const ThreadPrimitiveSuggestions = memo(\n  ThreadPrimitiveSuggestionsImpl,\n  (prev, next) => prev.components.Suggestion === next.components.Suggestion,\n);\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAsBA,MAAM,sBAAoD,CAAC,EAAE,UAAU,EAAE;IACvE,MAAM,YAAY,WAAW,UAAU;IACvC,qBAAO,sYAAC;;;;;AACV;KAHM;AA4BC,MAAM,iDACX,IAAA,8WAAI,EACF,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE;IACpB,qBACE,sYAAC,0NAAyB;QAAC,OAAO;kBAChC,cAAA,sYAAC;YAAoB,YAAY;;;;;;;;;;;AAGvC,GACA,CAAC,MAAM,OACL,KAAK,KAAK,KAAK,KAAK,KAAK,IACzB,KAAK,UAAU,CAAC,UAAU,KAAK,KAAK,UAAU,CAAC,UAAU;MAXlD;AAcb,iCAAiC,WAAW,GAC1C;AAiBK,MAAM,iCAET,CAAC,EAAE,UAAU,EAAE;;IACjB,MAAM,oBAAoB,IAAA,kKAAW;yEACnC,CAAC,EAAE,WAAW,EAAE,GAAK,YAAY,WAAW,CAAC,MAAM;;IAGrD,MAAM,qBAAqB,IAAA,iXAAO;sEAAC;YACjC,IAAI,sBAAsB,GAAG,OAAO;YACpC,OAAO,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAkB;8EAAG,CAAC,GAAG,sBACnD,sYAAC;wBAEC,OAAO;wBACP,YAAY;uBAFP;;;;;;QAKX;qEAAG;QAAC;QAAmB;KAAW;IAElC,OAAO;AACT;GAnBa;;QAGe,kKAAW;;;MAH1B;AAqBb,+BAA+B,WAAW,GAAG;AAEtC,MAAM,2CAA6B,IAAA,8WAAI,EAC5C,gCACA,CAAC,MAAM,OAAS,KAAK,UAAU,CAAC,UAAU,KAAK,KAAK,UAAU,CAAC,UAAU"}},
    {"offset": {"line": 9576, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 9589, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item-more/scope.tsx"],"sourcesContent":["import * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport type { Scope } from \"@radix-ui/react-context\";\n\nexport const useDropdownMenuScope: ReturnType<\n  typeof DropdownMenuPrimitive.createDropdownMenuScope\n> = DropdownMenuPrimitive.createDropdownMenuScope();\n\nexport type ScopedProps<P> = P & { __scopeThreadListItemMore?: Scope };\n"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,uBAET,2ZAA6C"}},
    {"offset": {"line": 9603, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item-more/thread-list-item-more-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { FC } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveRoot {\n  export type Props = DropdownMenuPrimitive.DropdownMenuProps;\n}\n\nexport const ThreadListItemMorePrimitiveRoot: FC<\n  ThreadListItemMorePrimitiveRoot.Props\n> = ({\n  __scopeThreadListItemMore,\n  ...rest\n}: ScopedProps<ThreadListItemMorePrimitiveRoot.Props>) => {\n  const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n  return <DropdownMenuPrimitive.Root {...scope} {...rest} />;\n};\n\nThreadListItemMorePrimitiveRoot.displayName =\n  \"ThreadListItemMorePrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;AAJA;;;AAUO,MAAM,kCAET,CAAC,EACH,yBAAyB,EACzB,GAAG,MACgD;;IACnD,MAAM,QAAQ,IAAA,6MAAoB,EAAC;IAEnC,qBAAO,sYAAC,wYAA0B;QAAE,GAAG,KAAK;QAAG,GAAG,IAAI;;;;;;AACxD;GATa;;QAMG,6MAAoB;;;KANvB;AAWb,gCAAgC,WAAW,GACzC"}},
    {"offset": {"line": 9643, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item-more/thread-list-item-more-trigger.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveTrigger {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Trigger>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Trigger\n  >;\n}\n\nexport const ThreadListItemMorePrimitiveTrigger = forwardRef<\n  ThreadListItemMorePrimitiveTrigger.Element,\n  ThreadListItemMorePrimitiveTrigger.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      ...rest\n    }: ScopedProps<ThreadListItemMorePrimitiveTrigger.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return <DropdownMenuPrimitive.Trigger {...scope} {...rest} ref={ref} />;\n  },\n);\n\nThreadListItemMorePrimitiveTrigger.displayName =\n  \"ThreadListItemMorePrimitive.Trigger\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,MAAM,mDAAqC,GAAA,IAAA,oXAAU,UAI1D,CACE,EACE,yBAAyB,EACzB,GAAG,MACmD,EACxD;;IAEA,MAAM,QAAQ,IAAA,6MAAoB,EAAC;IAEnC,qBAAO,sYAAC,2YAA6B;QAAE,GAAG,KAAK;QAAG,GAAG,IAAI;QAAE,KAAK;;;;;;AAClE;;QAHgB,6MAAoB;;;;QAApB,6MAAoB;;;;AAMtC,mCAAmC,WAAW,GAC5C"}},
    {"offset": {"line": 9690, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item-more/thread-list-item-more-content.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveContent {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Content>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Content\n  > & {\n    portalProps?:\n      | ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Portal>\n      | undefined;\n  };\n}\n\nexport const ThreadListItemMorePrimitiveContent = forwardRef<\n  ThreadListItemMorePrimitiveContent.Element,\n  ThreadListItemMorePrimitiveContent.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      portalProps,\n      sideOffset = 4,\n      ...props\n    }: ScopedProps<ThreadListItemMorePrimitiveContent.Props>,\n    forwardedRef,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return (\n      <DropdownMenuPrimitive.Portal {...scope} {...portalProps}>\n        <DropdownMenuPrimitive.Content\n          {...scope}\n          {...props}\n          ref={forwardedRef}\n          sideOffset={sideOffset}\n        />\n      </DropdownMenuPrimitive.Portal>\n    );\n  },\n);\n\nThreadListItemMorePrimitiveContent.displayName =\n  \"ThreadListItemMorePrimitive.Content\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBO,MAAM,mDAAqC,GAAA,IAAA,oXAAU,UAI1D,CACE,EACE,yBAAyB,EACzB,WAAW,EACX,aAAa,CAAC,EACd,GAAG,OACmD,EACxD;;IAEA,MAAM,QAAQ,IAAA,6MAAoB,EAAC;IAEnC,qBACE,sYAAC,0YAA4B;QAAE,GAAG,KAAK;QAAG,GAAG,WAAW;kBACtD,cAAA,sYAAC,2YAA6B;YAC3B,GAAG,KAAK;YACR,GAAG,KAAK;YACT,KAAK;YACL,YAAY;;;;;;;;;;;AAIpB;;QAZgB,6MAAoB;;;;QAApB,6MAAoB;;;;AAetC,mCAAmC,WAAW,GAC5C"}},
    {"offset": {"line": 9746, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item-more/thread-list-item-more-item.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveItem {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Item>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Item\n  >;\n}\n\nexport const ThreadListItemMorePrimitiveItem = forwardRef<\n  ThreadListItemMorePrimitiveItem.Element,\n  ThreadListItemMorePrimitiveItem.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      ...rest\n    }: ScopedProps<ThreadListItemMorePrimitiveItem.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return <DropdownMenuPrimitive.Item {...scope} {...rest} ref={ref} />;\n  },\n);\n\nThreadListItemMorePrimitiveItem.displayName =\n  \"ThreadListItemMorePrimitive.Item\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,MAAM,gDAAkC,GAAA,IAAA,oXAAU,UAIvD,CACE,EACE,yBAAyB,EACzB,GAAG,MACgD,EACrD;;IAEA,MAAM,QAAQ,IAAA,6MAAoB,EAAC;IAEnC,qBAAO,sYAAC,wYAA0B;QAAE,GAAG,KAAK;QAAG,GAAG,IAAI;QAAE,KAAK;;;;;;AAC/D;;QAHgB,6MAAoB;;;;QAApB,6MAAoB;;;;AAMtC,gCAAgC,WAAW,GACzC"}},
    {"offset": {"line": 9793, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item-more/thread-list-item-more-separator.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\";\nimport { ScopedProps, useDropdownMenuScope } from \"./scope\";\n\nexport namespace ThreadListItemMorePrimitiveSeparator {\n  export type Element = ComponentRef<typeof DropdownMenuPrimitive.Separator>;\n  export type Props = ComponentPropsWithoutRef<\n    typeof DropdownMenuPrimitive.Separator\n  >;\n}\n\nexport const ThreadListItemMorePrimitiveSeparator = forwardRef<\n  ThreadListItemMorePrimitiveSeparator.Element,\n  ThreadListItemMorePrimitiveSeparator.Props\n>(\n  (\n    {\n      __scopeThreadListItemMore,\n      ...rest\n    }: ScopedProps<ThreadListItemMorePrimitiveSeparator.Props>,\n    ref,\n  ) => {\n    const scope = useDropdownMenuScope(__scopeThreadListItemMore);\n\n    return <DropdownMenuPrimitive.Separator {...scope} {...rest} ref={ref} />;\n  },\n);\n\nThreadListItemMorePrimitiveSeparator.displayName =\n  \"ThreadListItemMorePrimitive.Separator\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,MAAM,qDAAuC,GAAA,IAAA,oXAAU,UAI5D,CACE,EACE,yBAAyB,EACzB,GAAG,MACqD,EAC1D;;IAEA,MAAM,QAAQ,IAAA,6MAAoB,EAAC;IAEnC,qBAAO,sYAAC,6YAA+B;QAAE,GAAG,KAAK;QAAG,GAAG,IAAI;QAAE,KAAK;;;;;;AACpE;;QAHgB,6MAAoB;;;;QAApB,6MAAoB;;;;AAMtC,qCAAqC,WAAW,GAC9C"}},
    {"offset": {"line": 9871, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 9885, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item/thread-list-item-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { type ComponentRef, forwardRef, ComponentPropsWithoutRef } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ThreadListItemPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const ThreadListItemPrimitiveRoot = forwardRef<\n  ThreadListItemPrimitiveRoot.Element,\n  ThreadListItemPrimitiveRoot.Props\n>((props, ref) => {\n  const isMain = useAuiState(\n    ({ threads, threadListItem }) => threads.mainThreadId === threadListItem.id,\n  );\n\n  return (\n    <Primitive.div\n      {...(isMain ? { \"data-active\": \"true\", \"aria-current\": \"true\" } : null)}\n      {...props}\n      ref={ref}\n    />\n  );\n});\n\nThreadListItemPrimitiveRoot.displayName = \"ThreadListItemPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAaO,MAAM,4CAA8B,GAAA,IAAA,oXAAU,UAGnD,CAAC,OAAO;;IACR,MAAM,SAAS,IAAA,kKAAW;2DACxB,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,GAAK,QAAQ,YAAY,KAAK,eAAe,EAAE;;IAG7E,qBACE,sYAAC,sYAAS,CAAC,GAAG;QACX,GAAI,SAAS;YAAE,eAAe;YAAQ,gBAAgB;QAAO,IAAI,IAAI;QACrE,GAAG,KAAK;QACT,KAAK;;;;;;AAGX;;QAXiB,kKAAW;;;;QAAX,kKAAW;;;;AAa5B,4BAA4B,WAAW,GAAG"}},
    {"offset": {"line": 9937, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item/thread-list-item-archive.ts"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useAui } from \"@creatorem/ai-store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemArchive = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().archive();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveArchive {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemArchive>;\n}\n\nexport const ThreadListItemPrimitiveArchive = createActionButton(\n  \"ThreadListItemPrimitive.Archive\",\n  useThreadListItemArchive,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;;AARA;;;;AAUA,MAAM,2BAA2B;;IAC/B,MAAM,MAAM,IAAA,oJAAM;IAClB,OAAO,IAAA,qXAAW;gDAAC;YACjB,IAAI,cAAc,GAAG,OAAO;QAC9B;+CAAG;QAAC;KAAI;AACV;GALM;;QACQ,oJAAM;;;AAWb,MAAM,iCAAiC,IAAA,yLAAkB,EAC9D,mCACA"}},
    {"offset": {"line": 9973, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item/thread-list-item-unarchive.ts"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useAui } from \"@creatorem/ai-store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemUnarchive = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().unarchive();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveUnarchive {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemUnarchive>;\n}\n\nexport const ThreadListItemPrimitiveUnarchive = createActionButton(\n  \"ThreadListItemPrimitive.Unarchive\",\n  useThreadListItemUnarchive,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;;AARA;;;;AAUA,MAAM,6BAA6B;;IACjC,MAAM,MAAM,IAAA,oJAAM;IAClB,OAAO,IAAA,qXAAW;kDAAC;YACjB,IAAI,cAAc,GAAG,SAAS;QAChC;iDAAG;QAAC;KAAI;AACV;GALM;;QACQ,oJAAM;;;AAWb,MAAM,mCAAmC,IAAA,yLAAkB,EAChE,qCACA"}},
    {"offset": {"line": 10009, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item/thread-list-item-delete.ts"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useAui } from \"@creatorem/ai-store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemDelete = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().delete();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveDelete {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemDelete>;\n}\n\nexport const ThreadListItemPrimitiveDelete = createActionButton(\n  \"ThreadListItemPrimitive.Delete\",\n  useThreadListItemDelete,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;;AARA;;;;AAUA,MAAM,0BAA0B;;IAC9B,MAAM,MAAM,IAAA,oJAAM;IAClB,OAAO,IAAA,qXAAW;+CAAC;YACjB,IAAI,cAAc,GAAG,MAAM;QAC7B;8CAAG;QAAC;KAAI;AACV;GALM;;QACQ,oJAAM;;;AAWb,MAAM,gCAAgC,IAAA,yLAAkB,EAC7D,kCACA"}},
    {"offset": {"line": 10045, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item/thread-list-item-trigger.ts"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n  createActionButton,\n} from \"../../utils/create-action-button\";\nimport { useAui } from \"@creatorem/ai-store\";\nimport { useCallback } from \"react\";\n\nconst useThreadListItemTrigger = () => {\n  const aui = useAui();\n  return useCallback(() => {\n    aui.threadListItem().switchTo();\n  }, [aui]);\n};\n\nexport namespace ThreadListItemPrimitiveTrigger {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<typeof useThreadListItemTrigger>;\n}\n\nexport const ThreadListItemPrimitiveTrigger = createActionButton(\n  \"ThreadListItemPrimitive.Trigger\",\n  useThreadListItemTrigger,\n);\n"],"names":[],"mappings":";;;;AAEA;AAKA;AACA;;AARA;;;;AAUA,MAAM,2BAA2B;;IAC/B,MAAM,MAAM,IAAA,oJAAM;IAClB,OAAO,IAAA,qXAAW;gDAAC;YACjB,IAAI,cAAc,GAAG,QAAQ;QAC/B;+CAAG;QAAC;KAAI;AACV;GALM;;QACQ,oJAAM;;;AAWb,MAAM,iCAAiC,IAAA,yLAAkB,EAC9D,mCACA"}},
    {"offset": {"line": 10081, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list-item/thread-list-item-title.tsx"],"sourcesContent":["\"use client\";\n\nimport type { FC, ReactNode } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\n\nexport namespace ThreadListItemPrimitiveTitle {\n  export type Props = {\n    fallback?: ReactNode;\n  };\n}\n\nexport const ThreadListItemPrimitiveTitle: FC<\n  ThreadListItemPrimitiveTitle.Props\n> = ({ fallback }) => {\n  const title = useAuiState(({ threadListItem }) => threadListItem.title);\n  return <>{title || fallback}</>;\n};\n\nThreadListItemPrimitiveTitle.displayName = \"ThreadListItemPrimitive.Title\";\n"],"names":[],"mappings":";;;;;AAGA;;;AAHA;;AAWO,MAAM,+BAET,CAAC,EAAE,QAAQ,EAAE;;IACf,MAAM,QAAQ,IAAA,kKAAW;2DAAC,CAAC,EAAE,cAAc,EAAE,GAAK,eAAe,KAAK;;IACtE,qBAAO;kBAAG,SAAS;;AACrB;GALa;;QAGG,kKAAW;;;KAHd;AAOb,6BAA6B,WAAW,GAAG"}},
    {"offset": {"line": 10150, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 10162, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list/thread-list-new.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ActionButtonElement,\n  ActionButtonProps,\n} from \"../../utils/create-action-button\";\nimport { forwardRef } from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useAuiState, useAui } from \"@creatorem/ai-store\";\n\nexport namespace ThreadListPrimitiveNew {\n  export type Element = ActionButtonElement;\n  export type Props = ActionButtonProps<() => void>;\n}\n\nexport const ThreadListPrimitiveNew = forwardRef<\n  ThreadListPrimitiveNew.Element,\n  ThreadListPrimitiveNew.Props\n>(({ onClick, disabled, ...props }, forwardedRef) => {\n  const isMain = useAuiState(\n    ({ threads }) => threads.newThreadId === threads.mainThreadId,\n  );\n\n  const aui = useAui();\n\n  return (\n    <Primitive.button\n      type=\"button\"\n      {...(isMain ? { \"data-active\": \"true\", \"aria-current\": \"true\" } : null)}\n      {...props}\n      ref={forwardedRef}\n      disabled={disabled}\n      onClick={composeEventHandlers(onClick, () => {\n        aui.threads().switchToNewThread();\n      })}\n    />\n  );\n});\n\nThreadListPrimitiveNew.displayName = \"ThreadListPrimitive.New\";\n"],"names":[],"mappings":";;;;;AAMA;AACA;AACA;AACA;AAAA;;;AATA;;;;;AAgBO,MAAM,uCAAyB,GAAA,IAAA,oXAAU,UAG9C,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE;;IAClC,MAAM,SAAS,IAAA,kKAAW;sDACxB,CAAC,EAAE,OAAO,EAAE,GAAK,QAAQ,WAAW,KAAK,QAAQ,YAAY;;IAG/D,MAAM,MAAM,IAAA,oJAAM;IAElB,qBACE,sYAAC,sYAAS,CAAC,MAAM;QACf,MAAK;QACJ,GAAI,SAAS;YAAE,eAAe;YAAQ,gBAAgB;QAAO,IAAI,IAAI;QACrE,GAAG,KAAK;QACT,KAAK;QACL,UAAU;QACV,SAAS,IAAA,8PAAoB,EAAC,SAAS;YACrC,IAAI,OAAO,GAAG,iBAAiB;QACjC;;;;;;AAGN;;QAlBiB,kKAAW;QAId,oJAAM;;;;QAJH,kKAAW;QAId,oJAAM;;;;AAgBpB,uBAAuB,WAAW,GAAG"}},
    {"offset": {"line": 10225, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/context/providers/thread-list-item-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport { type FC, type PropsWithChildren } from \"react\";\nimport { useAui, AuiProvider, Derived } from \"@creatorem/ai-store\";\nimport type { ThreadListItemRuntime } from \"../../legacy-runtime/runtime/thread-list-item-runtime\";\nimport { ThreadListItemClient } from \"../../legacy-runtime/client/thread-list-item-runtime-client\";\n\nexport const ThreadListItemByIndexProvider: FC<\n  PropsWithChildren<{\n    index: number;\n    archived: boolean;\n  }>\n> = ({ index, archived, children }) => {\n  const aui = useAui({\n    threadListItem: Derived({\n      source: \"threads\",\n      query: { type: \"index\", index, archived },\n      get: (aui) => aui.threads().item({ index, archived }),\n    }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n\nexport const ThreadListItemRuntimeProvider: FC<\n  PropsWithChildren<{\n    runtime: ThreadListItemRuntime;\n  }>\n> = ({ runtime, children }) => {\n  const aui = useAui({\n    threadListItem: ThreadListItemClient({ runtime }),\n  });\n\n  return <AuiProvider value={aui}>{children}</AuiProvider>;\n};\n"],"names":[],"mappings":";;;;;;;AAGA;AAAA;AAAA;AAEA;;;AALA;;;AAOO,MAAM,gCAKT,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE;;IAChC,MAAM,MAAM,IAAA,oJAAM,EAAC;QACjB,gBAAgB,IAAA,iJAAO,EAAC;YACtB,QAAQ;YACR,OAAO;gBAAE,MAAM;gBAAS;gBAAO;YAAS;YACxC,GAAG;6DAAE,CAAC,MAAQ,IAAI,OAAO,GAAG,IAAI,CAAC;wBAAE;wBAAO;oBAAS;;QACrD;IACF;IAEA,qBAAO,sYAAC,qLAAW;QAAC,OAAO;kBAAM;;;;;;AACnC;GAfa;;QAMC,oJAAM;;;KANP;AAiBN,MAAM,gCAIT,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE;;IACxB,MAAM,MAAM,IAAA,oJAAM,EAAC;QACjB,gBAAgB,IAAA,iOAAoB,EAAC;YAAE;QAAQ;IACjD;IAEA,qBAAO,sYAAC,qLAAW;QAAC,OAAO;kBAAM;;;;;;AACnC;IAVa;;QAKC,oJAAM;;;MALP"}},
    {"offset": {"line": 10306, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list/thread-list-items.tsx"],"sourcesContent":["\"use client\";\n\nimport { ComponentType, FC, memo, useMemo } from \"react\";\nimport { useAuiState } from \"@creatorem/ai-store\";\nimport { ThreadListItemByIndexProvider } from \"../../context/providers\";\n\nexport namespace ThreadListPrimitiveItems {\n  export type Props = {\n    archived?: boolean | undefined;\n    components: {\n      ThreadListItem: ComponentType;\n    };\n  };\n}\n\nexport namespace ThreadListPrimitiveItemByIndex {\n  export type Props = {\n    index: number;\n    archived?: boolean | undefined;\n    components: ThreadListPrimitiveItems.Props[\"components\"];\n  };\n}\n\n/**\n * Renders a single thread list item at the specified index.\n *\n * This component provides direct access to render a specific thread\n * from the thread list using the provided component configuration.\n *\n * @example\n * ```tsx\n * <ThreadListPrimitive.ItemByIndex\n *   index={0}\n *   components={{\n *     ThreadListItem: MyThreadListItem\n *   }}\n * />\n * ```\n */\nexport const ThreadListPrimitiveItemByIndex: FC<ThreadListPrimitiveItemByIndex.Props> =\n  memo(\n    ({ index, archived = false, components }) => {\n      const ThreadListItemComponent = components.ThreadListItem;\n\n      return (\n        <ThreadListItemByIndexProvider index={index} archived={archived}>\n          <ThreadListItemComponent />\n        </ThreadListItemByIndexProvider>\n      );\n    },\n    (prev, next) =>\n      prev.index === next.index &&\n      prev.archived === next.archived &&\n      prev.components.ThreadListItem === next.components.ThreadListItem,\n  );\n\nThreadListPrimitiveItemByIndex.displayName = \"ThreadListPrimitive.ItemByIndex\";\n\nexport const ThreadListPrimitiveItems: FC<ThreadListPrimitiveItems.Props> = ({\n  archived = false,\n  components,\n}) => {\n  const contentLength = useAuiState(({ threads }) =>\n    archived ? threads.archivedThreadIds.length : threads.threadIds.length,\n  );\n\n  const listElements = useMemo(() => {\n    return Array.from({ length: contentLength }, (_, index) => (\n      <ThreadListPrimitiveItemByIndex\n        key={index}\n        index={index}\n        archived={archived}\n        components={components}\n      />\n    ));\n  }, [contentLength, archived, components]);\n\n  return listElements;\n};\n\nThreadListPrimitiveItems.displayName = \"ThreadListPrimitive.Items\";\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAuCO,MAAM,+CACX,IAAA,8WAAI,EACF,CAAC,EAAE,KAAK,EAAE,WAAW,KAAK,EAAE,UAAU,EAAE;IACtC,MAAM,0BAA0B,WAAW,cAAc;IAEzD,qBACE,sYAAC,2NAA6B;QAAC,OAAO;QAAO,UAAU;kBACrD,cAAA,sYAAC;;;;;;;;;;AAGP,GACA,CAAC,MAAM,OACL,KAAK,KAAK,KAAK,KAAK,KAAK,IACzB,KAAK,QAAQ,KAAK,KAAK,QAAQ,IAC/B,KAAK,UAAU,CAAC,cAAc,KAAK,KAAK,UAAU,CAAC,cAAc;KAd1D;AAiBb,+BAA+B,WAAW,GAAG;AAEtC,MAAM,2BAA+D,CAAC,EAC3E,WAAW,KAAK,EAChB,UAAU,EACX;;IACC,MAAM,gBAAgB,IAAA,kKAAW;+DAAC,CAAC,EAAE,OAAO,EAAE,GAC5C,WAAW,QAAQ,iBAAiB,CAAC,MAAM,GAAG,QAAQ,SAAS,CAAC,MAAM;;IAGxE,MAAM,eAAe,IAAA,iXAAO;0DAAC;YAC3B,OAAO,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAc;kEAAG,CAAC,GAAG,sBAC/C,sYAAC;wBAEC,OAAO;wBACP,UAAU;wBACV,YAAY;uBAHP;;;;;;QAMX;yDAAG;QAAC;QAAe;QAAU;KAAW;IAExC,OAAO;AACT;GApBa;;QAIW,kKAAW;;;MAJtB;AAsBb,yBAAyB,WAAW,GAAG"}},
    {"offset": {"line": 10385, "column": 0}, "map": {"version":3,"sources":["file:///Users/arnaudpfu/nextjs-expo-boilerplate/main_august/ai/packages/react/src/primitives/thread-list/thread-list-root.tsx"],"sourcesContent":["\"use client\";\n\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { ComponentPropsWithoutRef, ComponentRef, forwardRef } from \"react\";\n\ntype PrimitiveDivProps = ComponentPropsWithoutRef<typeof Primitive.div>;\n\nexport namespace ThreadListPrimitiveRoot {\n  export type Element = ComponentRef<typeof Primitive.div>;\n  export type Props = PrimitiveDivProps;\n}\n\nexport const ThreadListPrimitiveRoot = forwardRef<\n  ThreadListPrimitiveRoot.Element,\n  ThreadListPrimitiveRoot.Props\n>((props, ref) => {\n  return <Primitive.div {...props} ref={ref} />;\n});\n\nThreadListPrimitiveRoot.displayName = \"ThreadListPrimitive.Root\";\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAYO,MAAM,wCAA0B,IAAA,oXAAU,OAG/C,CAAC,OAAO;IACR,qBAAO,sYAAC,sYAAS,CAAC,GAAG;QAAE,GAAG,KAAK;QAAE,KAAK;;;;;;AACxC;;AAEA,wBAAwB,WAAW,GAAG"}}]
}